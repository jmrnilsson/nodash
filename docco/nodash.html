<!DOCTYPE html>

<html>
<head>
  <title>nodash.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="docco.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    
    <ul class="sections">
        
          <li id="title">
              <div class="annotation">
                  <h1>nodash.js</h1>
              </div>
          </li>
        
        
        
        <li id="section-1">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-1">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-comment">/* vim: set et sw=2 ts=2: */</span>
(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-2">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-2">&#182;</a>
              </div>
              <p>Save a reference to <code>Set</code> (if defined). Otherwise this variable will
be <code>undefined</code>. References to some native types are kept here so that
native objects can be distinguished from local polyfills.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">var</span> NativeSet    = <span class="hljs-keyword">typeof</span> <span class="hljs-built_in">Set</span> !== <span class="hljs-string">'undefined'</span> &amp;&amp; <span class="hljs-built_in">Set</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-3">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-3">&#182;</a>
              </div>
              <p>Save a reference to the <code>Math</code> object.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">var</span> NativeMath   = <span class="hljs-built_in">Math</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-4">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-4">&#182;</a>
              </div>
              <p>Save a reference to the <code>Array</code> object.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">var</span> NativeArray  = <span class="hljs-built_in">Array</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-5">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-5">&#182;</a>
              </div>
              <p>Save a reference to the <code>Object</code> object.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">var</span> NativeObject = <span class="hljs-built_in">Object</span>;

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">install</span>(<span class="hljs-params">Nodash, Math, Array, Object, dontUseNativeSet, refObj, undefined</span>) </span>{
<span class="hljs-pi">  "use strict"</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-6">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-6">&#182;</a>
              </div>
              <p>Use either the supplied <code>Math</code> object from the arguments,
if none given the <code>NativeMath</code> object.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-built_in">Math</span>   = <span class="hljs-built_in">Math</span>   || NativeMath;</pre></div></div>
            
        </li>
        
        
        <li id="section-7">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-7">&#182;</a>
              </div>
              <p>Use either the supplied <code>Array</code> object from the arguments,
if none given the <code>NativeArray</code> object.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-built_in">Array</span>  = <span class="hljs-built_in">Array</span>  || NativeArray;</pre></div></div>
            
        </li>
        
        
        <li id="section-8">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-8">&#182;</a>
              </div>
              <p>Use either the supplied <code>Object</code> object from the arguments,
if none given the <code>NativeObject</code> object.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-built_in">Object</span> = <span class="hljs-built_in">Object</span> || NativeObject;</pre></div></div>
            
        </li>
        
        
        <li id="section-9">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-9">&#182;</a>
              </div>
              <p>This is the object the nodash functions will be attached to.
If none is given, just use a new empty object (this is the
object which will be returned eventually).</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  Nodash = Nodash || {};

  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">showEndOfStream</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-string">"end of stream"</span>;
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-10">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-10">&#182;</a>
              </div>
              <p>This is a special object used to mark the end of a stream.
It is used as a kind of unique symbol. The eos variable itself
is not exported and can not be written to from the outside.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-keyword">var</span> eos = {
    toString: showEndOfStream,
    inspect: showEndOfStream
  };</pre></div></div>
            
        </li>
        
        
        <li id="section-11">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-11">&#182;</a>
              </div>
              <p>The reference on the other hand is exported as <code>endOfStream</code>.
While it is technically possible to overwrite <code>endOfStream</code> from
the outside this will not affect the <code>eos</code> variable within this
closure.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  Nodash.endOfStream = eos;</pre></div></div>
            
        </li>
        
        
        <li id="section-12">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-12">&#182;</a>
              </div>
              <p>This is a plain object which is only available within this
clojure. It is used as a kind of unique symbol to be identified
by comparing references via <code>===</code>.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-keyword">var</span> stream = {};</pre></div></div>
            
        </li>
        
        
        <li id="section-13">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-13">&#182;</a>
              </div>
              <p>Creates a (finite) stream from a function f. This function
is meant to be used internally (within this closure) only.
A function is marked as stream by simply attaching the <code>stream</code>
object as <code>__stream__</code>.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">mkStream</span>(<span class="hljs-params">f</span>) </span>{
    f.__stream__ = stream;
    <span class="hljs-keyword">return</span> f;
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-14">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-14">&#182;</a>
              </div>
              <p>Creates an infinite stream from a function f. This function
is meant to be used internally only.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">mkInfinite</span>(<span class="hljs-params">f</span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-15">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-15">&#182;</a>
              </div>
              <p>It creates a strean by invoking <code>mkStream</code> and then marks it
as infinite by attaching <code>true</code> as <code>__infinite__</code>.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    f = mkStream(f);
    f.__infinite__ = <span class="hljs-literal">true</span>;
    <span class="hljs-keyword">return</span> f;
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-16">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-16">&#182;</a>
              </div>
              <p>Check whether a stream is infinite by checking for the
<code>__infinite__</code> property.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isInfinite</span>(<span class="hljs-params">f</span>) </span>{
    <span class="hljs-keyword">return</span> !!f.__infinite__;
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-17">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-17">&#182;</a>
              </div>
              <p>Check whether a stream is finite and raise an error if it is not.
This function is meant to be used internally only to have functions
accepting finite streams only check their arguments.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">checkFinite</span>(<span class="hljs-params">xs</span>) </span>{
    <span class="hljs-keyword">if</span> (isInfinite(xs)) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'this function can not consume infinite streams'</span>);
    }
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-18">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-18">&#182;</a>
              </div>
              <p><code>isArray</code> checks whether a thing is actually an array object.
If <code>Array.isArray</code> is not available in this environment it will
fall back to comparing the toString representation. The <code>toString</code>
method used is the one from the <code>NativeObject</code> to make sure that
client code can not temper with an object and make it look like an
array. The fallback is necessary to cope with legacy browser
environments.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-keyword">var</span> isArray = <span class="hljs-built_in">Array</span>.isArray || <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_isArray</span>(<span class="hljs-params">arr</span>) </span>{
    <span class="hljs-keyword">return</span> NativeObject.prototype.toString.call(arr) === <span class="hljs-string">'[object Array]'</span>;
  };</pre></div></div>
            
        </li>
        
        
        <li id="section-19">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-19">&#182;</a>
              </div>
              <p>Check whether a thing is actually a function.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isFunction</span>(<span class="hljs-params">x</span>) </span>{ <span class="hljs-keyword">return</span> <span class="hljs-keyword">typeof</span> x === <span class="hljs-string">'function'</span>; }</pre></div></div>
            
        </li>
        
        
        <li id="section-20">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-20">&#182;</a>
              </div>
              <p>Check whether a thing is actually a string.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isString</span>(<span class="hljs-params">x</span>)   </span>{ <span class="hljs-keyword">return</span> <span class="hljs-keyword">typeof</span> x === <span class="hljs-string">'string'</span>; }</pre></div></div>
            
        </li>
        
        
        <li id="section-21">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-21">&#182;</a>
              </div>
              <p>Check whether a thing is actually a number.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isNumber</span>(<span class="hljs-params">x</span>)   </span>{ <span class="hljs-keyword">return</span> <span class="hljs-keyword">typeof</span> x === <span class="hljs-string">'number'</span>; }</pre></div></div>
            
        </li>
        
        
        <li id="section-22">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-22">&#182;</a>
              </div>
              <p>Check whether a thing is actually a stream.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isStream</span>(<span class="hljs-params">x</span>)   </span>{ <span class="hljs-keyword">return</span> isFunction(x) &amp;&amp; x.__stream__ === stream; }

  <span class="hljs-keyword">var</span> keys = <span class="hljs-built_in">Object</span>.keys || (<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> hasOwnProperty = NativeObject.prototype.hasOwnProperty,
        hasDontEnumBug = !(refObj || { toString: <span class="hljs-literal">null</span> }).propertyIsEnumerable(<span class="hljs-string">'toString'</span>),
        dontEnums = [
          <span class="hljs-string">'toString'</span>,
          <span class="hljs-string">'toLocaleString'</span>,
          <span class="hljs-string">'valueOf'</span>,
          <span class="hljs-string">'hasOwnProperty'</span>,
          <span class="hljs-string">'isPrototypeOf'</span>,
          <span class="hljs-string">'propertyIsEnumerable'</span>,
          <span class="hljs-string">'constructor'</span>
        ],
        dontEnumsLength = dontEnums.length;

    <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_Object_keys</span>(<span class="hljs-params">obj</span>) </span>{
      <span class="hljs-keyword">var</span> result = [], prop, i;

      <span class="hljs-keyword">for</span> (prop <span class="hljs-keyword">in</span> obj) {
        <span class="hljs-keyword">if</span> (hasOwnProperty.call(obj, prop)) {
          result.push(prop);
        }
      }
      <span class="hljs-keyword">if</span> (hasDontEnumBug) {
        <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; dontEnumsLength; i++) {
          <span class="hljs-keyword">if</span> (hasOwnProperty.call(obj, dontEnums[i])) {
            result.push(dontEnums[i]);
          }
        }
      }
      <span class="hljs-keyword">return</span> result;
    };
  }());

  <span class="hljs-keyword">var</span> <span class="hljs-built_in">Set</span> = (!dontUseNativeSet &amp;&amp; NativeSet) || (<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
    
    <span class="hljs-keyword">var</span> <span class="hljs-built_in">Set</span> = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
      <span class="hljs-keyword">this</span>.xs = {};
    };

    <span class="hljs-built_in">Set</span>.prototype.add = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_Set_add</span>(<span class="hljs-params">value</span>) </span>{
      <span class="hljs-keyword">this</span>.xs[value] = <span class="hljs-literal">true</span>;
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
    };

    <span class="hljs-built_in">Set</span>.prototype.has = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_Set_has</span>(<span class="hljs-params">value</span>) </span>{
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.xs[value] === <span class="hljs-literal">true</span>;
    };

    <span class="hljs-keyword">return</span> <span class="hljs-built_in">Set</span>;
  }());

  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">id</span>(<span class="hljs-params">x</span>) </span>{ <span class="hljs-keyword">return</span> x; }

  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">listToString</span>(<span class="hljs-params">x</span>) </span>{ <span class="hljs-keyword">return</span> x.join(<span class="hljs-string">''</span>); }</pre></div></div>
            
        </li>
        
        
        <li id="section-23">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-23">&#182;</a>
              </div>
              <p><code>indexOf</code> uses an implementation of the Knuth-Morrison-Pratt
Algorithm for finding the index of a given subsequence
(identified as <code>word</code> here) within a sequence (identified as
<code>string</code> here). Thanks to JavaScript’s dynamic nature it
works equally well with strings and arrays.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">indexOf</span>(<span class="hljs-params">word, string</span>) </span>{
    <span class="hljs-keyword">var</span> m = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">var</span> table = [];

    <span class="hljs-keyword">var</span> pos = <span class="hljs-number">2</span>;
    <span class="hljs-keyword">var</span> cnd = <span class="hljs-number">0</span>;

    table[<span class="hljs-number">0</span>] = -<span class="hljs-number">1</span>;
    table[<span class="hljs-number">1</span>] = <span class="hljs-number">0</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-24">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-24">&#182;</a>
              </div>
              <p>build the table for KMP. This takes <code>O(word.length)</code> steps.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">while</span> (pos &lt; word.length) {
      <span class="hljs-keyword">if</span> (word[pos - <span class="hljs-number">1</span>] == word[cnd]) {
        cnd = cnd + <span class="hljs-number">1</span>;
        table[pos] = cnd;
        pos = pos + <span class="hljs-number">1</span>;
      } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (cnd &gt; <span class="hljs-number">0</span>) {
        cnd = table[cnd];
      } <span class="hljs-keyword">else</span> {
        table[pos] = <span class="hljs-number">0</span>;
        pos = pos + <span class="hljs-number">1</span>;
      }
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-25">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-25">&#182;</a>
              </div>
              <p>scan the string. This takes <code>O(string.length)</code> steps.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">while</span> (m + i &lt; string.length) {
      <span class="hljs-keyword">if</span> (word[i] == string[m + i]) {
        <span class="hljs-keyword">if</span> (i == word.length - <span class="hljs-number">1</span>) {
          <span class="hljs-keyword">return</span> m;
        }
        i = i + <span class="hljs-number">1</span>;
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">if</span> (table[i] &gt; -<span class="hljs-number">1</span>) {
          m = m + i - table[i];
          i = table[i];
        } <span class="hljs-keyword">else</span> {
          i = <span class="hljs-number">0</span>;
          m = m + <span class="hljs-number">1</span>;
        }
      }
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-26">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-26">&#182;</a>
              </div>
              <p>Returns -1 if the subsequence was not found in the sequence.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span>;
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-27">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-27">&#182;</a>
              </div>
              <p>While partial application of functions can be implemented easily
using JavaScript’s <code>bind</code> or <code>apply</code> functions, it is more
efficient to use closures as JavaScript’s native functions
additionally do some heavy error checking and deal with <code>this</code>.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  <span class="hljs-keyword">var</span> funcs = {

    <span class="hljs-number">0</span>: id,
    <span class="hljs-number">1</span>: id,
    <span class="hljs-number">2</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">fn</span>) </span>{
      <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">a, b</span>) </span>{
        <span class="hljs-keyword">switch</span> (<span class="hljs-built_in">arguments</span>.length) {
        <span class="hljs-keyword">case</span> <span class="hljs-number">1</span>:
          <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">b</span>) </span>{
            <span class="hljs-keyword">return</span> fn(a, b);
          };
        }
        <span class="hljs-keyword">return</span> fn(a, b);
      };
    },
    <span class="hljs-number">3</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">fn</span>) </span>{
      <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">a, b, c</span>) </span>{
        <span class="hljs-keyword">switch</span> (<span class="hljs-built_in">arguments</span>.length) {
        <span class="hljs-keyword">case</span> <span class="hljs-number">1</span>:
          <span class="hljs-keyword">return</span> funcs[<span class="hljs-number">2</span>](<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">b, c</span>) </span>{
            <span class="hljs-keyword">return</span> fn(a, b, c);
          });
        <span class="hljs-keyword">case</span> <span class="hljs-number">2</span>:
          <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">c</span>) </span>{
            <span class="hljs-keyword">return</span> fn(a, b, c);
          };
        }
        <span class="hljs-keyword">return</span> fn(a, b, c);
      };
    },
    <span class="hljs-number">4</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">fn</span>) </span>{
      <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">a, b, c, d</span>) </span>{
        <span class="hljs-keyword">switch</span> (<span class="hljs-built_in">arguments</span>.length) {
        <span class="hljs-keyword">case</span> <span class="hljs-number">1</span>:
          <span class="hljs-keyword">return</span> funcs[<span class="hljs-number">3</span>](<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">b, c, d</span>) </span>{
            <span class="hljs-keyword">return</span> fn(a, b, c, d);
          });
        <span class="hljs-keyword">case</span> <span class="hljs-number">2</span>:
          <span class="hljs-keyword">return</span> funcs[<span class="hljs-number">2</span>](<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">c, d</span>) </span>{
            <span class="hljs-keyword">return</span> fn(a, b, c, d);
          });
        <span class="hljs-keyword">case</span> <span class="hljs-number">3</span>:
          <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">d</span>) </span>{
            <span class="hljs-keyword">return</span> fn(a, b, c, d);
          };
        }
        <span class="hljs-keyword">return</span> fn(a, b, c, d);
      };
    },
    <span class="hljs-number">5</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">fn</span>) </span>{
      <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">a, b, c, d, e</span>) </span>{
        <span class="hljs-keyword">switch</span> (<span class="hljs-built_in">arguments</span>.length) {
        <span class="hljs-keyword">case</span> <span class="hljs-number">1</span>:
          <span class="hljs-keyword">return</span> funcs[<span class="hljs-number">4</span>](<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">b, c, d, e</span>) </span>{
            <span class="hljs-keyword">return</span> fn(a, b, c, d, e);
          });
        <span class="hljs-keyword">case</span> <span class="hljs-number">2</span>:
          <span class="hljs-keyword">return</span> funcs[<span class="hljs-number">3</span>](<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">c, d, e</span>) </span>{
            <span class="hljs-keyword">return</span> fn(a, b, c, d, e);
          });
        <span class="hljs-keyword">case</span> <span class="hljs-number">3</span>:
          <span class="hljs-keyword">return</span> funcs[<span class="hljs-number">2</span>](<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">d, e</span>) </span>{
            <span class="hljs-keyword">return</span> fn(a, b, c, d, e);
          });
        <span class="hljs-keyword">case</span> <span class="hljs-number">4</span>:
          <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">e</span>) </span>{
            <span class="hljs-keyword">return</span> fn(a, b, c, d, e);
          };
        }
        <span class="hljs-keyword">return</span> fn(a, b, c, d, e);
      };
    },
    <span class="hljs-number">6</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">fn</span>) </span>{
      <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">a, b, c, d, e, f</span>) </span>{
        <span class="hljs-keyword">switch</span> (<span class="hljs-built_in">arguments</span>.length) {
        <span class="hljs-keyword">case</span> <span class="hljs-number">1</span>:
          <span class="hljs-keyword">return</span> funcs[<span class="hljs-number">5</span>](<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">b, c, d, e, f</span>) </span>{
            <span class="hljs-keyword">return</span> fn(a, b, c, d, e, f);
          });
        <span class="hljs-keyword">case</span> <span class="hljs-number">2</span>:
          <span class="hljs-keyword">return</span> funcs[<span class="hljs-number">4</span>](<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">c, d, e, f</span>) </span>{
            <span class="hljs-keyword">return</span> fn(a, b, c, d, e, f);
          });
        <span class="hljs-keyword">case</span> <span class="hljs-number">3</span>:
          <span class="hljs-keyword">return</span> funcs[<span class="hljs-number">3</span>](<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">d, e, f</span>) </span>{
            <span class="hljs-keyword">return</span> fn(a, b, c, d, e, f);
          });
        <span class="hljs-keyword">case</span> <span class="hljs-number">4</span>:
          <span class="hljs-keyword">return</span> funcs[<span class="hljs-number">2</span>](<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">e, f</span>) </span>{
            <span class="hljs-keyword">return</span> fn(a, b, c, d, e, f);
          });
        <span class="hljs-keyword">case</span> <span class="hljs-number">5</span>:
          <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">f</span>) </span>{
            <span class="hljs-keyword">return</span> fn(a, b, c, d, e, f);
          };
        }
        <span class="hljs-keyword">return</span> fn(a, b, c, d, e, f);
      };
    },
    <span class="hljs-number">7</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">fn</span>) </span>{
      <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">a, b, c, d, e, f, g</span>) </span>{
        <span class="hljs-keyword">switch</span> (<span class="hljs-built_in">arguments</span>.length) {
        <span class="hljs-keyword">case</span> <span class="hljs-number">1</span>:
          <span class="hljs-keyword">return</span> funcs[<span class="hljs-number">6</span>](<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">b, c, d, e, f, g</span>) </span>{
            <span class="hljs-keyword">return</span> fn(a, b, c, d, e, f, g);
          });
        <span class="hljs-keyword">case</span> <span class="hljs-number">2</span>:
          <span class="hljs-keyword">return</span> funcs[<span class="hljs-number">5</span>](<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">c, d, e, f, g</span>) </span>{
            <span class="hljs-keyword">return</span> fn(a, b, c, d, e, f, g);
          });
        <span class="hljs-keyword">case</span> <span class="hljs-number">3</span>:
          <span class="hljs-keyword">return</span> funcs[<span class="hljs-number">4</span>](<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">d, e, f, g</span>) </span>{
            <span class="hljs-keyword">return</span> fn(a, b, c, d, e, f, g);
          });
        <span class="hljs-keyword">case</span> <span class="hljs-number">4</span>:
          <span class="hljs-keyword">return</span> funcs[<span class="hljs-number">3</span>](<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">e, f, g</span>) </span>{
            <span class="hljs-keyword">return</span> fn(a, b, c, d, e, f, g);
          });
        <span class="hljs-keyword">case</span> <span class="hljs-number">5</span>:
          <span class="hljs-keyword">return</span> funcs[<span class="hljs-number">2</span>](<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">f, g</span>) </span>{
            <span class="hljs-keyword">return</span> fn(a, b, c, d, e, f, g);
          });
        <span class="hljs-keyword">case</span> <span class="hljs-number">6</span>:
          <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">g</span>) </span>{
            <span class="hljs-keyword">return</span> fn(a, b, c, d, e, f, g);
          };
        }
        <span class="hljs-keyword">return</span> fn(a, b, c, d, e, f, g);
      };
    },
    <span class="hljs-number">8</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">fn</span>) </span>{
      <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">a, b, c, d, e, f, g, h</span>) </span>{
        <span class="hljs-keyword">switch</span> (<span class="hljs-built_in">arguments</span>.length) {
        <span class="hljs-keyword">case</span> <span class="hljs-number">1</span>:
          <span class="hljs-keyword">return</span> funcs[<span class="hljs-number">7</span>](<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">b, c, d, e, f, g, h</span>) </span>{
            <span class="hljs-keyword">return</span> fn(a, b, c, d, e, f, g, h);
          });
        <span class="hljs-keyword">case</span> <span class="hljs-number">2</span>:
          <span class="hljs-keyword">return</span> funcs[<span class="hljs-number">6</span>](<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">c, d, e, f, g, h</span>) </span>{
            <span class="hljs-keyword">return</span> fn(a, b, c, d, e, f, g, h);
          });
        <span class="hljs-keyword">case</span> <span class="hljs-number">3</span>:
          <span class="hljs-keyword">return</span> funcs[<span class="hljs-number">5</span>](<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">d, e, f, g, h</span>) </span>{
            <span class="hljs-keyword">return</span> fn(a, b, c, d, e, f, g, h);
          });
        <span class="hljs-keyword">case</span> <span class="hljs-number">4</span>:
          <span class="hljs-keyword">return</span> funcs[<span class="hljs-number">4</span>](<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">e, f, g, h</span>) </span>{
            <span class="hljs-keyword">return</span> fn(a, b, c, d, e, f, g, h);
          });
        <span class="hljs-keyword">case</span> <span class="hljs-number">5</span>:
          <span class="hljs-keyword">return</span> funcs[<span class="hljs-number">3</span>](<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">f, g, h</span>) </span>{
            <span class="hljs-keyword">return</span> fn(a, b, c, d, e, f, g, h);
          });
        <span class="hljs-keyword">case</span> <span class="hljs-number">6</span>:
          <span class="hljs-keyword">return</span> funcs[<span class="hljs-number">2</span>](<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">g, h</span>) </span>{
            <span class="hljs-keyword">return</span> fn(a, b, c, d, e, f, g, h);
          });
        <span class="hljs-keyword">case</span> <span class="hljs-number">7</span>:
          <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">h</span>) </span>{
            <span class="hljs-keyword">return</span> fn(a, b, c, d, e, f, g, h);
          };
        }
        <span class="hljs-keyword">return</span> fn(a, b, c, d, e, f, g, h);
      };
    }
  };

  Nodash.curried = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">fn</span>) </span>{ <span class="hljs-keyword">return</span> funcs[fn.length](fn); };

  Nodash.pipe = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> functions, intermediateResult, callback;
    <span class="hljs-keyword">var</span> error = <span class="hljs-literal">null</span>;
    <span class="hljs-keyword">if</span> (isArray(<span class="hljs-built_in">arguments</span>[<span class="hljs-number">0</span>])) {
      functions = <span class="hljs-built_in">arguments</span>[<span class="hljs-number">0</span>];
      callback = <span class="hljs-built_in">arguments</span>[<span class="hljs-number">1</span>];
    } <span class="hljs-keyword">else</span> {
      functions = <span class="hljs-built_in">arguments</span>;
    }
    <span class="hljs-keyword">if</span> (functions.length &gt; <span class="hljs-number">0</span>) {
      <span class="hljs-keyword">if</span> (isFunction(functions[<span class="hljs-number">0</span>])) {
        intermediateResult = functions[<span class="hljs-number">0</span>]();
      } <span class="hljs-keyword">else</span> {
        intermediateResult = functions[<span class="hljs-number">0</span>];
      }
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">1</span>; i &lt; functions.length; i += <span class="hljs-number">1</span>) {
        <span class="hljs-keyword">try</span> {
          intermediateResult = functions[i](intermediateResult);
        } <span class="hljs-keyword">catch</span> (err) {
          error = err;
        }
      }
    }
    <span class="hljs-keyword">if</span> (isFunction(callback)) {
      callback(error, intermediateResult);
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (error) {
      <span class="hljs-keyword">throw</span> error;
    }
    <span class="hljs-keyword">return</span> intermediateResult;
  };

  <span class="hljs-comment">/* @ifdef WITH_ONLINE_HELP */</span>
  Nodash.functions = {};
  <span class="hljs-comment">/* @endif */</span>

  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">register</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> f, i, arg, aliases = [], name;
    <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-built_in">arguments</span>.length; i++) {
      arg = <span class="hljs-built_in">arguments</span>[i];
      <span class="hljs-keyword">switch</span> (<span class="hljs-keyword">typeof</span> arg) {
      <span class="hljs-keyword">case</span> <span class="hljs-string">'string'</span>:
        name = name || arg;
        aliases.push(arg);
        <span class="hljs-keyword">break</span>;
      <span class="hljs-keyword">case</span> <span class="hljs-string">'function'</span>:
        f = Nodash.curried(arg);
        <span class="hljs-keyword">break</span>;
      }
    }
    <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; aliases.length; i++) {
      Nodash[aliases[i]] = f;
    }
    aliases.shift();
    <span class="hljs-comment">/* @ifdef WITH_ONLINE_HELP */</span>
    Nodash.functions[name] = {
      aliases: aliases,
      arity: f.length
    };
    <span class="hljs-comment">/* @endif */</span>
    <span class="hljs-keyword">return</span> f;
  }</pre></div></div>
            
        </li>
        
        
        <li id="section-28">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-28">&#182;</a>
              </div>
              <p>Exports utility functions.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  
  register(<span class="hljs-string">'isFunction'</span>, isFunction);
  register(<span class="hljs-string">'isStream'</span>, isStream);
  register(<span class="hljs-string">'isArray'</span>, isArray);
  register(<span class="hljs-string">'isNumber'</span>, isNumber);
  register(<span class="hljs-string">'isInfinite'</span>, isInfinite);</pre></div></div>
            
        </li>
        
        
        <li id="section-29">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-29">&#182;</a>
              </div>
              <p>Exports/Defines of functions dealing with functions.</p>

            </div>
            
        </li>
        
        
        <li id="section-30">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-30">&#182;</a>
              </div>
              <p>The identify function just returns what was passed in immediately.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  register(<span class="hljs-string">'id'</span>, id);</pre></div></div>
            
        </li>
        
        
        <li id="section-31">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-31">&#182;</a>
              </div>
              <p>Since JavaScript is a strict language <code>idf</code> is provided. It wrapes
the argument given to it in a function which will always return
that value. A handy application is to define infinite streams,
for example <code>stream(idf(7))</code>.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  register(<span class="hljs-string">'idf'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_idf</span>(<span class="hljs-params">x</span>) </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
      <span class="hljs-keyword">return</span> x;
    };
  });</pre></div></div>
            
        </li>
        
        
        <li id="section-32">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-32">&#182;</a>
              </div>
              <p>The const function accepts a first and a second argument and
discards the latter one. It is mostly used as a section
(partial application) to discard some input in a pipe and
return a fixed value.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  register(<span class="hljs-string">'const'</span>, <span class="hljs-string">'const_'</span>, <span class="hljs-string">'constant'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_const</span>(<span class="hljs-params">a, b</span>) </span>{
    <span class="hljs-keyword">return</span> a;
  });</pre></div></div>
            
        </li>
        
        
        <li id="section-33">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-33">&#182;</a>
              </div>
              <p>Applies the function given as first argument to the argument given
as second argument. This seemingly useless function is handy
to make function application explicit, e.g. when building using
<code>fold</code> or <code>zipWith</code>.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  register(<span class="hljs-string">'$'</span>, <span class="hljs-string">'apply'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_apply</span>(<span class="hljs-params">f, x</span>) </span>{
    <span class="hljs-keyword">return</span> f(x);
  });</pre></div></div>
            
        </li>
        
        
        <li id="section-34">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-34">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>  register(<span class="hljs-string">'.'</span>, <span class="hljs-string">'compose'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_compose</span>(<span class="hljs-params">f, g, x</span>) </span>{
    <span class="hljs-keyword">return</span> f(g(x));
  });

  register(<span class="hljs-string">'compose2'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_compose2</span>(<span class="hljs-params">f, g, x, y</span>) </span>{
    <span class="hljs-keyword">return</span> f(g(x, y));
  });

  register(<span class="hljs-string">'flip'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_flip</span>(<span class="hljs-params">f</span>) </span>{
    <span class="hljs-keyword">return</span> funcs[<span class="hljs-number">2</span>](<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">b, a</span>) </span>{
      <span class="hljs-keyword">return</span> f(a, b);
    });
  });

  register(<span class="hljs-string">'on'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_on</span>(<span class="hljs-params">g, f, a, b</span>) </span>{
    <span class="hljs-keyword">return</span> g(f(a), f(b));
  });</pre></div></div>
            
        </li>
        
        
        <li id="section-35">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-35">&#182;</a>
              </div>
              <p>Bool</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
  register(<span class="hljs-string">'&amp;&amp;'</span>, <span class="hljs-string">'AND'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_AND</span>(<span class="hljs-params">a, b</span>) </span>{ <span class="hljs-keyword">return</span> a &amp;&amp; b; });

  register(<span class="hljs-string">'||'</span>, <span class="hljs-string">'OR'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_OR</span>(<span class="hljs-params">a, b</span>) </span>{ <span class="hljs-keyword">return</span> a || b; });

  register(<span class="hljs-string">'not'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_not</span>(<span class="hljs-params">value</span>) </span>{ <span class="hljs-keyword">return</span> !value; });

  register(<span class="hljs-string">'bool'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_bool</span>(<span class="hljs-params">yes, no, bool</span>) </span>{
    <span class="hljs-keyword">return</span> bool ? yes : no;
  });</pre></div></div>
            
        </li>
        
        
        <li id="section-36">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-36">&#182;</a>
              </div>
              <p>Tuple</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
  register(<span class="hljs-string">'fst'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_fst</span>(<span class="hljs-params">arr</span>) </span>{ <span class="hljs-keyword">return</span> arr[<span class="hljs-number">0</span>]; });

  register(<span class="hljs-string">'snd'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_snd</span>(<span class="hljs-params">arr</span>) </span>{ <span class="hljs-keyword">return</span> arr[<span class="hljs-number">1</span>]; });

  register(<span class="hljs-string">','</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">a, b</span>) </span>{ <span class="hljs-keyword">return</span> [ a, b ]; });

  register(<span class="hljs-string">',,'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">a, b, c</span>) </span>{ <span class="hljs-keyword">return</span> [ a, b, c ]; });

  register(<span class="hljs-string">',,,'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">a, b, c, d</span>) </span>{ <span class="hljs-keyword">return</span> [ a, b, c, d ]; });

  register(<span class="hljs-string">',,,,'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">a, b, c, d, e</span>) </span>{
    <span class="hljs-keyword">return</span> [ a, b, c, d, e ];
  });

  register(<span class="hljs-string">',,,,,'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">a, b, c, d, e, f</span>) </span>{
    <span class="hljs-keyword">return</span> [ a, b, c, d, e, f ];
  });

  register(<span class="hljs-string">',,,,,,'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">a, b, c, d, e, f, g</span>) </span>{
    <span class="hljs-keyword">return</span> [ a, b, c, d, e, f, g ];
  });</pre></div></div>
            
        </li>
        
        
        <li id="section-37">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-37">&#182;</a>
              </div>
              <p>Eq</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
  register(<span class="hljs-string">'=='</span>, <span class="hljs-string">'eq'</span>,  <span class="hljs-string">'EQ'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_eq</span>(<span class="hljs-params">a, b</span>) </span>{
    <span class="hljs-keyword">if</span> (a === b) {
      <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    }
    <span class="hljs-keyword">var</span> ta = <span class="hljs-keyword">typeof</span> a;
    <span class="hljs-keyword">var</span> tb = <span class="hljs-keyword">typeof</span> b;
    <span class="hljs-keyword">if</span> (ta !== tb) {
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }
    <span class="hljs-keyword">if</span> (ta === <span class="hljs-string">'object'</span>) {
      <span class="hljs-keyword">var</span> k = Nodash.union(keys(a), keys(b));
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; k.length; i++) {
        <span class="hljs-keyword">if</span> (!Nodash.eq(a[k[i]], b[k[i]])) {
          <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        }
      }
      <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    }
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
  });

  register(<span class="hljs-string">'/='</span>, <span class="hljs-string">'neq'</span>, <span class="hljs-string">'NEQ'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_neq</span>(<span class="hljs-params">a, b</span>) </span>{
    <span class="hljs-keyword">return</span> !Nodash.eq(a, b);
  });</pre></div></div>
            
        </li>
        
        
        <li id="section-38">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-38">&#182;</a>
              </div>
              <p>Ord</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
  register(<span class="hljs-string">'compare'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_compare</span>(<span class="hljs-params">a, b</span>) </span>{
    <span class="hljs-keyword">switch</span> (<span class="hljs-keyword">typeof</span> a) {
    <span class="hljs-keyword">case</span> <span class="hljs-string">'string'</span>:
      <span class="hljs-keyword">return</span> a.localeCompare(b);
    <span class="hljs-keyword">case</span> <span class="hljs-string">'object'</span>:
      <span class="hljs-keyword">if</span> (isFunction(a.compareTo)) {
        <span class="hljs-keyword">return</span> a.compareTo(b);
      } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (isArray(a)) {
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-built_in">Math</span>.min(a.length, b.length); i++) {
          <span class="hljs-keyword">var</span> r = Nodash.compare(a[i], b[i]);
          <span class="hljs-keyword">if</span> (r !== <span class="hljs-number">0</span>) {
              <span class="hljs-keyword">return</span> r;
          }
        }
        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
      }
      <span class="hljs-keyword">return</span> a.toString().localeCompare(b.toString());
    <span class="hljs-keyword">case</span> <span class="hljs-string">'number'</span>:
      <span class="hljs-keyword">return</span> Nodash.signum(a - b);
    }
    <span class="hljs-keyword">return</span> <span class="hljs-literal">undefined</span>;
  });

  register(<span class="hljs-string">'&lt;'</span>, <span class="hljs-string">'lt'</span>, <span class="hljs-string">'LT'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_lt</span>(<span class="hljs-params">a, b</span>) </span>{
    <span class="hljs-keyword">return</span> Nodash.compare(a, b) &lt; <span class="hljs-number">0</span>;
  });

  register(<span class="hljs-string">'&gt;'</span>, <span class="hljs-string">'gt'</span>, <span class="hljs-string">'GT'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_gt</span>(<span class="hljs-params">a, b</span>) </span>{
    <span class="hljs-keyword">return</span> Nodash.compare(a, b) &gt; <span class="hljs-number">0</span>;
  });

  register(<span class="hljs-string">'&lt;='</span>, <span class="hljs-string">'lte'</span>, <span class="hljs-string">'LTE'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_lte</span>(<span class="hljs-params">a, b</span>) </span>{
    <span class="hljs-keyword">return</span> Nodash.compare(a, b) &lt;= <span class="hljs-number">0</span>;
  });

  register(<span class="hljs-string">'&gt;='</span>, <span class="hljs-string">'gte'</span>, <span class="hljs-string">'GTE'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_gte</span>(<span class="hljs-params">a, b</span>) </span>{
    <span class="hljs-keyword">return</span> Nodash.compare(a, b) &gt;= <span class="hljs-number">0</span>;
  });

  register(<span class="hljs-string">'max'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_max</span>(<span class="hljs-params">a, b</span>) </span>{
    <span class="hljs-keyword">if</span> (Nodash.gt(a, b)) {
      <span class="hljs-keyword">return</span> a;
    }
    <span class="hljs-keyword">return</span> b;
  });

  register(<span class="hljs-string">'min'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_min</span>(<span class="hljs-params">a, b</span>) </span>{
    <span class="hljs-keyword">if</span> (Nodash.lt(a, b)) {
      <span class="hljs-keyword">return</span> a;
    }
    <span class="hljs-keyword">return</span> b;
  });

  register(<span class="hljs-string">'comparing'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_comparing</span>(<span class="hljs-params">f, a, b</span>) </span>{
    <span class="hljs-keyword">return</span> Nodash.compare(f(a), f(b));
  });</pre></div></div>
            
        </li>
        
        
        <li id="section-39">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-39">&#182;</a>
              </div>
              <p>Data.Char</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  
  register(<span class="hljs-string">'isDigit'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">x</span>) </span>{
    <span class="hljs-keyword">return</span> !!x.match(<span class="hljs-regexp">/[0-9]/</span>);
  });

  register(<span class="hljs-string">'isAsciiLetter'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">x</span>) </span>{
    <span class="hljs-keyword">return</span> !!x.match(<span class="hljs-regexp">/[a-zA-Z]/</span>);
  });</pre></div></div>
            
        </li>
        
        
        <li id="section-40">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-40">&#182;</a>
              </div>
              <p>Num</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
  register(<span class="hljs-string">'+'</span>, <span class="hljs-string">'add'</span>, <span class="hljs-string">'ADD'</span>, <span class="hljs-string">'plus'</span>, <span class="hljs-string">'PLUS'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_add</span>(<span class="hljs-params">a, b</span>) </span>{
    <span class="hljs-keyword">return</span> a + b;
  });

  register(<span class="hljs-string">'-'</span>, <span class="hljs-string">'sub'</span>, <span class="hljs-string">'SUB'</span>, <span class="hljs-string">'minus'</span>, <span class="hljs-string">'MINUS'</span>, <span class="hljs-string">'subtract'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_sub</span>(<span class="hljs-params">a, b</span>) </span>{
    <span class="hljs-keyword">return</span> a - b;
  });

  register(<span class="hljs-string">'*'</span>, <span class="hljs-string">'mul'</span>, <span class="hljs-string">'MUL'</span>, <span class="hljs-string">'times'</span>, <span class="hljs-string">'TIMES'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_mul</span>(<span class="hljs-params">a, b</span>) </span>{
    <span class="hljs-keyword">return</span> a * b;
  });

  register(<span class="hljs-string">'abs'</span>, <span class="hljs-built_in">Math</span>.abs);

  register(<span class="hljs-string">'negate'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_negate</span>(<span class="hljs-params">a</span>) </span>{ <span class="hljs-keyword">return</span> -a; });

  register(<span class="hljs-string">'signum'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_signum</span>(<span class="hljs-params">x</span>) </span>{
    <span class="hljs-keyword">if</span> (x &gt; <span class="hljs-number">0</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (x === <span class="hljs-number">0</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
    }
    <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span>;
  });</pre></div></div>
            
        </li>
        
        
        <li id="section-41">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-41">&#182;</a>
              </div>
              <p>Integral</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
  register(<span class="hljs-string">'div'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_div</span>(<span class="hljs-params">a, b</span>) </span>{ <span class="hljs-keyword">return</span> <span class="hljs-built_in">Math</span>.floor(a / b); });

  register(<span class="hljs-string">'quot'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_quot</span>(<span class="hljs-params">a, b</span>) </span>{
    <span class="hljs-keyword">var</span> r = a / b;
    <span class="hljs-keyword">return</span> r &gt;= <span class="hljs-number">0</span> ? <span class="hljs-built_in">Math</span>.floor(r) : <span class="hljs-built_in">Math</span>.ceil(r);
  });

  register(<span class="hljs-string">'rem'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_rem</span>(<span class="hljs-params">a, b</span>) </span>{ <span class="hljs-keyword">return</span> a % b; });

  register(<span class="hljs-string">'mod'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_mod</span>(<span class="hljs-params">a, b</span>) </span>{
    <span class="hljs-keyword">var</span> q = Nodash.quot(a, b);
    <span class="hljs-keyword">var</span> r = Nodash.rem(a, b);
    <span class="hljs-keyword">return</span> Nodash.signum(r) == -Nodash.signum(b) ? r + b : r;
  });

  register(<span class="hljs-string">'divMod'</span>,  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_divMod</span>(<span class="hljs-params">a, b</span>)  </span>{
    <span class="hljs-keyword">return</span> [Nodash.div(a, b), Nodash.mod(a, b)];
  });

  register(<span class="hljs-string">'quotRem'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_quotRem</span>(<span class="hljs-params">a, b</span>) </span>{
    <span class="hljs-keyword">return</span> [Nodash.quot(a, b), Nodash.rem(a, b)];
  });</pre></div></div>
            
        </li>
        
        
        <li id="section-42">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-42">&#182;</a>
              </div>
              <p>Fractional</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
  register(<span class="hljs-string">'/'</span>, <span class="hljs-string">'frac'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_frac</span>(<span class="hljs-params">a, b</span>) </span>{ <span class="hljs-keyword">return</span> a / b; });

  register(<span class="hljs-string">'recip'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_recip</span>(<span class="hljs-params">a</span>) </span>{ <span class="hljs-keyword">return</span> <span class="hljs-number">1</span> / a; });</pre></div></div>
            
        </li>
        
        
        <li id="section-43">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-43">&#182;</a>
              </div>
              <p>Floating</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
  register(<span class="hljs-string">'exp'</span>,  <span class="hljs-built_in">Math</span>.exp);

  register(<span class="hljs-string">'sqrt'</span>, <span class="hljs-built_in">Math</span>.sqrt);

  register(<span class="hljs-string">'log'</span>,  <span class="hljs-built_in">Math</span>.log);

  register(<span class="hljs-string">'logBase'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_logBase</span>(<span class="hljs-params">a, b</span>) </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">Math</span>.log(a) / <span class="hljs-built_in">Math</span>.log(b);
  });

  register(<span class="hljs-string">'**'</span>, <span class="hljs-string">'pow'</span>, <span class="hljs-string">'^'</span>, <span class="hljs-string">'^^'</span>, <span class="hljs-built_in">Math</span>.pow);

  register(<span class="hljs-string">'sin'</span>, <span class="hljs-built_in">Math</span>.sin);

  register(<span class="hljs-string">'tan'</span>, <span class="hljs-built_in">Math</span>.tan);

  register(<span class="hljs-string">'cos'</span>, <span class="hljs-built_in">Math</span>.cos);

  register(<span class="hljs-string">'asin'</span>, <span class="hljs-built_in">Math</span>.asin);

  register(<span class="hljs-string">'atan'</span>, <span class="hljs-built_in">Math</span>.atan);

  register(<span class="hljs-string">'acos'</span>, <span class="hljs-built_in">Math</span>.acos);

  register(<span class="hljs-string">'sinh'</span>, <span class="hljs-built_in">Math</span>.sinh || <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_sinh</span>(<span class="hljs-params">x</span>) </span>{
    <span class="hljs-keyword">return</span> (<span class="hljs-built_in">Math</span>.exp(x) - <span class="hljs-built_in">Math</span>.exp(-x)) / <span class="hljs-number">2</span>;
  });

  register(<span class="hljs-string">'tanh'</span>, <span class="hljs-built_in">Math</span>.tanh || <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">x</span>) </span>{
    <span class="hljs-keyword">if</span> (x === <span class="hljs-literal">Infinity</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (x === -<span class="hljs-literal">Infinity</span>) {
      <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span>;
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-keyword">return</span> (<span class="hljs-built_in">Math</span>.exp(x) - <span class="hljs-built_in">Math</span>.exp(-x)) / (<span class="hljs-built_in">Math</span>.exp(x) + <span class="hljs-built_in">Math</span>.exp(-x));
    }
  });

  register(<span class="hljs-string">'cosh'</span>, <span class="hljs-built_in">Math</span>.cosh || <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">x</span>) </span>{
    <span class="hljs-keyword">return</span> (<span class="hljs-built_in">Math</span>.exp(x) + <span class="hljs-built_in">Math</span>.exp(-x)) / <span class="hljs-number">2</span>;
  });

  register(<span class="hljs-string">'asinh'</span>, <span class="hljs-built_in">Math</span>.asinh || <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_asinh</span>(<span class="hljs-params">x</span>) </span>{
    <span class="hljs-keyword">if</span> (x === -<span class="hljs-literal">Infinity</span>) {
      <span class="hljs-keyword">return</span> x;
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-keyword">return</span> <span class="hljs-built_in">Math</span>.log(x + <span class="hljs-built_in">Math</span>.sqrt(x * x + <span class="hljs-number">1</span>));
    }
  });

  register(<span class="hljs-string">'atanh'</span>, <span class="hljs-built_in">Math</span>.atanh || <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_atanh</span>(<span class="hljs-params">x</span>) </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">Math</span>.log((<span class="hljs-number">1</span> + x) / (<span class="hljs-number">1</span> - x)) / <span class="hljs-number">2</span>;
  });

  register(<span class="hljs-string">'acosh'</span>, <span class="hljs-built_in">Math</span>.acosh || <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_acosh</span>(<span class="hljs-params">x</span>) </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">Math</span>.log(x + <span class="hljs-built_in">Math</span>.sqrt(x * x - <span class="hljs-number">1</span>));
  });</pre></div></div>
            
        </li>
        
        
        <li id="section-44">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-44">&#182;</a>
              </div>
              <p>RealFrac</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
  register(<span class="hljs-string">'properFraction'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_properFraction</span>(<span class="hljs-params">x</span>) </span>{
    <span class="hljs-keyword">var</span> num = Nodash.truncate(x);
    <span class="hljs-keyword">return</span> [ num, -(num - x) ];
  });

  register(<span class="hljs-string">'truncate'</span>, <span class="hljs-built_in">Math</span>.trunc || <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_truncate</span>(<span class="hljs-params">x</span>) </span>{
    <span class="hljs-keyword">switch</span> (Nodash.signum(x)) {
    <span class="hljs-keyword">case</span> -<span class="hljs-number">1</span>:
      <span class="hljs-keyword">return</span> <span class="hljs-built_in">Math</span>.ceil(x);
    <span class="hljs-keyword">case</span> <span class="hljs-number">1</span>:
      <span class="hljs-keyword">return</span> <span class="hljs-built_in">Math</span>.floor(x);
    }
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
  });

  register(<span class="hljs-string">'round'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_round</span>(<span class="hljs-params">x</span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-45">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-45">&#182;</a>
              </div>
              <p>Haskell’s round and JavaScripts Math.round are different</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">var</span> fraction = Nodash.properFraction(x);
    <span class="hljs-keyword">var</span> n = fraction[<span class="hljs-number">0</span>];
    <span class="hljs-keyword">var</span> m = fraction[<span class="hljs-number">1</span>] &lt; <span class="hljs-number">0</span> ? n - <span class="hljs-number">1</span> : n + <span class="hljs-number">1</span>;
    <span class="hljs-keyword">switch</span> (Nodash.signum(<span class="hljs-built_in">Math</span>.abs(fraction[<span class="hljs-number">1</span>]) - <span class="hljs-number">0.5</span>)) {
      <span class="hljs-keyword">case</span> -<span class="hljs-number">1</span>:
        <span class="hljs-keyword">return</span> n;
      <span class="hljs-keyword">case</span> <span class="hljs-number">0</span>:
        <span class="hljs-keyword">return</span> n % <span class="hljs-number">2</span> === <span class="hljs-number">0</span> ? n : m;
      <span class="hljs-keyword">case</span> <span class="hljs-number">1</span>:
        <span class="hljs-keyword">return</span> m;
    }
  });

  register(<span class="hljs-string">'ceiling'</span>, <span class="hljs-built_in">Math</span>.ceil);

  register(<span class="hljs-string">'floor'</span>, <span class="hljs-built_in">Math</span>.floor);</pre></div></div>
            
        </li>
        
        
        <li id="section-46">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-46">&#182;</a>
              </div>
              <p>RealFloat</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
  <span class="hljs-comment">/* ... */</span></pre></div></div>
            
        </li>
        
        
        <li id="section-47">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-47">&#182;</a>
              </div>
              <p>Numeric</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
  register(<span class="hljs-string">'gcd'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_gcd</span>(<span class="hljs-params">a, b</span>) </span>{
    <span class="hljs-keyword">var</span> c;
    <span class="hljs-keyword">while</span> (b !== <span class="hljs-number">0</span>) {
      c = Nodash.rem(a, b);
      a = b;
      b = c;
    }
    <span class="hljs-keyword">return</span> a;
  });

  register(<span class="hljs-string">'lcm'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_lcm</span>(<span class="hljs-params">a, b</span>) </span>{
    <span class="hljs-keyword">if</span> (a === <span class="hljs-number">0</span> || b === <span class="hljs-number">0</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
    }
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">Math</span>.abs(Nodash.quot(a, Nodash.gcd(a, b)) * b);
  });

  register(<span class="hljs-string">'even'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_even</span>(<span class="hljs-params">x</span>) </span>{ <span class="hljs-keyword">return</span> (x % <span class="hljs-number">2</span>) === <span class="hljs-number">0</span>; });

  register(<span class="hljs-string">'odd'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_odd</span>(<span class="hljs-params">x</span>) </span>{ <span class="hljs-keyword">return</span> (x % <span class="hljs-number">2</span>) !== <span class="hljs-number">0</span>; });</pre></div></div>
            
        </li>
        
        
        <li id="section-48">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-48">&#182;</a>
              </div>
              <p>Control</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
  register(<span class="hljs-string">'until'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_until</span>(<span class="hljs-params">p, f, v</span>) </span>{
    <span class="hljs-keyword">while</span> (!p(v)) {
      v = f(v);
    }
    <span class="hljs-keyword">return</span> v;
  });</pre></div></div>
            
        </li>
        
        
        <li id="section-49">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-49">&#182;</a>
              </div>
              <p>Stream</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
  register(<span class="hljs-string">'stream'</span>, <span class="hljs-string">'lazy'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_stream</span>(<span class="hljs-params">xs</span>) </span>{
    <span class="hljs-keyword">if</span> (isStream(xs)) {
      <span class="hljs-keyword">return</span> xs;
    }
    <span class="hljs-keyword">if</span> (isFunction(xs)) {
      <span class="hljs-keyword">return</span> mkInfinite(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> xs();
      });
    }
    <span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">return</span> mkStream(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
      <span class="hljs-keyword">if</span> (i &lt; xs.length) {
        <span class="hljs-keyword">return</span> xs[i++];
      }
      <span class="hljs-keyword">return</span> eos;
    });
  });

  register(<span class="hljs-string">'consume'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_consume</span>(<span class="hljs-params">xs</span>) </span>{
    <span class="hljs-keyword">if</span> (!isStream(xs)) {
      <span class="hljs-keyword">return</span> xs;
    }
    checkFinite(xs);
    <span class="hljs-keyword">var</span> z, zs = [];
    <span class="hljs-keyword">while</span> ((z = xs()) !== eos) {
      zs.push(z);
    }
    <span class="hljs-keyword">return</span> zs;
  });

  register(<span class="hljs-string">'consumeString'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_consumeString</span>(<span class="hljs-params">xs</span>) </span>{
    <span class="hljs-keyword">if</span> (!isStream(xs)) {
      <span class="hljs-keyword">return</span> <span class="hljs-string">""</span> + xs;
    }
    <span class="hljs-keyword">var</span> z, zs = <span class="hljs-string">""</span>;
    <span class="hljs-keyword">while</span> ((z = xs()) !== eos) {
      zs += z;
    }
    <span class="hljs-keyword">return</span> zs;
  });

  register(<span class="hljs-string">'each'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_each</span>(<span class="hljs-params">f, xs</span>) </span>{
    <span class="hljs-keyword">if</span> (isStream(xs)) {
      <span class="hljs-keyword">var</span> x;
      <span class="hljs-keyword">while</span> ((x = xs()) !== eos) {
        f(x);
      }
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (isArray(xs) || isString(xs)) {
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; xs.length; i++) {
        f(xs[i]);
      }
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-keyword">var</span> ks = keys(xs);
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> j = <span class="hljs-number">0</span>; j &lt; ks.length; j += <span class="hljs-number">1</span>) {
        f(xs[ks[j]], ks[j]);
      }
    }
  });

  register(<span class="hljs-string">'cycle'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_cycle</span>(<span class="hljs-params">xs</span>) </span>{
    <span class="hljs-keyword">if</span> (isStream(xs)) {
      <span class="hljs-keyword">if</span> (isInfinite(xs)) {
        <span class="hljs-keyword">return</span> xs;
      }
      <span class="hljs-keyword">var</span> arr = [];
      <span class="hljs-keyword">var</span> consumed = <span class="hljs-literal">false</span>;
      <span class="hljs-keyword">var</span> h = <span class="hljs-number">0</span>;
      <span class="hljs-keyword">return</span> mkInfinite(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">var</span> z;
        <span class="hljs-keyword">if</span> (!consumed) {
          <span class="hljs-keyword">if</span> ((z = xs()) !== eos) {
            arr.push(z);
            <span class="hljs-keyword">return</span> z;
          }
          consumed = <span class="hljs-literal">true</span>;
        }
        <span class="hljs-keyword">if</span> (h &gt;= arr.length) {
          h = <span class="hljs-number">0</span>;
        }
        <span class="hljs-keyword">return</span> arr[h++];
      });
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (isArray(xs) || isString(xs)) {
      <span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>;
      <span class="hljs-keyword">return</span> mkInfinite(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">if</span> (i &gt;= xs.length) {
          i = <span class="hljs-number">0</span>;
        }
        <span class="hljs-keyword">return</span> xs[i++];
      });
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-keyword">var</span> ks = keys(xs);
      <span class="hljs-keyword">var</span> j = <span class="hljs-number">0</span>;
      <span class="hljs-keyword">return</span> mkInfinite(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">if</span> (j &gt;= ks.length) {
          j = <span class="hljs-number">0</span>;
        }
        <span class="hljs-keyword">return</span> xs[ks[j++]];
      });
    }
  });

  register(<span class="hljs-string">'repeat'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_repeat</span>(<span class="hljs-params">x</span>) </span>{
    <span class="hljs-keyword">return</span> mkInfinite(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
      <span class="hljs-keyword">return</span> x;
    });
  });

  register(<span class="hljs-string">'iterate'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_iterate</span>(<span class="hljs-params">f, x</span>) </span>{
    <span class="hljs-keyword">return</span> mkInfinite(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
      <span class="hljs-keyword">var</span> r = x;
      x = f(x);
      <span class="hljs-keyword">return</span> r;
    });
  });</pre></div></div>
            
        </li>
        
        
        <li id="section-50">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-50">&#182;</a>
              </div>
              <p>List</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
  register(<span class="hljs-string">':'</span>, <span class="hljs-string">'cons'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_cons</span>(<span class="hljs-params">x, xs</span>) </span>{
    <span class="hljs-keyword">if</span> (isStream(xs)) {
      <span class="hljs-keyword">var</span> consumedFirst = <span class="hljs-literal">false</span>;
      <span class="hljs-keyword">return</span> (isInfinite(xs) ? mkInfinite : mkStream)(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">if</span> (!consumedFirst) {
          consumedFirst = <span class="hljs-literal">true</span>;
          <span class="hljs-keyword">return</span> x;
        }
        <span class="hljs-keyword">return</span> xs();
      });
    }
    <span class="hljs-keyword">var</span> zs = [x];
    [].push.apply(zs, xs);
    <span class="hljs-keyword">return</span> zs;
  });

  register(<span class="hljs-string">'++'</span>, <span class="hljs-string">'append'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_append</span>(<span class="hljs-params">xs, ys</span>) </span>{
    <span class="hljs-keyword">if</span> (isStream(xs) || isStream(ys)) {
      xs = Nodash.stream(xs);
      <span class="hljs-keyword">if</span> (isInfinite(xs)) {
        <span class="hljs-keyword">return</span> xs;
      }
      ys = Nodash.stream(ys);
      <span class="hljs-keyword">var</span> atSecondStream = <span class="hljs-literal">false</span>;
      <span class="hljs-keyword">return</span> mkStream(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">if</span> (atSecondStream) {
          <span class="hljs-keyword">return</span> ys();
        }
        <span class="hljs-keyword">var</span> r = xs();
        <span class="hljs-keyword">if</span> (r == eos) {
          atSecondStream = <span class="hljs-literal">true</span>;
          <span class="hljs-keyword">return</span> ys();
        }
        <span class="hljs-keyword">return</span> r;
      });
    }
    <span class="hljs-keyword">if</span> (isString(xs)) {
      <span class="hljs-keyword">return</span> xs + ys;
    }
    <span class="hljs-keyword">var</span> zs = [];
    [].push.apply(zs, xs);
    [].push.apply(zs, ys);
    <span class="hljs-keyword">return</span> zs;
  });

  register(<span class="hljs-string">'map'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_map</span>(<span class="hljs-params">f, xs</span>) </span>{
    <span class="hljs-keyword">if</span> (isStream(xs)) {
      <span class="hljs-keyword">return</span> (isInfinite(xs) ? mkInfinite : mkStream)(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">var</span> x = xs();
        <span class="hljs-keyword">if</span> (x === eos) {
          <span class="hljs-keyword">return</span> eos;
        }
        <span class="hljs-keyword">return</span> f(x);
      });
    }
    <span class="hljs-keyword">var</span> ys;
    <span class="hljs-keyword">if</span> (isArray(xs) || isString(xs)) {
      ys = [];
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; xs.length; i++) {
        ys.push(f(xs[i]));
      }
      <span class="hljs-keyword">return</span> isString(xs) ? listToString(ys) : ys;
    }
    ys = {};
    <span class="hljs-keyword">var</span> ks = keys(xs);
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> j = <span class="hljs-number">0</span>; j &lt; ks.length; j++) {
      ys[ks[j]] = f(xs[ks[j]], ks[j]);
    }
    <span class="hljs-keyword">return</span> ys;
  });

  register(<span class="hljs-string">'filter'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_filter</span>(<span class="hljs-params">p, xs</span>) </span>{
    <span class="hljs-keyword">if</span> (isStream(xs)) {
      <span class="hljs-keyword">return</span> (isInfinite(xs) ? mkInfinite : mkStream)(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">var</span> x;
        <span class="hljs-keyword">while</span> ((x = xs()) !== eos) {
          <span class="hljs-keyword">if</span> (p(x)) {
            <span class="hljs-keyword">return</span> x;
          }
        }
        <span class="hljs-keyword">return</span> eos;
      });
    }
    <span class="hljs-keyword">var</span> ys;
    <span class="hljs-keyword">if</span> (isArray(xs) || isString(xs)) {
      ys = [];
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; xs.length; i++) {
        <span class="hljs-keyword">if</span> (p(xs[i])) {
          ys.push(xs[i]);
        }
      }
      <span class="hljs-keyword">return</span> isString(xs) ? listToString(ys) : ys;
    }
    ys = {};
    <span class="hljs-keyword">var</span> ks = keys(xs);
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> j = <span class="hljs-number">0</span>; j &lt; ks.length; j++) {
      <span class="hljs-keyword">if</span> (p(xs[ks[j]])) {
        ys[ks[j]] = xs[ks[j]];
      }
    }
    <span class="hljs-keyword">return</span> ys;
  });

  register(<span class="hljs-string">'head'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_head</span>(<span class="hljs-params">xs</span>) </span>{
    <span class="hljs-keyword">if</span> (isStream(xs)) {
      <span class="hljs-keyword">var</span> x = xs();
      <span class="hljs-keyword">return</span> x === eos ? <span class="hljs-literal">undefined</span> : x;
    }
    <span class="hljs-keyword">return</span> xs[<span class="hljs-number">0</span>];
  });

  register(<span class="hljs-string">'last'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_last</span>(<span class="hljs-params">xs</span>) </span>{
    <span class="hljs-keyword">if</span> (isStream(xs)) {
      checkFinite(xs);
      <span class="hljs-keyword">var</span> x, z;
      <span class="hljs-keyword">while</span> ((x = xs()) !== eos) {
        z = x;
      }
      <span class="hljs-keyword">return</span> z;
    }
    <span class="hljs-keyword">return</span> xs[xs.length - <span class="hljs-number">1</span>];
  });

  register(<span class="hljs-string">'tail'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_tail</span>(<span class="hljs-params">xs</span>) </span>{
    <span class="hljs-keyword">if</span> (isStream(xs)) {
      xs();
      <span class="hljs-keyword">return</span> xs;
    }
    <span class="hljs-keyword">return</span> xs.slice(<span class="hljs-number">1</span>);
  });

  register(<span class="hljs-string">'init'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_init</span>(<span class="hljs-params">xs</span>) </span>{
    <span class="hljs-keyword">if</span> (isStream(xs)) {
      checkFinite(xs);
      <span class="hljs-keyword">var</span> a = xs(), b;
      <span class="hljs-keyword">return</span> mkStream(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
        b = xs();
        <span class="hljs-keyword">if</span> (b === eos) {
          <span class="hljs-keyword">return</span> eos;
        }
        <span class="hljs-keyword">var</span> r = a;
        a = b;
        <span class="hljs-keyword">return</span> r;
      });
    }
    <span class="hljs-keyword">return</span> xs.slice(<span class="hljs-number">0</span>, xs.length - <span class="hljs-number">1</span>);
  });

  register(<span class="hljs-string">'isNull'</span>, <span class="hljs-string">'null_'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_null</span>(<span class="hljs-params">xs</span>) </span>{
    <span class="hljs-keyword">if</span> (isStream(xs)) {
      <span class="hljs-keyword">return</span> xs() === eos;
    }
    <span class="hljs-keyword">return</span> xs.length === <span class="hljs-number">0</span>;
  });

  register(<span class="hljs-string">'length'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_length</span>(<span class="hljs-params">xs</span>) </span>{
    <span class="hljs-keyword">if</span> (isStream(xs)) {
      <span class="hljs-keyword">if</span> (isInfinite(xs)) {
        <span class="hljs-keyword">return</span> <span class="hljs-literal">Infinity</span>;
      }
      <span class="hljs-keyword">var</span> n = <span class="hljs-number">0</span>;
      <span class="hljs-keyword">while</span> (xs() !== eos) {
        n += <span class="hljs-number">1</span>;
      }
      <span class="hljs-keyword">return</span> n;
    }
    <span class="hljs-keyword">return</span> xs.length;
  });

  register(<span class="hljs-string">'!!'</span>, <span class="hljs-string">'at'</span>, <span class="hljs-string">'AT'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_at</span>(<span class="hljs-params">xs, ix</span>) </span>{
    <span class="hljs-keyword">if</span> (isStream(xs)) {
      <span class="hljs-keyword">var</span> x;
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; ix; i++) {
        <span class="hljs-keyword">if</span> (xs() === eos) {
          <span class="hljs-keyword">return</span> x;
        }
      }
      x = xs();
      <span class="hljs-keyword">return</span> x === eos ? <span class="hljs-literal">undefined</span> : x;
    }
    <span class="hljs-keyword">return</span> xs[ix];
  });

  register(<span class="hljs-string">'reverse'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_reverse</span>(<span class="hljs-params">xs</span>) </span>{
    <span class="hljs-keyword">if</span> (isStream(xs)) {
      checkFinite(xs);
      xs = Nodash.consume(xs);
      <span class="hljs-keyword">var</span> i = xs.length - <span class="hljs-number">1</span>;
      <span class="hljs-keyword">return</span> mkStream(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">if</span> (i &lt; <span class="hljs-number">0</span>) {
          <span class="hljs-keyword">return</span> eos;
        }
        <span class="hljs-keyword">return</span> xs[i--];
      });
    }
    <span class="hljs-keyword">var</span> zs = isString(xs) ? <span class="hljs-string">""</span>.split.call(xs, <span class="hljs-string">''</span>) : [].slice.call(xs);
    zs.reverse();
    <span class="hljs-keyword">return</span> isString(xs) ? zs.join(<span class="hljs-string">''</span>) : zs;
  });

  register(<span class="hljs-string">'take'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_take</span>(<span class="hljs-params">n, xs</span>) </span>{
    <span class="hljs-keyword">if</span> (isStream(xs)) {
      <span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>;
      <span class="hljs-keyword">return</span> mkStream(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">if</span> (i++ <span class="xml"><span class="hljs-tag">&lt; <span class="hljs-attribute">n</span>) {
          <span class="hljs-attribute">return</span> <span class="hljs-attribute">xs</span>();
        }
        <span class="hljs-attribute">return</span> <span class="hljs-attribute">eos</span>;
      });
    }
    <span class="hljs-attribute">return</span> <span class="hljs-attribute">xs.slice</span>(<span class="hljs-attribute">0</span>, <span class="hljs-attribute">n</span>);
  });

  <span class="hljs-attribute">register</span>('<span class="hljs-attribute">drop</span>', <span class="hljs-attribute">function</span> <span class="hljs-attribute">_drop</span>(<span class="hljs-attribute">n</span>, <span class="hljs-attribute">xs</span>) {
    <span class="hljs-attribute">if</span> (<span class="hljs-attribute">isStream</span>(<span class="hljs-attribute">xs</span>)) {
      <span class="hljs-attribute">for</span> (<span class="hljs-attribute">var</span> <span class="hljs-attribute">i</span> = <span class="hljs-attribute">0</span>; <span class="hljs-attribute">i</span> &lt; <span class="hljs-attribute">n</span>; <span class="hljs-attribute">i</span>++) {
        <span class="hljs-attribute">xs</span>();
      }
      <span class="hljs-attribute">return</span> <span class="hljs-attribute">xs</span>;
    }
    <span class="hljs-attribute">return</span> <span class="hljs-attribute">xs.slice</span>(<span class="hljs-attribute">n</span>);
  });

  <span class="hljs-attribute">register</span>('<span class="hljs-attribute">splitAt</span>', <span class="hljs-attribute">function</span> <span class="hljs-attribute">_splitAt</span>(<span class="hljs-attribute">n</span>, <span class="hljs-attribute">xs</span>) {
    <span class="hljs-attribute">return</span> [ <span class="hljs-attribute">xs.slice</span>(<span class="hljs-attribute">0</span>, <span class="hljs-attribute">n</span>), <span class="hljs-attribute">xs.slice</span>(<span class="hljs-attribute">n</span>) ];
  });

  <span class="hljs-attribute">register</span>('<span class="hljs-attribute">takeWhile</span>', <span class="hljs-attribute">function</span> <span class="hljs-attribute">_takeWhile</span>(<span class="hljs-attribute">p</span>, <span class="hljs-attribute">xs</span>) {
    <span class="hljs-attribute">if</span> (<span class="hljs-attribute">isStream</span>(<span class="hljs-attribute">xs</span>)) {
      <span class="hljs-attribute">var</span> <span class="hljs-attribute">exhausted</span> = <span class="hljs-attribute">false</span>;
      <span class="hljs-attribute">return</span> <span class="hljs-attribute">mkStream</span>(<span class="hljs-attribute">function</span> () {
        <span class="hljs-attribute">var</span> <span class="hljs-attribute">x</span> = <span class="hljs-attribute">xs</span>();
        <span class="hljs-attribute">if</span> (<span class="hljs-attribute">exhausted</span> || <span class="hljs-attribute">x</span> =<span class="hljs-value">=</span> <span class="hljs-attribute">eos</span> || !<span class="hljs-attribute">p</span>(<span class="hljs-attribute">x</span>)) {
          <span class="hljs-attribute">exhausted</span> = <span class="hljs-attribute">true</span>;
          <span class="hljs-attribute">return</span> <span class="hljs-attribute">eos</span>;
        }
        <span class="hljs-attribute">return</span> <span class="hljs-attribute">x</span>;
      });
    }
    <span class="hljs-attribute">var</span> <span class="hljs-attribute">i</span> = <span class="hljs-attribute">0</span>;
    <span class="hljs-attribute">while</span> (<span class="hljs-attribute">i</span> &lt; <span class="hljs-attribute">xs.length</span> &amp;&amp; <span class="hljs-attribute">p</span>(<span class="hljs-attribute">xs</span>[<span class="hljs-attribute">i</span>])) {
      <span class="hljs-attribute">i</span>++;
    }
    <span class="hljs-attribute">return</span> <span class="hljs-attribute">xs.slice</span>(<span class="hljs-attribute">0</span>, <span class="hljs-attribute">i</span>);
  });

  <span class="hljs-attribute">register</span>('<span class="hljs-attribute">dropWhile</span>', <span class="hljs-attribute">function</span> <span class="hljs-attribute">_dropWhile</span>(<span class="hljs-attribute">p</span>, <span class="hljs-attribute">xs</span>) {
    <span class="hljs-attribute">if</span> (<span class="hljs-attribute">isStream</span>(<span class="hljs-attribute">xs</span>)) {
      <span class="hljs-attribute">var</span> <span class="hljs-attribute">x</span>;
      <span class="hljs-attribute">while</span> ((<span class="hljs-attribute">x</span> = <span class="hljs-attribute">xs</span>()) !=<span class="hljs-value">=</span> <span class="hljs-attribute">eos</span> &amp;&amp; <span class="hljs-attribute">p</span>(<span class="hljs-attribute">x</span>)) {
      }
      <span class="hljs-attribute">return</span> <span class="hljs-attribute">Nodash.cons</span>(<span class="hljs-attribute">x</span>, <span class="hljs-attribute">xs</span>);
    }
    <span class="hljs-attribute">var</span> <span class="hljs-attribute">i</span> = <span class="hljs-attribute">0</span>;
    <span class="hljs-attribute">while</span> (<span class="hljs-attribute">i</span> &lt; <span class="hljs-attribute">xs.length</span> &amp;&amp; <span class="hljs-attribute">p</span>(<span class="hljs-attribute">xs</span>[<span class="hljs-attribute">i</span>])) {
      <span class="hljs-attribute">i</span>++;
    }
    <span class="hljs-attribute">return</span> <span class="hljs-attribute">xs.slice</span>(<span class="hljs-attribute">i</span>);
  });

  <span class="hljs-attribute">register</span>('<span class="hljs-attribute">span</span>', <span class="hljs-attribute">function</span> <span class="hljs-attribute">_span</span>(<span class="hljs-attribute">p</span>, <span class="hljs-attribute">xs</span>) {
    <span class="hljs-attribute">var</span> <span class="hljs-attribute">i</span> = <span class="hljs-attribute">0</span>;
    <span class="hljs-attribute">while</span> (<span class="hljs-attribute">i</span> &lt; <span class="hljs-attribute">xs.length</span> &amp;&amp; <span class="hljs-attribute">p</span>(<span class="hljs-attribute">xs</span>[<span class="hljs-attribute">i</span>])) {
        <span class="hljs-attribute">i</span>++;
    }
    <span class="hljs-attribute">return</span> [ <span class="hljs-attribute">xs.slice</span>(<span class="hljs-attribute">0</span>, <span class="hljs-attribute">i</span>), <span class="hljs-attribute">xs.slice</span>(<span class="hljs-attribute">i</span>) ];
  });

  <span class="hljs-attribute">register</span>('<span class="hljs-attribute">break</span>', <span class="hljs-attribute">function</span> <span class="hljs-attribute">_break</span>(<span class="hljs-attribute">p</span>, <span class="hljs-attribute">xs</span>) {
    <span class="hljs-attribute">var</span> <span class="hljs-attribute">i</span> = <span class="hljs-attribute">0</span>;
    <span class="hljs-attribute">while</span> (<span class="hljs-attribute">i</span> &lt; <span class="hljs-attribute">xs.length</span> &amp;&amp; !<span class="hljs-attribute">p</span>(<span class="hljs-attribute">xs</span>[<span class="hljs-attribute">i</span>])) {
      <span class="hljs-attribute">i</span>++;
    }
    <span class="hljs-attribute">return</span> [ <span class="hljs-attribute">xs.slice</span>(<span class="hljs-attribute">0</span>, <span class="hljs-attribute">i</span>), <span class="hljs-attribute">xs.slice</span>(<span class="hljs-attribute">i</span>) ];
  });

  <span class="hljs-attribute">register</span>('<span class="hljs-attribute">elem</span>', <span class="hljs-attribute">function</span> <span class="hljs-attribute">_elem</span>(<span class="hljs-attribute">x</span>, <span class="hljs-attribute">xs</span>) {
    <span class="hljs-attribute">if</span> (<span class="hljs-attribute">isStream</span>(<span class="hljs-attribute">xs</span>)) {
      <span class="hljs-attribute">var</span> <span class="hljs-attribute">z</span>;
      <span class="hljs-attribute">while</span> ((<span class="hljs-attribute">z</span> = <span class="hljs-attribute">xs</span>()) !=<span class="hljs-value">=</span> <span class="hljs-attribute">eos</span>) {
        <span class="hljs-attribute">if</span> (<span class="hljs-attribute">Nodash.eq</span>(<span class="hljs-attribute">z</span>, <span class="hljs-attribute">x</span>)) {
          <span class="hljs-attribute">return</span> <span class="hljs-attribute">true</span>;
        }
      }
      <span class="hljs-attribute">return</span> <span class="hljs-attribute">false</span>;
    }
    <span class="hljs-attribute">for</span> (<span class="hljs-attribute">var</span> <span class="hljs-attribute">i</span> = <span class="hljs-attribute">0</span>; <span class="hljs-attribute">i</span> &lt; <span class="hljs-attribute">xs.length</span>; <span class="hljs-attribute">i</span>++) {
      <span class="hljs-attribute">if</span> (<span class="hljs-attribute">Nodash.eq</span>(<span class="hljs-attribute">xs</span>[<span class="hljs-attribute">i</span>], <span class="hljs-attribute">x</span>)) {
        <span class="hljs-attribute">return</span> <span class="hljs-attribute">true</span>;
      }
    }
    <span class="hljs-attribute">return</span> <span class="hljs-attribute">false</span>;
  });

  <span class="hljs-attribute">register</span>('<span class="hljs-attribute">notElem</span>', <span class="hljs-attribute">function</span> <span class="hljs-attribute">_notElem</span>(<span class="hljs-attribute">x</span>, <span class="hljs-attribute">xs</span>) {
    <span class="hljs-attribute">if</span> (<span class="hljs-attribute">isStream</span>(<span class="hljs-attribute">xs</span>)) {
      <span class="hljs-attribute">var</span> <span class="hljs-attribute">z</span>;
      <span class="hljs-attribute">while</span> ((<span class="hljs-attribute">z</span> = <span class="hljs-attribute">xs</span>()) !=<span class="hljs-value">=</span> <span class="hljs-attribute">eos</span>) {
        <span class="hljs-attribute">if</span> (<span class="hljs-attribute">Nodash.eq</span>(<span class="hljs-attribute">z</span>, <span class="hljs-attribute">x</span>)) {
          <span class="hljs-attribute">return</span> <span class="hljs-attribute">false</span>;
        }
      }
      <span class="hljs-attribute">return</span> <span class="hljs-attribute">true</span>;
    }
    <span class="hljs-attribute">for</span> (<span class="hljs-attribute">var</span> <span class="hljs-attribute">i</span> = <span class="hljs-attribute">0</span>; <span class="hljs-attribute">i</span> &lt; <span class="hljs-attribute">xs.length</span>; <span class="hljs-attribute">i</span>++) {
      <span class="hljs-attribute">if</span> (<span class="hljs-attribute">Nodash.eq</span>(<span class="hljs-attribute">xs</span>[<span class="hljs-attribute">i</span>], <span class="hljs-attribute">x</span>)) {
        <span class="hljs-attribute">return</span> <span class="hljs-attribute">false</span>;
      }
    }
    <span class="hljs-attribute">return</span> <span class="hljs-attribute">true</span>;
  });

  <span class="hljs-attribute">register</span>('<span class="hljs-attribute">lookup</span>', <span class="hljs-attribute">function</span> <span class="hljs-attribute">_lookup</span>(<span class="hljs-attribute">x</span>, <span class="hljs-attribute">xs</span>) {
    <span class="hljs-attribute">if</span> (<span class="hljs-attribute">isArray</span>(<span class="hljs-attribute">xs</span>)) {
      <span class="hljs-attribute">for</span> (<span class="hljs-attribute">var</span> <span class="hljs-attribute">i</span> = <span class="hljs-attribute">0</span>; <span class="hljs-attribute">i</span> &lt; <span class="hljs-attribute">xs.length</span>; <span class="hljs-attribute">i</span>++) {
        <span class="hljs-attribute">if</span> (<span class="hljs-attribute">xs</span>[<span class="hljs-attribute">i</span>] &amp;&amp; <span class="hljs-attribute">Nodash.eq</span>(<span class="hljs-attribute">xs</span>[<span class="hljs-attribute">i</span>][<span class="hljs-attribute">0</span>], <span class="hljs-attribute">x</span>)) {
          <span class="hljs-attribute">return</span> <span class="hljs-attribute">xs</span>[<span class="hljs-attribute">i</span>][<span class="hljs-attribute">1</span>];
        }
      }
    }
    <span class="hljs-attribute">return</span> <span class="hljs-attribute">xs</span>[<span class="hljs-attribute">x</span>];
  });

  <span class="hljs-attribute">register</span>('<span class="hljs-attribute">foldl</span>', '<span class="hljs-attribute">foldl</span>\'', <span class="hljs-attribute">function</span> <span class="hljs-attribute">_foldl</span>(<span class="hljs-attribute">f</span>, <span class="hljs-attribute">x</span>, <span class="hljs-attribute">xs</span>) {
    <span class="hljs-attribute">var</span> <span class="hljs-attribute">streaming</span> = <span class="hljs-attribute">isStream</span>(<span class="hljs-attribute">xs</span>);
    <span class="hljs-attribute">if</span> (<span class="hljs-attribute">streaming</span>) {
      <span class="hljs-attribute">xs</span> = <span class="hljs-attribute">Nodash.consume</span>(<span class="hljs-attribute">xs</span>);
    }
    <span class="hljs-attribute">for</span> (<span class="hljs-attribute">var</span> <span class="hljs-attribute">i</span> = <span class="hljs-attribute">0</span>; <span class="hljs-attribute">i</span> &lt; <span class="hljs-attribute">xs.length</span>; <span class="hljs-attribute">i</span>++) {
      <span class="hljs-attribute">x</span> = <span class="hljs-attribute">f</span>(<span class="hljs-attribute">x</span>, <span class="hljs-attribute">xs</span>[<span class="hljs-attribute">i</span>]);
    }
    <span class="hljs-attribute">if</span> (<span class="hljs-attribute">isArray</span>(<span class="hljs-attribute">x</span>) &amp;&amp; <span class="hljs-attribute">streaming</span>) {
      <span class="hljs-attribute">return</span> <span class="hljs-attribute">Nodash.stream</span>(<span class="hljs-attribute">x</span>);
    }
    <span class="hljs-attribute">return</span> <span class="hljs-attribute">x</span>;
  });

  <span class="hljs-attribute">register</span>('<span class="hljs-attribute">foldl1</span>', '<span class="hljs-attribute">foldl1</span>\'', <span class="hljs-attribute">function</span> <span class="hljs-attribute">_foldl1</span>(<span class="hljs-attribute">f</span>, <span class="hljs-attribute">xs</span>) {
    <span class="hljs-attribute">var</span> <span class="hljs-attribute">streaming</span> = <span class="hljs-attribute">isStream</span>(<span class="hljs-attribute">xs</span>);
    <span class="hljs-attribute">if</span> (<span class="hljs-attribute">streaming</span>) {
      <span class="hljs-attribute">xs</span> = <span class="hljs-attribute">Nodash.consume</span>(<span class="hljs-attribute">xs</span>);
    }
    <span class="hljs-attribute">var</span> <span class="hljs-attribute">x</span> = <span class="hljs-attribute">xs</span>[<span class="hljs-attribute">0</span>];
    <span class="hljs-attribute">for</span> (<span class="hljs-attribute">var</span> <span class="hljs-attribute">i</span> = <span class="hljs-attribute">1</span>; <span class="hljs-attribute">i</span> &lt; <span class="hljs-attribute">xs.length</span>; <span class="hljs-attribute">i</span>++) {
      <span class="hljs-attribute">x</span> = <span class="hljs-attribute">f</span>(<span class="hljs-attribute">x</span>, <span class="hljs-attribute">xs</span>[<span class="hljs-attribute">i</span>]);
    }
    <span class="hljs-attribute">if</span> (<span class="hljs-attribute">isArray</span>(<span class="hljs-attribute">x</span>) &amp;&amp; <span class="hljs-attribute">streaming</span>) {
      <span class="hljs-attribute">return</span> <span class="hljs-attribute">Nodash.stream</span>(<span class="hljs-attribute">x</span>);
    }
    <span class="hljs-attribute">return</span> <span class="hljs-attribute">x</span>;
  });

  <span class="hljs-attribute">register</span>('<span class="hljs-attribute">foldr</span>', <span class="hljs-attribute">function</span> <span class="hljs-attribute">_foldr</span>(<span class="hljs-attribute">f</span>, <span class="hljs-attribute">x</span>, <span class="hljs-attribute">xs</span>) {
    <span class="hljs-attribute">for</span> (<span class="hljs-attribute">var</span> <span class="hljs-attribute">i</span> = <span class="hljs-attribute">xs.length</span> <span class="hljs-attribute">-</span> <span class="hljs-attribute">1</span>; <span class="hljs-attribute">i</span> &gt;</span>= 0; i--) {
      x = f(xs[i], x);
    }
    return x;
  });

  register('foldr1', function _foldr1(f, xs) {
    var x = xs[xs.length - 1];
    for (var i = xs.length - 2; i &gt;= 0; i--) {
      x = f(xs[i], x);
    }
    return x;
  });

  register('and', Nodash.foldl(Nodash['&amp;&amp;'], true));

  register('or', Nodash.foldl(Nodash['||'], false));

  register('sum', Nodash.foldl(Nodash['+'], 0));

  register('product', Nodash.foldl(Nodash['*'], 1));

  register('maximum', Nodash.foldl(Nodash.max, -Infinity));

  register('minimum', Nodash.foldl(Nodash.min, +Infinity));

  register('any', function _any(p, xs) {
    for (var i = 0; i <span class="hljs-tag">&lt; <span class="hljs-attribute">xs.length</span>; <span class="hljs-attribute">i</span>++) {
      <span class="hljs-attribute">if</span> (<span class="hljs-attribute">p</span>(<span class="hljs-attribute">xs</span>[<span class="hljs-attribute">i</span>])) {
        <span class="hljs-attribute">return</span> <span class="hljs-attribute">true</span>;
      }
    }
    <span class="hljs-attribute">return</span> <span class="hljs-attribute">false</span>;
  });

  <span class="hljs-attribute">register</span>('<span class="hljs-attribute">all</span>', <span class="hljs-attribute">function</span> <span class="hljs-attribute">_all</span>(<span class="hljs-attribute">p</span>, <span class="hljs-attribute">xs</span>) {
    <span class="hljs-attribute">for</span> (<span class="hljs-attribute">var</span> <span class="hljs-attribute">i</span> = <span class="hljs-attribute">0</span>; <span class="hljs-attribute">i</span> &lt; <span class="hljs-attribute">xs.length</span>; <span class="hljs-attribute">i</span>++) {
      <span class="hljs-attribute">if</span> (!<span class="hljs-attribute">p</span>(<span class="hljs-attribute">xs</span>[<span class="hljs-attribute">i</span>])) {
        <span class="hljs-attribute">return</span> <span class="hljs-attribute">false</span>;
      }
    }
    <span class="hljs-attribute">return</span> <span class="hljs-attribute">true</span>;
  });

  <span class="hljs-attribute">register</span>('<span class="hljs-attribute">scanl</span>', <span class="hljs-attribute">function</span> <span class="hljs-attribute">_scanl</span>(<span class="hljs-attribute">f</span>, <span class="hljs-attribute">x</span>, <span class="hljs-attribute">xs</span>) {
    <span class="hljs-attribute">if</span> (<span class="hljs-attribute">isStream</span>(<span class="hljs-attribute">xs</span>)) {
      <span class="hljs-attribute">return</span> <span class="hljs-attribute">Nodash.cons</span>(<span class="hljs-attribute">x</span>, (<span class="hljs-attribute">isInfinite</span>(<span class="hljs-attribute">xs</span>) ? <span class="hljs-attribute">mkInfinite</span> <span class="hljs-attribute">:</span> <span class="hljs-attribute">mkStream</span>)(<span class="hljs-attribute">function</span> () {
        <span class="hljs-attribute">var</span> <span class="hljs-attribute">r</span> = <span class="hljs-attribute">xs</span>();
        <span class="hljs-attribute">if</span> (<span class="hljs-attribute">r</span> =<span class="hljs-value">==</span> <span class="hljs-attribute">eos</span>) {
          <span class="hljs-attribute">return</span> <span class="hljs-attribute">eos</span>;
        }
        <span class="hljs-attribute">x</span> = <span class="hljs-attribute">f</span>(<span class="hljs-attribute">x</span>, <span class="hljs-attribute">r</span>);
        <span class="hljs-attribute">return</span> <span class="hljs-attribute">x</span>;
      }));
    }
    <span class="hljs-attribute">var</span> <span class="hljs-attribute">zs</span> = [<span class="hljs-attribute">x</span>];
    <span class="hljs-attribute">for</span> (<span class="hljs-attribute">var</span> <span class="hljs-attribute">i</span> = <span class="hljs-attribute">0</span>; <span class="hljs-attribute">i</span> &lt; <span class="hljs-attribute">xs.length</span>; <span class="hljs-attribute">i</span>++) {
      <span class="hljs-attribute">x</span> = <span class="hljs-attribute">f</span>(<span class="hljs-attribute">x</span>, <span class="hljs-attribute">xs</span>[<span class="hljs-attribute">i</span>]);
      <span class="hljs-attribute">zs.push</span>(<span class="hljs-attribute">x</span>);
    }
    <span class="hljs-attribute">return</span> <span class="hljs-attribute">zs</span>;
  });

  <span class="hljs-attribute">register</span>('<span class="hljs-attribute">scanl1</span>', <span class="hljs-attribute">function</span> <span class="hljs-attribute">_scanl1</span>(<span class="hljs-attribute">f</span>, <span class="hljs-attribute">xs</span>) {
    <span class="hljs-attribute">if</span> (<span class="hljs-attribute">isStream</span>(<span class="hljs-attribute">xs</span>)) {
      <span class="hljs-attribute">return</span> <span class="hljs-attribute">Nodash.scanl</span>(<span class="hljs-attribute">f</span>, <span class="hljs-attribute">xs</span>(), <span class="hljs-attribute">xs</span>);
    }
    <span class="hljs-attribute">var</span> <span class="hljs-attribute">x</span> = <span class="hljs-attribute">xs</span>[<span class="hljs-attribute">0</span>];
    <span class="hljs-attribute">var</span> <span class="hljs-attribute">zs</span> = [<span class="hljs-attribute">x</span>];
    <span class="hljs-attribute">for</span> (<span class="hljs-attribute">var</span> <span class="hljs-attribute">i</span> = <span class="hljs-attribute">1</span>; <span class="hljs-attribute">i</span> &lt; <span class="hljs-attribute">xs.length</span>; <span class="hljs-attribute">i</span>++) {
      <span class="hljs-attribute">x</span> = <span class="hljs-attribute">f</span>(<span class="hljs-attribute">x</span>, <span class="hljs-attribute">xs</span>[<span class="hljs-attribute">i</span>]);
      <span class="hljs-attribute">zs.push</span>(<span class="hljs-attribute">x</span>);
    }
    <span class="hljs-attribute">return</span> <span class="hljs-attribute">zs</span>;
  });

  <span class="hljs-attribute">register</span>('<span class="hljs-attribute">scanr</span>', <span class="hljs-attribute">function</span> <span class="hljs-attribute">_scanr</span>(<span class="hljs-attribute">f</span>, <span class="hljs-attribute">x</span>, <span class="hljs-attribute">xs</span>) {
    <span class="hljs-attribute">var</span> <span class="hljs-attribute">zs</span> = [<span class="hljs-attribute">x</span>];
    <span class="hljs-attribute">for</span> (<span class="hljs-attribute">var</span> <span class="hljs-attribute">i</span> = <span class="hljs-attribute">xs.length</span> <span class="hljs-attribute">-</span> <span class="hljs-attribute">1</span>; <span class="hljs-attribute">i</span> &gt;</span>= 0; i--) {
      x = f(xs[i], x);
      zs.unshift(x);
    }
    return zs;
  });

  register('scanr1', function _scanr1(f, xs) {
    var x = xs[xs.length - 1];
    var zs = [x];
    for (var i = xs.length - 2; i &gt;= 0; i--) {
      x = f(xs[i], x);
      zs.unshift(x);
    }
    return zs;
  });

  register('concat', function _concat(xs) {
    if (isString(xs[0])) {
      return xs.join('');
    }
    var zs = [];
    var ks = keys(xs);
    for (var i = 0; i <span class="hljs-tag">&lt; <span class="hljs-attribute">ks.length</span>; <span class="hljs-attribute">i</span>++) {
      []<span class="hljs-attribute">.push.apply</span>(<span class="hljs-attribute">zs</span>, <span class="hljs-attribute">xs</span>[<span class="hljs-attribute">ks</span>[<span class="hljs-attribute">i</span>]]);
    }
    <span class="hljs-attribute">return</span> <span class="hljs-attribute">zs</span>;
  });

  <span class="hljs-attribute">register</span>('<span class="hljs-attribute">concatMap</span>', <span class="hljs-attribute">Nodash.compose2</span>(<span class="hljs-attribute">Nodash.concat</span>, <span class="hljs-attribute">Nodash.map</span>));

  <span class="hljs-attribute">register</span>('<span class="hljs-attribute">replicate</span>', <span class="hljs-attribute">function</span> <span class="hljs-attribute">_replicate</span>(<span class="hljs-attribute">n</span>, <span class="hljs-attribute">x</span>) {
    <span class="hljs-attribute">var</span> <span class="hljs-attribute">xs</span> = [];
    <span class="hljs-attribute">for</span> (<span class="hljs-attribute">var</span> <span class="hljs-attribute">i</span> = <span class="hljs-attribute">0</span>; <span class="hljs-attribute">i</span> &lt; <span class="hljs-attribute">n</span>; <span class="hljs-attribute">i</span>++) {
      <span class="hljs-attribute">xs.push</span>(<span class="hljs-attribute">x</span>);
    }
    <span class="hljs-attribute">return</span> <span class="hljs-attribute">xs</span>;
  });

  <span class="hljs-attribute">register</span>('<span class="hljs-attribute">zipWith</span>', <span class="hljs-attribute">function</span> <span class="hljs-attribute">_zipWith</span>(<span class="hljs-attribute">f</span>, <span class="hljs-attribute">as</span>, <span class="hljs-attribute">bs</span>) {
    <span class="hljs-attribute">if</span> (<span class="hljs-attribute">isStream</span>(<span class="hljs-attribute">as</span>) || <span class="hljs-attribute">isStream</span>(<span class="hljs-attribute">bs</span>)) {
      <span class="hljs-attribute">as</span> = <span class="hljs-attribute">Nodash.stream</span>(<span class="hljs-attribute">as</span>);
      <span class="hljs-attribute">bs</span> = <span class="hljs-attribute">Nodash.stream</span>(<span class="hljs-attribute">bs</span>);
      <span class="hljs-attribute">return</span> <span class="hljs-attribute">mkStream</span>(<span class="hljs-attribute">function</span> () {
        <span class="hljs-attribute">var</span> <span class="hljs-attribute">a</span> = <span class="hljs-attribute">as</span>();
        <span class="hljs-attribute">var</span> <span class="hljs-attribute">b</span> = <span class="hljs-attribute">bs</span>();
        <span class="hljs-attribute">if</span> (<span class="hljs-attribute">a</span> =<span class="hljs-value">==</span> <span class="hljs-attribute">eos</span> || <span class="hljs-attribute">b</span> =<span class="hljs-value">==</span> <span class="hljs-attribute">eos</span>) {
          <span class="hljs-attribute">return</span> <span class="hljs-attribute">eos</span>;
        }
        <span class="hljs-attribute">return</span> <span class="hljs-attribute">f</span>(<span class="hljs-attribute">a</span>, <span class="hljs-attribute">b</span>);
      });
    }
    <span class="hljs-attribute">var</span> <span class="hljs-attribute">length</span> = <span class="hljs-attribute">Math.min</span>(<span class="hljs-attribute">as.length</span>, <span class="hljs-attribute">bs.length</span>);
    <span class="hljs-attribute">var</span> <span class="hljs-attribute">zs</span> = [];
    <span class="hljs-attribute">for</span> (<span class="hljs-attribute">var</span> <span class="hljs-attribute">i</span> = <span class="hljs-attribute">0</span>; <span class="hljs-attribute">i</span> &lt; <span class="hljs-attribute">length</span>; <span class="hljs-attribute">i</span>++) {
      <span class="hljs-attribute">zs</span>[<span class="hljs-attribute">i</span>] = <span class="hljs-attribute">f</span>(<span class="hljs-attribute">as</span>[<span class="hljs-attribute">i</span>], <span class="hljs-attribute">bs</span>[<span class="hljs-attribute">i</span>]);
    }
    <span class="hljs-attribute">return</span> <span class="hljs-attribute">zs</span>;
  });

  <span class="hljs-attribute">register</span>('<span class="hljs-attribute">zipWith3</span>', <span class="hljs-attribute">function</span> <span class="hljs-attribute">_zipWith3</span>(<span class="hljs-attribute">f</span>, <span class="hljs-attribute">as</span>, <span class="hljs-attribute">bs</span>, <span class="hljs-attribute">cs</span>) {
    <span class="hljs-attribute">if</span> (<span class="hljs-attribute">isStream</span>(<span class="hljs-attribute">as</span>) || <span class="hljs-attribute">isStream</span>(<span class="hljs-attribute">bs</span>) || <span class="hljs-attribute">isStream</span>(<span class="hljs-attribute">cs</span>)) {
      <span class="hljs-attribute">as</span> = <span class="hljs-attribute">Nodash.stream</span>(<span class="hljs-attribute">as</span>);
      <span class="hljs-attribute">bs</span> = <span class="hljs-attribute">Nodash.stream</span>(<span class="hljs-attribute">bs</span>);
      <span class="hljs-attribute">cs</span> = <span class="hljs-attribute">Nodash.stream</span>(<span class="hljs-attribute">cs</span>);
      <span class="hljs-attribute">return</span> <span class="hljs-attribute">mkStream</span>(<span class="hljs-attribute">function</span> () {
        <span class="hljs-attribute">var</span> <span class="hljs-attribute">a</span> = <span class="hljs-attribute">as</span>();
        <span class="hljs-attribute">var</span> <span class="hljs-attribute">b</span> = <span class="hljs-attribute">bs</span>();
        <span class="hljs-attribute">var</span> <span class="hljs-attribute">c</span> = <span class="hljs-attribute">cs</span>();
        <span class="hljs-attribute">if</span> (<span class="hljs-attribute">a</span> =<span class="hljs-value">==</span> <span class="hljs-attribute">eos</span> || <span class="hljs-attribute">b</span> =<span class="hljs-value">==</span> <span class="hljs-attribute">eos</span> || <span class="hljs-attribute">c</span> =<span class="hljs-value">==</span> <span class="hljs-attribute">eos</span>) {
          <span class="hljs-attribute">return</span> <span class="hljs-attribute">eos</span>;
        }
        <span class="hljs-attribute">return</span> <span class="hljs-attribute">f</span>(<span class="hljs-attribute">a</span>, <span class="hljs-attribute">b</span>, <span class="hljs-attribute">c</span>);
      });
    }
    <span class="hljs-attribute">var</span> <span class="hljs-attribute">length</span> = <span class="hljs-attribute">Nodash.minimum</span>([<span class="hljs-attribute">as.length</span>, <span class="hljs-attribute">bs.length</span>, <span class="hljs-attribute">cs.length</span>]);
    <span class="hljs-attribute">var</span> <span class="hljs-attribute">zs</span> = [];
    <span class="hljs-attribute">for</span> (<span class="hljs-attribute">var</span> <span class="hljs-attribute">i</span> = <span class="hljs-attribute">0</span>; <span class="hljs-attribute">i</span> &lt; <span class="hljs-attribute">length</span>; <span class="hljs-attribute">i</span>++) {
      <span class="hljs-attribute">zs</span>[<span class="hljs-attribute">i</span>] = <span class="hljs-attribute">f</span>(<span class="hljs-attribute">as</span>[<span class="hljs-attribute">i</span>], <span class="hljs-attribute">bs</span>[<span class="hljs-attribute">i</span>], <span class="hljs-attribute">cs</span>[<span class="hljs-attribute">i</span>]);
    }
    <span class="hljs-attribute">return</span> <span class="hljs-attribute">zs</span>;
  });

  <span class="hljs-attribute">register</span>('<span class="hljs-attribute">zipWith4</span>', <span class="hljs-attribute">function</span> <span class="hljs-attribute">_zipWith4</span>(<span class="hljs-attribute">f</span>, <span class="hljs-attribute">as</span>, <span class="hljs-attribute">bs</span>, <span class="hljs-attribute">cs</span>, <span class="hljs-attribute">ds</span>) {
    <span class="hljs-attribute">if</span> (<span class="hljs-attribute">isStream</span>(<span class="hljs-attribute">as</span>) || <span class="hljs-attribute">isStream</span>(<span class="hljs-attribute">bs</span>) || <span class="hljs-attribute">isStream</span>(<span class="hljs-attribute">cs</span>) || <span class="hljs-attribute">isStream</span>(<span class="hljs-attribute">ds</span>)) {
      <span class="hljs-attribute">as</span> = <span class="hljs-attribute">Nodash.stream</span>(<span class="hljs-attribute">as</span>);
      <span class="hljs-attribute">bs</span> = <span class="hljs-attribute">Nodash.stream</span>(<span class="hljs-attribute">bs</span>);
      <span class="hljs-attribute">cs</span> = <span class="hljs-attribute">Nodash.stream</span>(<span class="hljs-attribute">cs</span>);
      <span class="hljs-attribute">ds</span> = <span class="hljs-attribute">Nodash.stream</span>(<span class="hljs-attribute">ds</span>);
      <span class="hljs-attribute">return</span> <span class="hljs-attribute">mkStream</span>(<span class="hljs-attribute">function</span> () {
        <span class="hljs-attribute">var</span> <span class="hljs-attribute">a</span> = <span class="hljs-attribute">as</span>();
        <span class="hljs-attribute">var</span> <span class="hljs-attribute">b</span> = <span class="hljs-attribute">bs</span>();
        <span class="hljs-attribute">var</span> <span class="hljs-attribute">c</span> = <span class="hljs-attribute">cs</span>();
        <span class="hljs-attribute">var</span> <span class="hljs-attribute">d</span> = <span class="hljs-attribute">ds</span>();
        <span class="hljs-attribute">if</span> (<span class="hljs-attribute">a</span> =<span class="hljs-value">==</span> <span class="hljs-attribute">eos</span> || <span class="hljs-attribute">b</span> =<span class="hljs-value">==</span> <span class="hljs-attribute">eos</span> || <span class="hljs-attribute">c</span> =<span class="hljs-value">==</span> <span class="hljs-attribute">eos</span> || <span class="hljs-attribute">d</span> =<span class="hljs-value">==</span> <span class="hljs-attribute">eos</span>) {
          <span class="hljs-attribute">return</span> <span class="hljs-attribute">eos</span>;
        }
        <span class="hljs-attribute">return</span> <span class="hljs-attribute">f</span>(<span class="hljs-attribute">a</span>, <span class="hljs-attribute">b</span>, <span class="hljs-attribute">c</span>, <span class="hljs-attribute">d</span>);
      });
    }
    <span class="hljs-attribute">var</span> <span class="hljs-attribute">length</span> = <span class="hljs-attribute">Nodash.minimum</span>([<span class="hljs-attribute">as.length</span>, <span class="hljs-attribute">bs.length</span>, <span class="hljs-attribute">cs.length</span>, <span class="hljs-attribute">ds.length</span>]);
    <span class="hljs-attribute">var</span> <span class="hljs-attribute">zs</span> = [];
    <span class="hljs-attribute">for</span> (<span class="hljs-attribute">var</span> <span class="hljs-attribute">i</span> = <span class="hljs-attribute">0</span>; <span class="hljs-attribute">i</span> &lt; <span class="hljs-attribute">length</span>; <span class="hljs-attribute">i</span>++) {
      <span class="hljs-attribute">zs</span>[<span class="hljs-attribute">i</span>] = <span class="hljs-attribute">f</span>(<span class="hljs-attribute">as</span>[<span class="hljs-attribute">i</span>], <span class="hljs-attribute">bs</span>[<span class="hljs-attribute">i</span>], <span class="hljs-attribute">cs</span>[<span class="hljs-attribute">i</span>], <span class="hljs-attribute">ds</span>[<span class="hljs-attribute">i</span>]);
    }
    <span class="hljs-attribute">return</span> <span class="hljs-attribute">zs</span>;
  });

  <span class="hljs-attribute">register</span>('<span class="hljs-attribute">zipWith5</span>', <span class="hljs-attribute">function</span> <span class="hljs-attribute">_zipWith5</span>(<span class="hljs-attribute">f</span>, <span class="hljs-attribute">as</span>, <span class="hljs-attribute">bs</span>, <span class="hljs-attribute">cs</span>, <span class="hljs-attribute">ds</span>, <span class="hljs-attribute">es</span>) {
    <span class="hljs-attribute">var</span> <span class="hljs-attribute">length</span> = <span class="hljs-attribute">Nodash.minimum</span>([
            <span class="hljs-attribute">as.length</span>, <span class="hljs-attribute">bs.length</span>, <span class="hljs-attribute">cs.length</span>, <span class="hljs-attribute">ds.length</span>, <span class="hljs-attribute">es.length</span>]);
    <span class="hljs-attribute">var</span> <span class="hljs-attribute">zs</span> = [];
    <span class="hljs-attribute">for</span> (<span class="hljs-attribute">var</span> <span class="hljs-attribute">i</span> = <span class="hljs-attribute">0</span>; <span class="hljs-attribute">i</span> &lt; <span class="hljs-attribute">length</span>; <span class="hljs-attribute">i</span>++) {
      <span class="hljs-attribute">zs</span>[<span class="hljs-attribute">i</span>] = <span class="hljs-attribute">f</span>(<span class="hljs-attribute">as</span>[<span class="hljs-attribute">i</span>], <span class="hljs-attribute">bs</span>[<span class="hljs-attribute">i</span>], <span class="hljs-attribute">cs</span>[<span class="hljs-attribute">i</span>], <span class="hljs-attribute">ds</span>[<span class="hljs-attribute">i</span>], <span class="hljs-attribute">es</span>[<span class="hljs-attribute">i</span>]);
    }
    <span class="hljs-attribute">return</span> <span class="hljs-attribute">zs</span>;
  });

  <span class="hljs-attribute">register</span>('<span class="hljs-attribute">zipWith6</span>', <span class="hljs-attribute">function</span> <span class="hljs-attribute">_zipWith6</span>(<span class="hljs-attribute">f</span>, <span class="hljs-attribute">as</span>, <span class="hljs-attribute">bs</span>, <span class="hljs-attribute">cs</span>, <span class="hljs-attribute">ds</span>, <span class="hljs-attribute">es</span>, <span class="hljs-attribute">fs</span>) {
    <span class="hljs-attribute">var</span> <span class="hljs-attribute">length</span> = <span class="hljs-attribute">Nodash.minimum</span>([
            <span class="hljs-attribute">as.length</span>, <span class="hljs-attribute">bs.length</span>, <span class="hljs-attribute">cs.length</span>, <span class="hljs-attribute">ds.length</span>, <span class="hljs-attribute">es.length</span>, <span class="hljs-attribute">fs.length</span>]);
    <span class="hljs-attribute">var</span> <span class="hljs-attribute">zs</span> = [];
    <span class="hljs-attribute">for</span> (<span class="hljs-attribute">var</span> <span class="hljs-attribute">i</span> = <span class="hljs-attribute">0</span>; <span class="hljs-attribute">i</span> &lt; <span class="hljs-attribute">length</span>; <span class="hljs-attribute">i</span>++) {
      <span class="hljs-attribute">zs</span>[<span class="hljs-attribute">i</span>] = <span class="hljs-attribute">f</span>(<span class="hljs-attribute">as</span>[<span class="hljs-attribute">i</span>], <span class="hljs-attribute">bs</span>[<span class="hljs-attribute">i</span>], <span class="hljs-attribute">cs</span>[<span class="hljs-attribute">i</span>], <span class="hljs-attribute">ds</span>[<span class="hljs-attribute">i</span>], <span class="hljs-attribute">es</span>[<span class="hljs-attribute">i</span>], <span class="hljs-attribute">fs</span>[<span class="hljs-attribute">i</span>]);
    }
    <span class="hljs-attribute">return</span> <span class="hljs-attribute">zs</span>;
  });

  <span class="hljs-attribute">register</span>('<span class="hljs-attribute">zipWith7</span>', <span class="hljs-attribute">function</span> <span class="hljs-attribute">_zipWith7</span>(<span class="hljs-attribute">f</span>, <span class="hljs-attribute">as</span>, <span class="hljs-attribute">bs</span>, <span class="hljs-attribute">cs</span>, <span class="hljs-attribute">ds</span>, <span class="hljs-attribute">es</span>, <span class="hljs-attribute">fs</span>, <span class="hljs-attribute">gs</span>) {
    <span class="hljs-attribute">var</span> <span class="hljs-attribute">length</span> = <span class="hljs-attribute">Nodash.minimum</span>([
            <span class="hljs-attribute">as.length</span>, <span class="hljs-attribute">bs.length</span>, <span class="hljs-attribute">cs.length</span>, <span class="hljs-attribute">ds.length</span>,
            <span class="hljs-attribute">es.length</span>, <span class="hljs-attribute">fs.length</span>, <span class="hljs-attribute">gs.length</span>]);
    <span class="hljs-attribute">var</span> <span class="hljs-attribute">zs</span> = [];
    <span class="hljs-attribute">for</span> (<span class="hljs-attribute">var</span> <span class="hljs-attribute">i</span> = <span class="hljs-attribute">0</span>; <span class="hljs-attribute">i</span> &lt; <span class="hljs-attribute">length</span>; <span class="hljs-attribute">i</span>++) {
      <span class="hljs-attribute">zs</span>[<span class="hljs-attribute">i</span>] = <span class="hljs-attribute">f</span>(<span class="hljs-attribute">as</span>[<span class="hljs-attribute">i</span>], <span class="hljs-attribute">bs</span>[<span class="hljs-attribute">i</span>], <span class="hljs-attribute">cs</span>[<span class="hljs-attribute">i</span>], <span class="hljs-attribute">ds</span>[<span class="hljs-attribute">i</span>], <span class="hljs-attribute">es</span>[<span class="hljs-attribute">i</span>], <span class="hljs-attribute">fs</span>[<span class="hljs-attribute">i</span>], <span class="hljs-attribute">gs</span>[<span class="hljs-attribute">i</span>]);
    }
    <span class="hljs-attribute">return</span> <span class="hljs-attribute">zs</span>;
  });

  <span class="hljs-attribute">register</span>('<span class="hljs-attribute">zip</span>',  <span class="hljs-attribute">Nodash.zipWith</span>(<span class="hljs-attribute">Nodash</span>[',']));

  <span class="hljs-attribute">register</span>('<span class="hljs-attribute">zip3</span>', <span class="hljs-attribute">Nodash.zipWith3</span>(<span class="hljs-attribute">Nodash</span>[',,']));

  <span class="hljs-attribute">register</span>('<span class="hljs-attribute">zip4</span>', <span class="hljs-attribute">Nodash.zipWith4</span>(<span class="hljs-attribute">Nodash</span>[',,,']));

  <span class="hljs-attribute">register</span>('<span class="hljs-attribute">zip5</span>', <span class="hljs-attribute">Nodash.zipWith5</span>(<span class="hljs-attribute">Nodash</span>[',,,,']));

  <span class="hljs-attribute">register</span>('<span class="hljs-attribute">zip6</span>', <span class="hljs-attribute">Nodash.zipWith6</span>(<span class="hljs-attribute">Nodash</span>[',,,,,']));

  <span class="hljs-attribute">register</span>('<span class="hljs-attribute">zip7</span>', <span class="hljs-attribute">Nodash.zipWith7</span>(<span class="hljs-attribute">Nodash</span>[',,,,,,']));


</span></span></pre></div></div>
            
        </li>
        
        
        <li id="section-51">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-51">&#182;</a>
              </div>
              <p>Strings</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
  register(<span class="hljs-string">'lines'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_lines</span>(<span class="hljs-params">string</span>) </span>{
    <span class="hljs-keyword">var</span> result = string.split(<span class="hljs-regexp">/\n/</span>);
    <span class="hljs-keyword">if</span> (result[result.length - <span class="hljs-number">1</span>].length === <span class="hljs-number">0</span>) {
      <span class="hljs-keyword">delete</span> result[result.length - <span class="hljs-number">1</span>];
    }
    <span class="hljs-keyword">return</span> result;
  });

  register(<span class="hljs-string">'unlines'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_unlines</span>(<span class="hljs-params">lines</span>) </span>{
    <span class="hljs-keyword">return</span> lines.join(<span class="hljs-string">'\n'</span>);
  });

  register(<span class="hljs-string">'words'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_words</span>(<span class="hljs-params">string</span>) </span>{
    <span class="hljs-keyword">return</span> string.split(<span class="hljs-regexp">/[\n\r\v\t ]/</span>);
  });

  register(<span class="hljs-string">'unwords'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_unwords</span>(<span class="hljs-params">words</span>) </span>{
    <span class="hljs-keyword">return</span> words.join(<span class="hljs-string">' '</span>);
  });</pre></div></div>
            
        </li>
        
        
        <li id="section-52">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-52">&#182;</a>
              </div>
              <p>Data.List</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
  register(<span class="hljs-string">'intersperse'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_intersperse</span>(<span class="hljs-params">x, xs</span>) </span>{
    <span class="hljs-keyword">if</span> (xs.length === <span class="hljs-number">0</span>) {
      <span class="hljs-keyword">return</span> [];
    }
    <span class="hljs-keyword">var</span> z = [xs[<span class="hljs-number">0</span>]];
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">1</span>; i &lt; xs.length; i++) {
      z.push(x);
      z.push(xs[i]);
    }
    <span class="hljs-keyword">return</span> z;
  });

  register(<span class="hljs-string">'intercalate'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_intercalate</span>(<span class="hljs-params">x, xs</span>) </span>{
    <span class="hljs-keyword">return</span> Nodash.concat(Nodash.intersperse(x, xs));
  });

  register(<span class="hljs-string">'transpose'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_transpose</span>(<span class="hljs-params">xss</span>) </span>{
    <span class="hljs-keyword">if</span> (!isArray(xss)) {
      <span class="hljs-keyword">var</span> zss = {};
      <span class="hljs-keyword">var</span> ks = keys(xss);
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> k = <span class="hljs-number">0</span>; k &lt; ks.length; k++) {
        zss[xss[ks[k]]] = ks[k];
      }
      <span class="hljs-keyword">return</span> zss;
    }
    <span class="hljs-keyword">var</span> j = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">var</span> zs = [];
    <span class="hljs-keyword">var</span> current;
    <span class="hljs-keyword">do</span> {
      current = [];
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; xss.length; i++) {
        <span class="hljs-keyword">if</span> (xss[i][j] !== <span class="hljs-literal">undefined</span>) {
          current.push(xss[i][j]);
        }
      }
      j += <span class="hljs-number">1</span>;
    } <span class="hljs-keyword">while</span> (current.length &gt; <span class="hljs-number">0</span> &amp;&amp; zs.push(current));
    <span class="hljs-keyword">if</span> (isString(xss[<span class="hljs-number">0</span>])) {
      zs = Nodash.map(listToString, zs);
    }
    <span class="hljs-keyword">return</span> zs;
  });</pre></div></div>
            
        </li>
        
        
        <li id="section-53">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-53">&#182;</a>
              </div>
              <p>   register(‘subsequences’, function _subsequences() {
   });</p>

            </div>
            
        </li>
        
        
        <li id="section-54">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-54">&#182;</a>
              </div>
              <p>   register(‘permutations’, function _permutations() {
   });</p>

            </div>
            
        </li>
        
        
        <li id="section-55">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-55">&#182;</a>
              </div>
              <p>   register(‘mapAccumL’, function _mapAccumL() {
   });</p>

            </div>
            
        </li>
        
        
        <li id="section-56">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-56">&#182;</a>
              </div>
              <p>   register(‘mapAccumR’, function _mapAccumR() {
   });</p>

            </div>
            
        </li>
        
        
        <li id="section-57">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-57">&#182;</a>
              </div>
              <p>   register(‘unfoldr’, function _unfoldr() {
   });</p>

            </div>
            
        </li>
        
        
        <li id="section-58">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-58">&#182;</a>
              </div>
              <p>   register(‘stripPrefix’, function _stripPrefix() {
   });</p>

            </div>
            
        </li>
        
        
        <li id="section-59">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-59">&#182;</a>
              </div>
              <p>   register(‘nubBy’, function () {
   });</p>

            </div>
            
        </li>
        
        
        <li id="section-60">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-60">&#182;</a>
              </div>
              <p>   register(‘unionBy’, function () {
   });</p>

            </div>
            
        </li>
        
        
        <li id="section-61">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-61">&#182;</a>
              </div>
              <p>   register(‘intersectBy’, function () {
   });</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
  register(<span class="hljs-string">'heads'</span>, Nodash.map(Nodash.head));

  register(<span class="hljs-string">'lasts'</span>, Nodash.map(Nodash.lasts));

  register(<span class="hljs-string">'inits'</span>, Nodash.map(Nodash.inits));

  register(<span class="hljs-string">'tails'</span>, Nodash.map(Nodash.tails));

  register(<span class="hljs-string">'isPrefixOf'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_isPrefixOf</span>(<span class="hljs-params">prefix, string</span>) </span>{
    <span class="hljs-keyword">if</span> (isStream(prefix)) {
      prefix = Nodash.consume(prefix);
    }
    <span class="hljs-keyword">if</span> (isStream(string)) {
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; prefix.length; i++) {
        <span class="hljs-keyword">if</span> (prefix[i] !== string()) {
          <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        }
      }
      <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    }
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> j = <span class="hljs-number">0</span>; j &lt; prefix.length; j++) {
      <span class="hljs-keyword">if</span> (string[j] !== prefix[j]) {
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
      }
    }
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
  });

  register(<span class="hljs-string">'isSuffixOf'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_isSuffixOf</span>(<span class="hljs-params">suffix, string</span>) </span>{
    <span class="hljs-keyword">if</span> (isStream(suffix)) {
      suffix = Nodash.consume(suffix);
    }
    <span class="hljs-keyword">if</span> (isStream(string)) {
      string = Nodash.consume(string);
    }
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; suffix.length; i++) {
      <span class="hljs-keyword">if</span> (string[string.length - suffix.length + i] !== suffix[i]) {
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
      }
    }
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
  });

  register(<span class="hljs-string">'isInfixOf'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_isInfixOf</span>(<span class="hljs-params">infix, string</span>) </span>{
      <span class="hljs-keyword">return</span> indexOf(infix, string) &gt;= <span class="hljs-number">0</span>;
  });

  register(<span class="hljs-string">'indexOf'</span>, indexOf);

  register(<span class="hljs-string">'find'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_find</span>(<span class="hljs-params">p, xs</span>) </span>{
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; xs.length; i++) {
      <span class="hljs-keyword">if</span> (p(xs[i])) {
        <span class="hljs-keyword">return</span> xs[i];
      }
    }
    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
  });

  register(<span class="hljs-string">'partition'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_partition</span>(<span class="hljs-params">p, xs</span>) </span>{
    <span class="hljs-keyword">var</span> <span class="hljs-keyword">as</span> = [];
    <span class="hljs-keyword">var</span> bs = [];
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; xs.length; i++) {
      (p(xs[i]) ? <span class="hljs-keyword">as</span> : bs).push(xs[i]);
    }
    <span class="hljs-keyword">if</span> (isString(xs)) {
      <span class="hljs-keyword">return</span> Nodash.map(listToString, [ <span class="hljs-keyword">as</span>, bs ]);
    }
    <span class="hljs-keyword">return</span> [ <span class="hljs-keyword">as</span>, bs ];
  });

  register(<span class="hljs-string">'findIndex'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_elemIndex</span>(<span class="hljs-params">p, xs</span>) </span>{
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; xs.length; i++) {
      <span class="hljs-keyword">if</span> (p(xs[i])) {
        <span class="hljs-keyword">return</span> i;
      }
    }
    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
  });

  register(<span class="hljs-string">'findIndices'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_elemIndex</span>(<span class="hljs-params">p, xs</span>) </span>{
    <span class="hljs-keyword">var</span> zs = [];
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; xs.length; i++) {
      <span class="hljs-keyword">if</span> (p(xs[i])) {
        zs.push(i);
      }
    }
    <span class="hljs-keyword">return</span> zs;
  });
  
  register(<span class="hljs-string">'elemIndex'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_elemIndex</span>(<span class="hljs-params">x, xs</span>) </span>{
    <span class="hljs-keyword">return</span> Nodash.findIndex(Nodash.eq(x), xs);
  });

  register(<span class="hljs-string">'elemIndices'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_elemIndex</span>(<span class="hljs-params">x, xs</span>) </span>{
    <span class="hljs-keyword">return</span> Nodash.findIndices(Nodash.eq(x), xs);
  });

  register(<span class="hljs-string">'nub'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_nub</span>(<span class="hljs-params">xs</span>) </span>{
    <span class="hljs-keyword">var</span> set = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Set</span>();
    <span class="hljs-keyword">var</span> zs = [];
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; xs.length; i++) {
      <span class="hljs-keyword">if</span> (!set.has(xs[i])) {
        zs.push(xs[i]);
        set.add(xs[i]);
      }
    }
    <span class="hljs-keyword">return</span> zs;
  });

  register(<span class="hljs-string">'\\\\'</span>, <span class="hljs-string">'difference'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">xs, ys</span>) </span>{
    <span class="hljs-keyword">var</span> set = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Set</span>();
    <span class="hljs-keyword">var</span> i;
    <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; ys.length; i++) {
      set.add(ys[i]);
    }
    <span class="hljs-keyword">var</span> zs = [];
    <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; xs.length; i++) {
      <span class="hljs-keyword">if</span> (!set.has(xs[i])) {
        zs.push(xs[i]);
      }
    }
    <span class="hljs-keyword">return</span> isString(xs) ? listToString(zs) : zs;
  });

  register(<span class="hljs-string">'union'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">xs, ys</span>) </span>{
    <span class="hljs-keyword">var</span> set = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Set</span>();
    <span class="hljs-keyword">var</span> zs = [];
    <span class="hljs-keyword">var</span> i;
    <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; xs.length; i++) {
      zs.push(xs[i]);
      set.add(xs[i]);
    }
    <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; ys.length; i++) {
      <span class="hljs-keyword">if</span> (!set.has(ys[i])) {
        zs.push(ys[i]);
      }
    }
    <span class="hljs-keyword">return</span> zs;
  });

  register(<span class="hljs-string">'intersect'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">xs, ys</span>) </span>{
    <span class="hljs-keyword">var</span> set = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Set</span>();
    <span class="hljs-keyword">var</span> zs = [];
    <span class="hljs-keyword">var</span> i;
    <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; ys.length; i++) {
      set.add(ys[i]);
    }
    <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; xs.length; i++) {
      <span class="hljs-keyword">if</span> (set.has(xs[i])) {
        zs.push(xs[i]);
      }
    }
    <span class="hljs-keyword">return</span> zs;
  });

  register(<span class="hljs-string">'sort'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">xs</span>) </span>{
    checkFinite(xs);
    <span class="hljs-keyword">if</span> (xs.length &lt;= <span class="hljs-number">1</span>) {
      <span class="hljs-keyword">return</span> xs;
    }
    <span class="hljs-keyword">var</span> zs = isString(xs) ? <span class="hljs-string">""</span>.split.call(xs, <span class="hljs-string">''</span>) : [].slice.call(xs);
    <span class="hljs-keyword">if</span> (isNumber(zs[<span class="hljs-number">0</span>])) {
      zs.sort(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">a, b</span>) </span>{ <span class="hljs-keyword">return</span> a - b; });
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (isString(zs[<span class="hljs-number">0</span>])) {
      zs.sort(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">a, b</span>) </span>{ <span class="hljs-keyword">return</span> a.localeCompare(b); });
    } <span class="hljs-keyword">else</span> {
      zs.sort(Nodash.compare);
    }
    <span class="hljs-keyword">return</span> isString(xs) ? zs.join(<span class="hljs-string">''</span>) : zs;
  });

  register(<span class="hljs-string">'deleteBy'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">p, x, xs</span>) </span>{
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; xs.length; i++) {
      <span class="hljs-keyword">if</span> (p(x, xs[i])) {
        <span class="hljs-keyword">return</span> Nodash.append(xs.slice(<span class="hljs-number">0</span>,i), xs.slice(i+<span class="hljs-number">1</span>));
      }
    }
    <span class="hljs-keyword">return</span> xs;
  });

  register(<span class="hljs-string">'delete'</span>, <span class="hljs-string">'delete_'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_delete</span>(<span class="hljs-params">x, xs</span>) </span>{
    <span class="hljs-keyword">var</span> i = xs.indexOf(x);
    <span class="hljs-keyword">if</span> (i &gt;= <span class="hljs-number">0</span>) {
      <span class="hljs-keyword">return</span> Nodash.append(xs.slice(<span class="hljs-number">0</span>,i), xs.slice(i+<span class="hljs-number">1</span>));
    }
    <span class="hljs-keyword">return</span> xs;
  });

  register(<span class="hljs-string">'insertBy'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">f, x, xs</span>) </span>{
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; xs.length; i++) {
      <span class="hljs-keyword">if</span> (f(x, xs[i]) &lt;= <span class="hljs-number">0</span>) {
        <span class="hljs-keyword">return</span> Nodash.concat([xs.slice(<span class="hljs-number">0</span>,i), x, xs.slice(i)]);
      }
    }
    <span class="hljs-keyword">return</span> Nodash.append(xs, x);
  });

  register(<span class="hljs-string">'insert'</span>, Nodash.insertBy(Nodash.compare));

  register(<span class="hljs-string">'groupBy'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">p, xs</span>) </span>{
    <span class="hljs-keyword">if</span> (xs.length === <span class="hljs-number">0</span>) {
      <span class="hljs-keyword">return</span> [];
    }
    <span class="hljs-keyword">var</span> zs = [];
    <span class="hljs-keyword">var</span> current = [xs[<span class="hljs-number">0</span>]];
    <span class="hljs-keyword">var</span> last = xs[<span class="hljs-number">0</span>];
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">1</span>; i &lt; xs.length; i++) {
      <span class="hljs-keyword">if</span> (p(xs[i], last)) {
        current.push(last);
      } <span class="hljs-keyword">else</span> {
        zs.push(current);
        current = [last = xs[i]];
      }
    }
    zs.push(current);
    <span class="hljs-keyword">return</span> isString(xs) ? Nodash.map(listToString, zs) : zs;
  });

  register(<span class="hljs-string">'group'</span>, Nodash.groupBy(Nodash.eq));

  register(<span class="hljs-string">'sortBy'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">fn, xs</span>) </span>{
    <span class="hljs-keyword">if</span> (xs.length &lt;= <span class="hljs-number">1</span>) {
      <span class="hljs-keyword">return</span> xs;
    }
    <span class="hljs-keyword">var</span> zs = isString(xs) ? <span class="hljs-string">""</span>.split.call(xs, <span class="hljs-string">''</span>) : [].slice.call(xs);
    zs.sort(fn);
    <span class="hljs-keyword">return</span> isString(xs) ? zs.join(<span class="hljs-string">''</span>) : zs;
  });

  register(<span class="hljs-string">'maximumBy'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">f, xs</span>) </span>{
    <span class="hljs-keyword">return</span> Nodash.foldl1(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">a, b</span>) </span>{
      <span class="hljs-keyword">if</span> (f(a, b) &gt; <span class="hljs-number">0</span>) {
        <span class="hljs-keyword">return</span> a;
      }
      <span class="hljs-keyword">return</span> b;
    }, xs);
  });

  register(<span class="hljs-string">'minimumBy'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">f, xs</span>) </span>{
    <span class="hljs-keyword">return</span> Nodash.foldl1(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">a, b</span>) </span>{
      <span class="hljs-keyword">if</span> (f(a, b) &lt; <span class="hljs-number">0</span>) {
        <span class="hljs-keyword">return</span> a;
      }
      <span class="hljs-keyword">return</span> b;
    }, xs);
  });</pre></div></div>
            
        </li>
        
        
        <li id="section-62">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-62">&#182;</a>
              </div>
              <p>Maybe</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
  register(<span class="hljs-string">'maybe'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_maybe</span>(<span class="hljs-params">def, fun, maybe</span>) </span>{
    <span class="hljs-keyword">if</span> (maybe === <span class="hljs-literal">undefined</span> || maybe === <span class="hljs-literal">null</span>) {
      <span class="hljs-keyword">return</span> def;
    }
    <span class="hljs-keyword">return</span> fun(maybe);
  });

  register(<span class="hljs-string">'isJust'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_isJust</span>(<span class="hljs-params">value</span>) </span>{
    <span class="hljs-keyword">return</span> value !== <span class="hljs-literal">undefined</span> &amp;&amp; value !== <span class="hljs-literal">null</span>;
  });

  register(<span class="hljs-string">'isNothing'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_isNothing</span>(<span class="hljs-params">value</span>) </span>{
    <span class="hljs-keyword">return</span> value === <span class="hljs-literal">undefined</span> || value === <span class="hljs-literal">null</span>;
  });

  register(<span class="hljs-string">'fromMaybe'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_fromMaybe</span>(<span class="hljs-params">def, maybe</span>) </span>{
    <span class="hljs-keyword">if</span> (maybe === <span class="hljs-literal">undefined</span> || maybe === <span class="hljs-literal">null</span>) {
      <span class="hljs-keyword">return</span> def;
    }
    <span class="hljs-keyword">return</span> maybe;
  });

  register(<span class="hljs-string">'listToMaybe'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_listToMaybe</span>(<span class="hljs-params">xs</span>) </span>{
    <span class="hljs-keyword">if</span> (isStream(xs)) {
      <span class="hljs-keyword">var</span> r = xs();
      <span class="hljs-keyword">return</span> r === eos ? <span class="hljs-literal">null</span> : r;
    }
    <span class="hljs-keyword">return</span> xs[<span class="hljs-number">0</span>];
  });

  register(<span class="hljs-string">'maybeToList'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_maybeToList</span>(<span class="hljs-params">maybe</span>) </span>{
    <span class="hljs-keyword">if</span> (maybe === <span class="hljs-literal">undefined</span> || maybe === <span class="hljs-literal">null</span>) {
      <span class="hljs-keyword">return</span> [];
    }
    <span class="hljs-keyword">return</span> [maybe];
  });

  register(<span class="hljs-string">'catMaybes'</span>, Nodash.filter(Nodash.isJust));

  register(<span class="hljs-string">'mapMaybe'</span>, Nodash.compose2(Nodash.filter(Nodash.isJust), Nodash.map));</pre></div></div>
            
        </li>
        
        
        <li id="section-63">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-63">&#182;</a>
              </div>
              <p>Either</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
  register(<span class="hljs-string">'either'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_either</span>(<span class="hljs-params">afun, bfun, either</span>) </span>{
    <span class="hljs-keyword">var</span> left = either.left || either[<span class="hljs-number">0</span>];
    <span class="hljs-keyword">if</span> (left) {
      <span class="hljs-keyword">return</span> afun(left);
    }
    <span class="hljs-keyword">var</span> right = either.right || either[<span class="hljs-number">1</span>];
    <span class="hljs-keyword">if</span> (right) {
      <span class="hljs-keyword">return</span> bfun(right);
    }
    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
  });

  register(<span class="hljs-string">'Left'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_Left</span>(<span class="hljs-params">value</span>) </span>{ <span class="hljs-keyword">return</span> { left: value }; });

  register(<span class="hljs-string">'Right'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_Right</span>(<span class="hljs-params">value</span>) </span>{ <span class="hljs-keyword">return</span> { right: value }; });

  register(<span class="hljs-string">'isLeft'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_isLeft</span>(<span class="hljs-params">val</span>) </span>{
    <span class="hljs-keyword">return</span> val.left !== <span class="hljs-literal">undefined</span> || (val[<span class="hljs-number">0</span>] !== <span class="hljs-literal">undefined</span> &amp;&amp; val[<span class="hljs-number">0</span>] !== <span class="hljs-literal">null</span>);
  });

  register(<span class="hljs-string">'isRight'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_isRight</span>(<span class="hljs-params">val</span>) </span>{
    <span class="hljs-keyword">return</span> (val.right !== <span class="hljs-literal">undefined</span> || val[<span class="hljs-number">1</span>] !== <span class="hljs-literal">undefined</span>) &amp;&amp; !Nodash.isLeft(val);
  });

  register(<span class="hljs-string">'fromLeft'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_fromLeft</span>(<span class="hljs-params">val</span>) </span>{
    <span class="hljs-keyword">if</span> (val.left !== <span class="hljs-literal">undefined</span>) {
      <span class="hljs-keyword">return</span> val.left;
    }
    <span class="hljs-keyword">return</span> val[<span class="hljs-number">0</span>];
  });

  register(<span class="hljs-string">'fromRight'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_fromRight</span>(<span class="hljs-params">val</span>) </span>{
    <span class="hljs-keyword">if</span> (val.right !== <span class="hljs-literal">undefined</span>) {
      <span class="hljs-keyword">return</span> val.right;
    }
    <span class="hljs-keyword">return</span> val[<span class="hljs-number">1</span>];
  });

  register(<span class="hljs-string">'lefts'</span>, Nodash.compose(
              Nodash.map(Nodash.fromLeft),
              Nodash.filter(Nodash.isLeft)
  ));

  register(<span class="hljs-string">'rights'</span>, Nodash.compose(
              Nodash.map(Nodash.fromRight),
              Nodash.filter(Nodash.isRight)
  ));

  register(<span class="hljs-string">'partitionEithers'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_partitionEithers</span>(<span class="hljs-params">xs</span>) </span>{
    <span class="hljs-keyword">return</span> [ Nodash.lefts(xs), Nodash.rights(xs) ];
  });</pre></div></div>
            
        </li>
        
        
        <li id="section-64">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-64">&#182;</a>
              </div>
              <p>Objects</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  
  register(<span class="hljs-string">'keys'</span>, keys);

  <span class="hljs-keyword">return</span> Nodash;
}

<span class="hljs-keyword">var</span> P = install({
  install: install
});

<span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> <span class="hljs-built_in">module</span> !== <span class="hljs-string">'undefined'</span> &amp;&amp; <span class="hljs-built_in">module</span>.exports) {
  <span class="hljs-built_in">module</span>.exports = P;
} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> define === <span class="hljs-string">'function'</span> &amp;&amp; define.amd) {
  define(P.idf(P));
} <span class="hljs-keyword">else</span> {
  <span class="hljs-built_in">window</span>.Prelude = P;
  <span class="hljs-built_in">window</span>.Nodash = P;
}

}());</pre></div></div>
            
        </li>
        
    </ul>
  </div>
</body>
</html>
