{"version":3,"sources":["nodash.js"],"names":["makeNodash","options","undefined","showEndOfStream","mkStream","f","__stream__","stream","isStream","x","isFunction","mkInfinite","__infinite__","isInfinite","checkFinite","xs","Error","isString","isNumber","isNodash","__isNodash","isNumeric","test","id","listToString","join","indexOf","word","string","m","i","table","pos","cnd","length","curried","fn","funcs","register","fCurried","arg","aliases","arguments","push","composed","Nodash","Math","NativeMath","Array","NativeArray","Object","NativeObject","String","NativeString","eos","toString","inspect","endOfStream","isArray","arr","prototype","call","isObject","obj","keys","hasOwnProperty","hasDontEnumBug","refObj","propertyIsEnumerable","dontEnums","dontEnumsLength","prop","result","Set","dontUseNatives","NativeSet","this","add","value","has","trampoline","setTimeout","setImmediate",1,2,"a","b",3,"c",4,"d",5,"e",6,"group","g","y","yes","no","bool","ta","tb","k","union","eq","localeCompare","compareTo","min","r","compare","signum","gt","lt","match","xUpper","toUpperCase","xLower","toLowerCase","charCodeAt","fromCharCode","abs","floor","ceil","quot","rem","div","mod","exp","sqrt","log","pow","sin","tan","cos","asin","atan","acos","sinh","tanh","Infinity","cosh","asinh","atanh","acosh","num","truncate","trunc","fraction","properFraction","n","gcd","z","zs","ks","j","consumed","h","split","lines","words","consumedFirst","apply","ys","atSecondStream","concat","p","slice","_","path","object","foldl","at","ix","consume","reverse","exhausted","cons","streaming","AND","OR","ADD","MUL","max","scanl","unshift","compose2","map","as","bs","cs","minimum","ds","zipWith","tuple","zipWith3","tuple3","zipWith4","tuple4","intersperse","xss","zss","current","prefix","suffix","infix","findIndex","findIndices","set","sort","append","insertBy","last","groupBy","yesItsAString","foldl1","def","fun","maybe","filter","isJust","afun","bfun","either","left","right","val","isLeft","compose","fromLeft","fromRight","isRight","lefts","rights","values","each","thing","clone","callback","init","specification","mkError","message","run","prev","newSpec","func","taskName","tasks","initial","spec","name","dependencies","depends","task","args","enables","dependency","unmetDependencies","isEmpty","details","detail","cycles","visit","node","visited","pop","callbackHandle","error","results","toGo","next","execute","dependenciesFailed","runOnError","tempResult","stubResult","cycle","dropWhile","NEQ","intercalate","v","functions","intermediateResult","err","mountpoint","nodashObject","postfix","shift","module","exports","define","amd","idf","window"],"mappings":"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","file":"nodash.min.js","sourcesContent":["/* vim: set et sw=2 ts=2: */\n(function () {\n\n// Save a reference to `Set` (if defined). Otherwise this variable will\n// be `undefined`. References to some native types (`Math`, `Array`,\n// `Object`) are kept here so that native objects can be distinguished\n// from local polyfills.\nvar NativeSet    = typeof Set !== 'undefined' && Set;\nvar NativeMath   = Math;\nvar NativeArray  = Array;\nvar NativeObject = Object;\nvar NativeString = String;\n\n//function install(Nodash, Math, Array, Object, dontUseNatives, refObj, undefined) {\nfunction makeNodash(options, undefined) {\n  \"use strict\";\n\n  options = options || {};\n\n  // This is the object the nodash functions will be attached to.\n  var Nodash = {};\n\n  // Use either the supplied objects from the arguments,\n  // or the references saved above.\n  var Math   = options.Math   || NativeMath;\n  var Array  = options.Array  || NativeArray;\n  var Object = options.Object || NativeObject;\n  var String = options.String || NativeString;\n\n  function showEndOfStream() {\n    return \"end of stream\";\n  }\n\n  var eos = {\n    toString: showEndOfStream,\n    inspect: showEndOfStream\n  };\n\n  Nodash.endOfStream = eos;\n\n  var stream = {};\n\n  function mkStream(f) {\n    f.__stream__ = stream;\n    return f;\n  }\n\n  function isStream(x) { return isFunction(x) && x.__stream__ === stream; }\n\n  function mkInfinite(f) {\n    f = mkStream(f);\n    f.__infinite__ = true;\n    return f;\n  }\n  function isInfinite(f) {\n    return !!f.__infinite__;\n  }\n\n  function checkFinite(xs) {\n    if (isInfinite(xs)) {\n      throw new Error('this function can not consume infinite streams');\n    }\n  }\n\n  // `isArray` checks whether a thing is actually an array object.\n  // If `Array.isArray` is not available in this environment it will\n  // fall back to comparing the toString representation. The `toString`\n  // method used is the one from the `NativeObject` to make sure that\n  // client code can not temper with an object and make it look like an\n  // array. The fallback is necessary to cope with legacy browser\n  // environments.\n  var isArray = Array.isArray || function _isArray(arr) {\n    return NativeObject.prototype.toString.call(arr) === '[object Array]';\n  };\n\n  // `isObject` checks whether a thing is an object and neither an\n  // array nor null.\n  var isObject = function _isObject(obj) {\n    if (typeof obj === 'object') {\n      return obj !== null && !isArray(obj);\n    }\n    return false;\n  };\n\n  // Utility functions for checking basic JavaScript types.\n  function isFunction(x) { return typeof x === 'function'; }\n  function isString(x)   { return typeof x === 'string'; }\n  function isNumber(x)   { return typeof x === 'number'; }\n  function isNodash(f)   { return isFunction(f) && f.__isNodash; }\n  function isNumeric(x)  { return /^[0-9]+$/.test(x); }\n\n  // Enumerates the keys of an object. If `Object.keys` is not availabe,\n  // fall back to a polyfill. The polyfill is so hilariously big to cope\n  // with oddities in IE 8 (the \"don't enum bug\").\n  var keys = Object.keys || (function() {\n    var hasOwnProperty = NativeObject.prototype.hasOwnProperty,\n        hasDontEnumBug = !(options.refObj || { toString: null }).propertyIsEnumerable('toString'),\n        dontEnums = [\n          'toString',\n          'toLocaleString',\n          'valueOf',\n          'hasOwnProperty',\n          'isPrototypeOf',\n          'propertyIsEnumerable',\n          'constructor'\n        ],\n        dontEnumsLength = dontEnums.length;\n\n    return function _Object_keys(obj) {\n      var result = [], prop, i;\n\n      for (prop in obj) {\n        if (hasOwnProperty.call(obj, prop)) {\n          result.push(prop);\n        }\n      }\n      if (hasDontEnumBug) {\n        for (i = 0; i < dontEnumsLength; i++) {\n          if (hasOwnProperty.call(obj, dontEnums[i])) {\n            result.push(dontEnums[i]);\n          }\n        }\n      }\n      return result;\n    };\n  }());\n\n  // Either use the native set or (if `dontUseNatives` is `true` or\n  // there is no native set implementation) a drop-in replacement.\n  // It reproduces only the actually used functionality, which is\n  // `add` and `has`. It uses the keys of an object to simulate the Set.\n  var Set = (!options.dontUseNatives && NativeSet) || (function () {\n    \n    var Set = function () {\n      this.xs = {};\n    };\n\n    Set.prototype.add = function _Set_add(value) {\n      this.xs[value] = true;\n      return this;\n    };\n\n    Set.prototype.has = function _Set_has(value) {\n      return this.xs[value] === true;\n    };\n\n    return Set;\n  }());\n\n  // A function to postpone an action on the event queue\n  var trampoline = function (f) { setTimeout(f, 0); };\n  if (!options.dontUseNatives && typeof(setImmediate) === 'function') {\n    trampoline = setImmediate;\n  }\n\n  // The identity function that returns what was passed in unaltered.\n  function id(x) { return x; }\n\n  // A handy shorthand to reduce a list to a string.\n  function listToString(x) { return x.join(''); }\n\n  // `indexOf` uses an implementation of the Knuth-Morrison-Pratt\n  // Algorithm for finding the index of a given subsequence\n  // (identified as `word` here) within a sequence (identified as\n  // `string` here). Thanks to JavaScript's dynamic nature it\n  // works equally well with strings and arrays.\n  function indexOf(word, string) {\n    var m = 0;\n    var i = 0;\n    var table = [];\n\n    var pos = 2;\n    var cnd = 0;\n\n    table[0] = -1;\n    table[1] = 0;\n\n    // build the table for KMP. This takes `O(word.length)` steps.\n    while (pos < word.length) {\n      if (word[pos - 1] == word[cnd]) {\n        cnd = cnd + 1;\n        table[pos] = cnd;\n        pos = pos + 1;\n      } else if (cnd > 0) {\n        cnd = table[cnd];\n      } else {\n        table[pos] = 0;\n        pos = pos + 1;\n      }\n    }\n    \n    // scan the string. This takes `O(string.length)` steps.\n    while (m + i < string.length) {\n      if (word[i] == string[m + i]) {\n        if (i == word.length - 1) {\n          return m;\n        }\n        i = i + 1;\n      } else {\n        if (table[i] > -1) {\n          m = m + i - table[i];\n          i = table[i];\n        } else {\n          i = 0;\n          m = m + 1;\n        }\n      }\n    }\n    // Returns -1 if the subsequence was not found in the sequence.\n    return -1;\n  }\n\n  // ## Partial application\n  //\n  // While partial application of functions can be implemented easily\n  // using JavaScript's `bind` or `apply` functions, it is more\n  // efficient to use closures as JavaScript's native functions\n  // additionally do some heavy error checking and deal with `this`.\n  //\n  // Partial application of functions relies on the `length` reported\n  // by a function. A correct partial application returns a function\n  // with a length\n  // `length of function which is applied MINUS number of arguments consumed`.\n  // Unfortunately this means we need to have some biolerplate code for\n  // every arity of functions and results, thus the big blob of code\n  // below.\n  var funcs = {\n\n    0: id,\n    1: id,\n    2: function (fn) {\n      return function (a, b) {\n        switch (arguments.length) {\n        case 1:\n          return function (b) {\n            return fn(a, b);\n          };\n        }\n        return fn(a, b);\n      };\n    },\n    3: function (fn) {\n      return function (a, b, c) {\n        switch (arguments.length) {\n        case 1:\n          return funcs[2](function (b, c) {\n            return fn(a, b, c);\n          });\n        case 2:\n          return function (c) {\n            return fn(a, b, c);\n          };\n        }\n        return fn(a, b, c);\n      };\n    },\n    4: function (fn) {\n      return function (a, b, c, d) {\n        switch (arguments.length) {\n        case 1:\n          return funcs[3](function (b, c, d) {\n            return fn(a, b, c, d);\n          });\n        case 2:\n          return funcs[2](function (c, d) {\n            return fn(a, b, c, d);\n          });\n        case 3:\n          return function (d) {\n            return fn(a, b, c, d);\n          };\n        }\n        return fn(a, b, c, d);\n      };\n    },\n    5: function (fn) {\n      return function (a, b, c, d, e) {\n        switch (arguments.length) {\n        case 1:\n          return funcs[4](function (b, c, d, e) {\n            return fn(a, b, c, d, e);\n          });\n        case 2:\n          return funcs[3](function (c, d, e) {\n            return fn(a, b, c, d, e);\n          });\n        case 3:\n          return funcs[2](function (d, e) {\n            return fn(a, b, c, d, e);\n          });\n        case 4:\n          return function (e) {\n            return fn(a, b, c, d, e);\n          };\n        }\n        return fn(a, b, c, d, e);\n      };\n    },\n    6: function (fn) {\n      return function (a, b, c, d, e, f) {\n        switch (arguments.length) {\n        case 1:\n          return funcs[5](function (b, c, d, e, f) {\n            return fn(a, b, c, d, e, f);\n          });\n        case 2:\n          return funcs[4](function (c, d, e, f) {\n            return fn(a, b, c, d, e, f);\n          });\n        case 3:\n          return funcs[3](function (d, e, f) {\n            return fn(a, b, c, d, e, f);\n          });\n        case 4:\n          return funcs[2](function (e, f) {\n            return fn(a, b, c, d, e, f);\n          });\n        case 5:\n          return function (f) {\n            return fn(a, b, c, d, e, f);\n          };\n        }\n        return fn(a, b, c, d, e, f);\n      };\n    }\n  };\n\n  // Turns an ordinary function into a function which can be partially applied.\n  // The maximum arity that this can deal with is 8 (see above).\n  function curried(fn) {\n    return funcs[fn.length](fn);\n  }\n\n  /* @ifdef WITH_ONLINE_HELP */\n  Nodash.metadata = [];\n  /* @endif */\n\n  var currentGroup = \"\";\n\n  /* @ifdef WITH_ONLINE_HELP */\n  function group(name, desc) {\n    currentGroup = { name: name };\n  }\n\n  function callsites() {\n    var _ = Error.prepareStackTrace;\n    Error.prepareStackTrace = function (_, stack) { return stack; };\n    var stack = new Error().stack.slice(1);\n    Error.prepareStackTrace = _;\n    return stack;\n  }\n  \n  function composed(f) {\n    f.composed = f;\n    return f;\n  }\n  /* @endif */\n\n  // I would love to name this function `export` but that is a reserved keyword\n  // since ECMA Script 5.\n  function register() {\n    var f, fCurried, i, arg, aliases = [];\n    /* @ifdef WITH_ONLINE_HELP */\n    var metadata = {};\n    /* @endif */\n    for (i = 0; i < arguments.length; i++) {\n      arg = arguments[i];\n      switch (typeof arg) {\n      case 'string':\n        aliases.push(arg);\n        break;\n      case 'function':\n        f = arg;\n        break;\n      }\n    }\n    fCurried = curried(f.composed ? f() : f);\n    fCurried.__isNodash = true;\n    for (i = 0; i < aliases.length; i++) {\n      Nodash[aliases[i]] = fCurried;\n    }\n    /* @ifdef WITH_ONLINE_HELP */\n    metadata.function = f;\n    metadata.group = currentGroup;\n    metadata.aliases = aliases;\n    metadata.definedAt = callsites()[1].getPosition();\n    Nodash.metadata.push(metadata);\n    /* @endif */\n    return fCurried;\n  }\n\n\n  // # The actual functions\n  //\n  // Every function is exported by attaching it to the `Nodash` object\n  // via `register`. If the function is defined immediately it is given\n  // a name prefixed with an underscore, i.e.\n  //\n  //     register('<function-name>', function _functionName() { ... }\n  //\n  // to make stack traces more readable.\n\n  \n  group('Types');\n\n  register('isFunction', isFunction);\n  register('isStream', isStream);\n  register('isArray', isArray);\n  register('isNumber', isNumber);\n  register('isString', isString);\n  register('isInfinite', isInfinite);\n  register('isObject', isObject);\n\n\n  group('Functions');\n\n  register('id', id);\n\n  register('idf', function _idf(x) {\n    return function () {\n      return x;\n    };\n  });\n\n  register('const', 'const_', 'constant', function _const(a, b) {\n    return a;\n  });\n\n  register('$', 'apply', function _apply(f, x) {\n    return f(x);\n  });\n\n  register('invoke', function _invoke(f) {\n    return f();\n  });\n\n  register('.', 'compose', function _compose(f, g, x) {\n    return f(g(x));\n  });\n\n  register('compose2', function _compose2(f, g, x, y) {\n    return f(g(x, y));\n  });\n\n  register('flip', function _flip(f) {\n    return funcs[2](function (b, a) {\n      return f(a, b);\n    });\n  });\n\n  register('on', function _on(g, f, a, b) {\n    return g(f(a), f(b));\n  });\n\n  register('curried', curried);\n\n  register('curry', function _curry(f) {\n    return function (a) {\n      return function (b) {\n        return f(a, b);\n      };\n    };\n  });\n\n  register('uncurry', function _uncurry(f) {\n    return function (a, b) {\n      return f(a)(b);\n    };\n  });\n\n\n  // ## Functions for working with boolean functions\n\n  group('Boolean');\n\n  register('&&', 'AND', function _AND(a, b) { return a && b; });\n\n  register('||', 'OR', function _OR(a, b) { return a || b; });\n\n  register('not', function _not(value) { return !value; });\n\n  register('bool', function _bool(yes, no, bool) {\n    return bool ? yes : no;\n  });\n\n\n  // ## Tuple\n  \n  group('Tuples');\n\n  register('fst', function _fst(arr) { return arr[0]; });\n\n  register('snd', function _snd(arr) { return arr[1]; });\n\n  register(',', 'tuple', function _tuple(a, b) { return [ a, b ]; });\n\n  register(',,', 'tuple3', function _tuple3(a, b, c) { return [ a, b, c ]; });\n\n  register(',,,', 'tuple4', function _tuple4(a, b, c, d) { return [ a, b, c, d ]; });\n\n  \n  // Eq\n  \n  group(\"Comparisons\");\n\n  register('==', 'eq', 'EQ', function _eq(a, b) {\n    if (a === b) {\n      return true;\n    }\n    var ta = typeof a;\n    var tb = typeof b;\n    if (ta !== tb) {\n      return false;\n    }\n    if (ta === 'object') {\n      var k = Nodash.union(keys(a), keys(b));\n      for (var i = 0; i < k.length; i++) {\n        if (!Nodash.eq(a[k[i]], b[k[i]])) {\n          return false;\n        }\n      }\n      return true;\n    }\n    return false;\n  });\n\n  register('/=', '!=', '<>', 'neq', 'NEQ', function _neq(a, b) {\n    return !Nodash.eq(a, b);\n  });\n\n\n  // Ord\n\n  register('compare', function _compare(a, b) {\n    switch (typeof a) {\n    case 'string':\n      return a.localeCompare(b);\n    case 'object':\n      if (isFunction(a.compareTo)) {\n        return a.compareTo(b);\n      } else if (isArray(a)) {\n        for (var i = 0; i < Math.min(a.length, b.length); i++) {\n          var r = Nodash.compare(a[i], b[i]);\n          if (r !== 0) {\n              return r;\n          }\n        }\n        return 0;\n      }\n      return a.toString().localeCompare(b.toString());\n    case 'number':\n      return Nodash.signum(a - b);\n    }\n    return undefined;\n  });\n\n  register('<', 'lt', 'LT', function _lt(a, b) {\n    return Nodash.compare(a, b) < 0;\n  });\n\n  register('>', 'gt', 'GT', function _gt(a, b) {\n    return Nodash.compare(a, b) > 0;\n  });\n\n  register('<=', 'lte', 'LTE', function _lte(a, b) {\n    return Nodash.compare(a, b) <= 0;\n  });\n\n  register('>=', 'gte', 'GTE', function _gte(a, b) {\n    return Nodash.compare(a, b) >= 0;\n  });\n\n  register('max', function _max(a, b) {\n    if (Nodash.gt(a, b)) {\n      return a;\n    }\n    return b;\n  });\n\n  register('min', function _min(a, b) {\n    if (Nodash.lt(a, b)) {\n      return a;\n    }\n    return b;\n  });\n\n  register('comparing', function _comparing(f, a, b) {\n    return Nodash.compare(f(a), f(b));\n  });\n\n\n  // Data.Char\n\n  group('Characters');\n  \n  register('isDigit', 'isNumeric', isNumeric);\n\n  register('isAsciiLetter', function _isAsciiLetter(x) {\n    return !!x.match(/^[a-zA-Z]+$/);\n  });\n\n  register('isLetter', function _isLetter(x) {\n    var xUpper = x.toUpperCase();\n    var xLower = x.toLowerCase();\n    for (var i = 0; i < x.length; i += 1) {\n      if (xUpper[i] === xLower[i]) {\n        return false;\n      }\n    }\n    return true;\n  });\n\n  register('isUpper', function _isLetter(x) {\n    var xUpper = x.toUpperCase();\n    var xLower = x.toLowerCase();\n    for (var i = 0; i < x.length; i += 1) {\n      if (xUpper[i] === xLower[i] || x[i] !== xUpper[i]) {\n        return false;\n      }\n    }\n    return true;\n  });\n  \n  register('isLower', function _isLetter(x) {\n    var xUpper = x.toUpperCase();\n    var xLower = x.toLowerCase();\n    for (var i = 0; i < x.length; i += 1) {\n      if (xUpper[i] === xLower[i] || x[i] !== xLower[i]) {\n        return false;\n      }\n    }\n    return true;\n  });\n\n  register('ord', function _ord(x) {\n    return x.charCodeAt(0);\n  });\n\n  register('chr', function _chr(x) {\n    return String.fromCharCode(x);\n  });\n\n\n  // Num\n\n  group('Numbers');\n\n  register('+', 'add', 'ADD', 'plus', 'PLUS', function _add(a, b) {\n    return a + b;\n  });\n\n  register('-', 'sub', 'minus', 'MINUS', 'subtract', function _sub(a, b) {\n    return a - b;\n  });\n\n  register('*', 'mul', 'MUL', 'times', 'TIMES', function _mul(a, b) {\n    return a * b;\n  });\n\n  register('abs', Math.abs);\n\n  register('negate', function _negate(a) { return -a; });\n\n  register('signum', function _signum(x) {\n    if (x > 0) {\n      return 1;\n    } else if (x === 0) {\n      return 0;\n    }\n    return -1;\n  });\n\n\n  // Integral\n\n  register('div', function _div(a, b) { return Math.floor(a / b); });\n\n  register('quot', function _quot(a, b) {\n    var r = a / b;\n    return r >= 0 ? Math.floor(r) : Math.ceil(r);\n  });\n\n  register('rem', function _rem(a, b) { return a % b; });\n\n  register('mod', function _mod(a, b) {\n    var q = Nodash.quot(a, b);\n    var r = Nodash.rem(a, b);\n    return Nodash.signum(r) == -Nodash.signum(b) ? r + b : r;\n  });\n\n  register('divMod', function _divMod(a, b)  {\n    return [Nodash.div(a, b), Nodash.mod(a, b)];\n  });\n\n  register('quotRem', function _quotRem(a, b) {\n    return [Nodash.quot(a, b), Nodash.rem(a, b)];\n  });\n\n\n  // Fractional\n\n  register('/', 'frac', function _frac(a, b) { return a / b; });\n\n  register('recip', function _recip(a) { return 1 / a; });\n\n\n  // Floating\n\n  register('exp', Math.exp);\n\n  register('sqrt', Math.sqrt);\n\n  register('log', Math.log);\n\n  register('logBase', function _logBase(a, b) {\n    return Math.log(a) / Math.log(b);\n  });\n\n  register('**', 'pow', '^', '^^', Math.pow);\n\n  register('sin', Math.sin);\n\n  register('tan', Math.tan);\n\n  register('cos', Math.cos);\n\n  register('asin', Math.asin);\n\n  register('atan', Math.atan);\n\n  register('acos', Math.acos);\n\n  register('sinh', Math.sinh || function _sinh(x) {\n    return (Math.exp(x) - Math.exp(-x)) / 2;\n  });\n\n  register('tanh', Math.tanh || function _tanh(x) {\n    if (x === Infinity) {\n      return 1;\n    } else if (x === -Infinity) {\n      return -1;\n    } else {\n      return (Math.exp(x) - Math.exp(-x)) / (Math.exp(x) + Math.exp(-x));\n    }\n  });\n\n  register('cosh', Math.cosh || function _cosh(x) {\n    return (Math.exp(x) + Math.exp(-x)) / 2;\n  });\n\n  register('asinh', Math.asinh || function _asinh(x) {\n    if (x === -Infinity) {\n      return x;\n    } else {\n      return Math.log(x + Math.sqrt(x * x + 1));\n    }\n  });\n\n  register('atanh', Math.atanh || function _atanh(x) {\n    return Math.log((1 + x) / (1 - x)) / 2;\n  });\n\n  register('acosh', Math.acosh || function _acosh(x) {\n    return Math.log(x + Math.sqrt(x * x - 1));\n  });\n\n\n  // RealFrac\n\n  register('properFraction', function _properFraction(x) {\n    var num = Nodash.truncate(x);\n    return [ num, -(num - x) ];\n  });\n\n  register('truncate', Math.trunc || function _truncate(x) {\n    switch (Nodash.signum(x)) {\n    case -1:\n      return Math.ceil(x);\n    case 1:\n      return Math.floor(x);\n    }\n    return 0;\n  });\n\n  register('round', function _round(x) {\n    var fraction = Nodash.properFraction(x);\n    var n = fraction[0];\n    var m = fraction[1] < 0 ? n - 1 : n + 1;\n    switch (Nodash.signum(Math.abs(fraction[1]) - 0.5)) {\n      case -1:\n        return n;\n      case 0:\n        return n % 2 === 0 ? n : m;\n      case 1:\n        return m;\n    }\n  });\n\n  register('ceiling', Math.ceil);\n\n  register('floor', Math.floor);\n\n\n  // RealFloat\n\n  /* ... */\n\n\n  // Numeric\n\n  register('gcd', function _gcd(a, b) {\n    var c;\n    while (b !== 0) {\n      c = Nodash.rem(a, b);\n      a = b;\n      b = c;\n    }\n    return a;\n  });\n\n  register('lcm', function _lcm(a, b) {\n    if (a === 0 || b === 0) {\n      return 0;\n    }\n    return Math.abs(Nodash.quot(a, Nodash.gcd(a, b)) * b);\n  });\n\n  register('even', function _even(x) { return (x % 2) === 0; });\n\n  register('odd', function _odd(x) { return (x % 2) !== 0; });\n\n\n  group('Streams');\n\n  register('stream', 'lazy', function _stream(xs) {\n    if (isStream(xs)) {\n      return xs;\n    }\n    if (isFunction(xs)) {\n      return mkInfinite(function () {\n        return xs();\n      });\n    }\n    var i = 0;\n    return mkStream(function () {\n      if (i < xs.length) {\n        return xs[i++];\n      }\n      return eos;\n    });\n  });\n\n  register('consume', function _consume(xs) {\n    if (!isStream(xs)) {\n      return xs;\n    }\n    checkFinite(xs);\n    var z, zs = [];\n    while ((z = xs()) !== eos) {\n      zs.push(z);\n    }\n    return zs;\n  });\n\n  register('consumeString', function _consumeString(xs) {\n    if (!isStream(xs)) {\n      return \"\" + xs;\n    }\n    var z, zs = \"\";\n    while ((z = xs()) !== eos) {\n      zs += z;\n    }\n    return zs;\n  });\n\n  register('each', function _each(f, xs) {\n    if (isStream(xs)) {\n      var x;\n      while ((x = xs()) !== eos) {\n        f(x);\n      }\n    } else if (isArray(xs) || isString(xs)) {\n      for (var i = 0; i < xs.length; i++) {\n        f(xs[i], i);\n      }\n    } else if (isObject(xs)) {\n      var ks = keys(xs);\n      for (var j = 0; j < ks.length; j += 1) {\n        f(xs[ks[j]], ks[j]);\n      }\n    }\n  });\n\n  register('cycle', function _cycle(xs) {\n    if (isStream(xs)) {\n      if (isInfinite(xs)) {\n        return xs;\n      }\n      var arr = [];\n      var consumed = false;\n      var h = 0;\n      return mkInfinite(function () {\n        var z;\n        if (!consumed) {\n          if ((z = xs()) !== eos) {\n            arr.push(z);\n            return z;\n          }\n          consumed = true;\n        }\n        if (h >= arr.length) {\n          h = 0;\n        }\n        return arr[h++];\n      });\n    } else if (isArray(xs) || isString(xs)) {\n      var i = 0;\n      return mkInfinite(function () {\n        if (i >= xs.length) {\n          i = 0;\n        }\n        return xs[i++];\n      });\n    } else {\n      var ks = keys(xs);\n      var j = 0;\n      return mkInfinite(function () {\n        if (j >= ks.length) {\n          j = 0;\n        }\n        return xs[ks[j++]];\n      });\n    }\n  });\n\n  register('repeat', function _repeat(x) {\n    return mkInfinite(function () {\n      return x;\n    });\n  });\n\n  register('iterate', function _iterate(f, x) {\n    return mkInfinite(function () {\n      var r = x;\n      x = f(x);\n      return r;\n    });\n  });\n\n\n  group('Strings');\n\n  register('lines', function _lines(string) {\n    var result = string.split(/\\n/);\n    if (result[result.length - 1].length === 0) {\n      delete result[result.length - 1];\n    }\n    return result;\n  });\n\n  register('unlines', function _unlines(lines) {\n    return lines.join('\\n');\n  });\n\n  register('words', function _words(string) {\n    return string.split(/[\\n\\r\\v\\t ]/);\n  });\n\n  register('unwords', function _unwords(words) {\n    return words.join(' ');\n  });\n\n\n  group('Arrays / Lists');\n\n  register(':', 'cons', function _cons(x, xs) {\n    if (isStream(xs)) {\n      var consumedFirst = false;\n      return (isInfinite(xs) ? mkInfinite : mkStream)(function () {\n        if (!consumedFirst) {\n          consumedFirst = true;\n          return x;\n        }\n        return xs();\n      });\n    }\n    var zs = [x];\n    [].push.apply(zs, xs);\n    return zs;\n  });\n\n  register('++', 'append', function _append(xs, ys) {\n    if (isStream(xs) || isStream(ys)) {\n      xs = Nodash.stream(xs);\n      if (isInfinite(xs)) {\n        return xs;\n      }\n      ys = Nodash.stream(ys);\n      var atSecondStream = false;\n      return mkStream(function () {\n        if (atSecondStream) {\n          return ys();\n        }\n        var r = xs();\n        if (r == eos) {\n          atSecondStream = true;\n          return ys();\n        }\n        return r;\n      });\n    }\n    if (isString(xs)) {\n      return xs + ys;\n    }\n    if (isArray(xs)) {\n      return [].concat.call(xs, ys);\n    }\n    // type error\n  });\n\n  register('map', function _map(f, xs) {\n    var i, ys;\n    if (isArray(xs)) {\n      ys = [];\n      for (i = 0; i < xs.length; i++) {\n        ys.push(f(xs[i]));\n      }\n      return ys;\n    }\n    if (isString(xs)) {\n      ys = [];\n      for (i = 0; i < xs.length; i++) {\n        ys.push(f(xs[i]));\n      }\n      return listToString(ys);\n    }\n    if (isStream(xs)) {\n      return (isInfinite(xs) ? mkInfinite : mkStream)(function () {\n        var x = xs();\n        if (x === eos) {\n          return eos;\n        }\n        return f(x);\n      });\n    }\n    ys = {};\n    var ks = keys(xs);\n    for (var j = 0; j < ks.length; j++) {\n      ys[ks[j]] = f(xs[ks[j]], ks[j]);\n    }\n    return ys;\n  });\n\n  register('filter', function _filter(p, xs) {\n    if (isStream(xs)) {\n      return (isInfinite(xs) ? mkInfinite : mkStream)(function () {\n        var x;\n        while ((x = xs()) !== eos) {\n          if (p(x)) {\n            return x;\n          }\n        }\n        return eos;\n      });\n    }\n    var ys;\n    if (isArray(xs) || isString(xs)) {\n      ys = [];\n      for (var i = 0; i < xs.length; i++) {\n        if (p(xs[i])) {\n          ys.push(xs[i]);\n        }\n      }\n      return isString(xs) ? listToString(ys) : ys;\n    }\n    ys = {};\n    var ks = keys(xs);\n    for (var j = 0; j < ks.length; j++) {\n      if (p(xs[ks[j]])) {\n        ys[ks[j]] = xs[ks[j]];\n      }\n    }\n    return ys;\n  });\n\n  register('head', function _head(xs) {\n    if (isStream(xs)) {\n      var x = xs();\n      return x === eos ? undefined : x;\n    }\n    return xs[0];\n  });\n\n  register('last', function _last(xs) {\n    if (isStream(xs)) {\n      checkFinite(xs);\n      var x, z;\n      while ((x = xs()) !== eos) {\n        z = x;\n      }\n      return z;\n    }\n    return xs[xs.length - 1];\n  });\n\n  register('tail', function _tail(xs) {\n    if (isStream(xs)) {\n      xs();\n      return xs;\n    }\n    if (isString(xs)) {\n      return xs.slice(1);\n    }\n    return [].slice.call(xs, 1);\n  });\n\n  register('init', function _init(xs) {\n    if (isStream(xs)) {\n      checkFinite(xs);\n      var a = xs(), b;\n      return mkStream(function () {\n        b = xs();\n        if (b === eos) {\n          return eos;\n        }\n        var r = a;\n        a = b;\n        return r;\n      });\n    }\n    if (isString(xs)) {\n      return xs.slice(0, xs.length - 1);\n    }\n    return [].slice.call(xs, 0, xs.length - 1);\n  });\n\n  register('isEmpty', 'null_', function _null(xs) {\n    if (isStream(xs)) {\n      return xs() === eos;\n    }\n    if (isArray(xs) || isString(xs)) {\n      return xs.length === 0;\n    }\n    for (var _ in xs) {\n      return false;\n    }\n    return true;\n  });\n\n  register('length', function _length(xs) {\n    if (isStream(xs)) {\n      if (isInfinite(xs)) {\n        return Infinity;\n      }\n      var n = 0;\n      while (xs() !== eos) {\n        n += 1;\n      }\n      return n;\n    }\n    if (isObject(xs)) {\n      return keys(xs).length;\n    }\n    return xs.length;\n  });\n\n  register('select', function _select(path, object) {\n    return Nodash.foldl(Nodash.at, object, path.split(/\\./));\n  });\n\n  register('!!', 'at', 'AT', function _at(xs, ix) {\n    if (isStream(xs)) {\n      var x;\n      for (var i = 0; i < ix; i++) {\n        if (xs() === eos) {\n          return x;\n        }\n      }\n      x = xs();\n      return x === eos ? undefined : x;\n    }\n    if (xs === undefined) {\n      return xs;\n    }\n    return xs[ix];\n  });\n\n  register('reverse', function _reverse(xs) {\n    if (isStream(xs)) {\n      checkFinite(xs);\n      xs = Nodash.consume(xs);\n      var i = xs.length - 1;\n      return mkStream(function () {\n        if (i < 0) {\n          return eos;\n        }\n        return xs[i--];\n      });\n    }\n    var zs = isString(xs) ? \"\".split.call(xs, '') : [].slice.call(xs);\n    zs.reverse();\n    return isString(xs) ? zs.join('') : zs;\n  });\n\n  register('take', function _take(n, xs) {\n    if (isStream(xs)) {\n      var i = 0;\n      return mkStream(function () {\n        if (i++ < n) {\n          return xs();\n        }\n        return eos;\n      });\n    }\n    return xs.slice(0, n);\n  });\n\n  register('drop', function _drop(n, xs) {\n    if (isStream(xs)) {\n      for (var i = 0; i < n; i++) {\n        xs();\n      }\n      return xs;\n    }\n    return xs.slice(n);\n  });\n\n  register('splitAt', function _splitAt(n, xs) {\n    return [ xs.slice(0, n), xs.slice(n) ];\n  });\n\n  register('takeWhile', function _takeWhile(p, xs) {\n    if (isStream(xs)) {\n      var exhausted = false;\n      return mkStream(function () {\n        var x = xs();\n        if (exhausted || x == eos || !p(x)) {\n          exhausted = true;\n          return eos;\n        }\n        return x;\n      });\n    }\n    var i = 0;\n    while (i < xs.length && p(xs[i])) {\n      i++;\n    }\n    return xs.slice(0, i);\n  });\n\n  register('dropWhile', function _dropWhile(p, xs) {\n    if (isStream(xs)) {\n      var x;\n      while ((x = xs()) !== eos && p(x)) {\n      }\n      return Nodash.cons(x, xs);\n    }\n    var i = 0;\n    while (i < xs.length && p(xs[i])) {\n      i++;\n    }\n    return xs.slice(i);\n  });\n\n  register('span', function _span(p, xs) {\n    var i = 0;\n    while (i < xs.length && p(xs[i])) {\n        i++;\n    }\n    return [ xs.slice(0, i), xs.slice(i) ];\n  });\n\n  register('break_', 'break', function _break(p, xs) {\n    var i = 0;\n    while (i < xs.length && !p(xs[i])) {\n      i++;\n    }\n    return [ xs.slice(0, i), xs.slice(i) ];\n  });\n\n  register('elem', function _elem(x, xs) {\n    if (isStream(xs)) {\n      var z;\n      while ((z = xs()) !== eos) {\n        if (Nodash.eq(z, x)) {\n          return true;\n        }\n      }\n      return false;\n    }\n    for (var i = 0; i < xs.length; i++) {\n      if (Nodash.eq(xs[i], x)) {\n        return true;\n      }\n    }\n    return false;\n  });\n\n  register('notElem', function _notElem(x, xs) {\n    if (isStream(xs)) {\n      var z;\n      while ((z = xs()) !== eos) {\n        if (Nodash.eq(z, x)) {\n          return false;\n        }\n      }\n      return true;\n    }\n    for (var i = 0; i < xs.length; i++) {\n      if (Nodash.eq(xs[i], x)) {\n        return false;\n      }\n    }\n    return true;\n  });\n\n  register('lookup', function _lookup(x, xs) {\n    if (isArray(xs)) {\n      for (var i = 0; i < xs.length; i++) {\n        if (xs[i] && Nodash.eq(xs[i][0], x)) {\n          return xs[i][1];\n        }\n      }\n    }\n    return xs[x];\n  });\n\n  register('foldl', 'foldl\\'', function _foldl(f, x, xs) {\n    var streaming = isStream(xs);\n    if (streaming) {\n      xs = Nodash.consume(xs);\n    }\n    for (var i = 0; i < xs.length; i++) {\n      x = f(x, xs[i]);\n    }\n    if (isArray(x) && streaming) {\n      return Nodash.stream(x);\n    }\n    return x;\n  });\n\n  register('foldl1', 'foldl1\\'', function _foldl1(f, xs) {\n    var streaming = isStream(xs);\n    if (streaming) {\n      xs = Nodash.consume(xs);\n    }\n    var x = xs[0];\n    for (var i = 1; i < xs.length; i++) {\n      x = f(x, xs[i]);\n    }\n    if (isArray(x) && streaming) {\n      return Nodash.stream(x);\n    }\n    return x;\n  });\n\n  register('foldr', function _foldr(f, x, xs) {\n    for (var i = xs.length - 1; i >= 0; i--) {\n      x = f(xs[i], x);\n    }\n    return x;\n  });\n\n  register('foldr1', function _foldr1(f, xs) {\n    var x = xs[xs.length - 1];\n    for (var i = xs.length - 2; i >= 0; i--) {\n      x = f(xs[i], x);\n    }\n    return x;\n  });\n\n  register('and', composed(function (){return Nodash.foldl(Nodash.AND, true);}));\n\n  register('or', composed(function (){return Nodash.foldl(Nodash.OR, false);}));\n\n  register('sum', composed(function (){return Nodash.foldl(Nodash.ADD, 0);}));\n\n  register('product', composed(function (){return Nodash.foldl(Nodash.MUL, 1);}));\n\n  register('maximum', composed(function (){return Nodash.foldl(Nodash.max, -Infinity);}));\n\n  register('minimum', composed(function (){return Nodash.foldl(Nodash.min, +Infinity);}));\n\n  register('any', function _any(p, xs) {\n    for (var i = 0; i < xs.length; i++) {\n      if (p(xs[i])) {\n        return true;\n      }\n    }\n    return false;\n  });\n\n  register('all', function _all(p, xs) {\n    for (var i = 0; i < xs.length; i++) {\n      if (!p(xs[i])) {\n        return false;\n      }\n    }\n    return true;\n  });\n\n  register('scanl', function _scanl(f, x, xs) {\n    if (isStream(xs)) {\n      return Nodash.cons(x, (isInfinite(xs) ? mkInfinite : mkStream)(function () {\n        var r = xs();\n        if (r === eos) {\n          return eos;\n        }\n        x = f(x, r);\n        return x;\n      }));\n    }\n    var zs = [x];\n    for (var i = 0; i < xs.length; i++) {\n      x = f(x, xs[i]);\n      zs.push(x);\n    }\n    return zs;\n  });\n\n  register('scanl1', function _scanl1(f, xs) {\n    if (isStream(xs)) {\n      return Nodash.scanl(f, xs(), xs);\n    }\n    var x = xs[0];\n    var zs = [x];\n    for (var i = 1; i < xs.length; i++) {\n      x = f(x, xs[i]);\n      zs.push(x);\n    }\n    return zs;\n  });\n\n  register('scanr', function _scanr(f, x, xs) {\n    var zs = [x];\n    for (var i = xs.length - 1; i >= 0; i--) {\n      x = f(xs[i], x);\n      zs.unshift(x);\n    }\n    return zs;\n  });\n\n  register('scanr1', function _scanr1(f, xs) {\n    var x = xs[xs.length - 1];\n    var zs = [x];\n    for (var i = xs.length - 2; i >= 0; i--) {\n      x = f(xs[i], x);\n      zs.unshift(x);\n    }\n    return zs;\n  });\n\n  register('concat', function _concat(xs) {\n    if (isString(xs[0])) {\n      return xs.join('');\n    }\n    var zs = [];\n    var ks = keys(xs);\n    for (var i = 0; i < ks.length; i++) {\n      [].push.apply(zs, xs[ks[i]]);\n    }\n    return zs;\n  });\n\n  register('concatMap', composed(function (){return Nodash.compose2(Nodash.concat, Nodash.map);}));\n\n  register('replicate', function _replicate(n, x) {\n    var xs = [];\n    for (var i = 0; i < n; i++) {\n      xs.push(x);\n    }\n    return xs;\n  });\n\n  register('zipWith', function _zipWith(f, as, bs) {\n    if (isStream(as) || isStream(bs)) {\n      as = Nodash.stream(as);\n      bs = Nodash.stream(bs);\n      return mkStream(function () {\n        var a = as();\n        var b = bs();\n        if (a === eos || b === eos) {\n          return eos;\n        }\n        return f(a, b);\n      });\n    }\n    var length = Math.min(as.length, bs.length);\n    var zs = [];\n    for (var i = 0; i < length; i++) {\n      zs[i] = f(as[i], bs[i]);\n    }\n    return zs;\n  });\n\n  register('zipWith3', function _zipWith3(f, as, bs, cs) {\n    if (isStream(as) || isStream(bs) || isStream(cs)) {\n      as = Nodash.stream(as);\n      bs = Nodash.stream(bs);\n      cs = Nodash.stream(cs);\n      return mkStream(function () {\n        var a = as();\n        var b = bs();\n        var c = cs();\n        if (a === eos || b === eos || c === eos) {\n          return eos;\n        }\n        return f(a, b, c);\n      });\n    }\n    var length = Nodash.minimum([as.length, bs.length, cs.length]);\n    var zs = [];\n    for (var i = 0; i < length; i++) {\n      zs[i] = f(as[i], bs[i], cs[i]);\n    }\n    return zs;\n  });\n\n  register('zipWith4', function _zipWith4(f, as, bs, cs, ds) {\n    if (isStream(as) || isStream(bs) || isStream(cs) || isStream(ds)) {\n      as = Nodash.stream(as);\n      bs = Nodash.stream(bs);\n      cs = Nodash.stream(cs);\n      ds = Nodash.stream(ds);\n      return mkStream(function () {\n        var a = as();\n        var b = bs();\n        var c = cs();\n        var d = ds();\n        if (a === eos || b === eos || c === eos || d === eos) {\n          return eos;\n        }\n        return f(a, b, c, d);\n      });\n    }\n    var length = Nodash.minimum([as.length, bs.length, cs.length, ds.length]);\n    var zs = [];\n    for (var i = 0; i < length; i++) {\n      zs[i] = f(as[i], bs[i], cs[i], ds[i]);\n    }\n    return zs;\n  });\n\n  register('zip', composed(function (){return Nodash.zipWith(Nodash.tuple);}));\n\n  register('zip3', composed(function (){return Nodash.zipWith3(Nodash.tuple3);}));\n\n  register('zip4', composed(function (){return Nodash.zipWith4(Nodash.tuple4);}));\n\n  \n  // further from Data.List\n\n  register('intersperse', function _intersperse(x, xs) {\n    if (xs.length === 0) {\n      return [];\n    }\n    var z = [xs[0]];\n    for (var i = 1; i < xs.length; i++) {\n      z.push(x);\n      z.push(xs[i]);\n    }\n    return z;\n  });\n\n  register('intercalate', function _intercalate(x, xs) {\n    return Nodash.concat(Nodash.intersperse(x, xs));\n  });\n\n  register('transpose', function _transpose(xss) {\n    if (!isArray(xss)) {\n      var zss = {};\n      var ks = keys(xss);\n      for (var k = 0; k < ks.length; k++) {\n        zss[xss[ks[k]]] = ks[k];\n      }\n      return zss;\n    }\n    var j = 0;\n    var zs = [];\n    var current;\n    do {\n      current = [];\n      for (var i = 0; i < xss.length; i++) {\n        if (xss[i][j] !== undefined) {\n          current.push(xss[i][j]);\n        }\n      }\n      j += 1;\n    } while (current.length > 0 && zs.push(current));\n    if (isString(xss[0])) {\n      zs = Nodash.map(listToString, zs);\n    }\n    return zs;\n  });\n\n//    register('subsequences', function _subsequences() {\n//    });\n\n//    register('permutations', function _permutations() {\n//    });\n\n//    register('mapAccumL', function _mapAccumL() {\n//    });\n\n//    register('mapAccumR', function _mapAccumR() {\n//    });\n\n//    register('unfoldr', function _unfoldr() {\n//    });\n\n//    register('stripPrefix', function _stripPrefix() {\n//    });\n\n//    register('nubBy', function () {\n//    });\n\n//    register('unionBy', function () {\n//    });\n\n//    register('intersectBy', function () {\n//    });\n\n  register('inits', function _inits(xs) {\n    var result, current, i, length;\n    if (isArray(xs)) {\n      result = [[]];\n      current = [];\n      length = xs.length;\n      for (i = 0; i < length; i += 1) {\n        current = current.concat(xs[i]);\n        result.push(current);\n      }\n      return result;\n    }\n    if (isString(xs)) {\n      result = [''];\n      current = '';\n      length = xs.length;\n      for (i = 0; i < length; i += 1) {\n        current += xs[i];\n        result.push(current);\n      }\n      return result;\n    }\n    // type error\n  });\n\n  register('tails', function _tails(xs) {\n    var result, current, i;\n    if (isArray(xs)) {\n      result = [[]];\n      current = [];\n      for (i = xs.length - 1; i >= 0; i -= 1) {\n        current = [xs[i]].concat(current);\n        result.unshift(current);\n      }\n      return result;\n    }\n    if (isString(xs)) {\n      result = [''];\n      current = '';\n      for (i = xs.length - 1; i >= 0; i -= 1) {\n        current = xs[i] + current;\n        result.unshift(current);\n      }\n      return result;\n    }\n    // type error\n  });\n\n  register('isPrefixOf', function _isPrefixOf(prefix, string) {\n    if (isStream(prefix)) {\n      prefix = Nodash.consume(prefix);\n    }\n    if (isStream(string)) {\n      for (var i = 0; i < prefix.length; i++) {\n        if (prefix[i] !== string()) {\n          return false;\n        }\n      }\n      return true;\n    }\n    for (var j = 0; j < prefix.length; j++) {\n      if (string[j] !== prefix[j]) {\n        return false;\n      }\n    }\n    return true;\n  });\n\n  register('isSuffixOf', function _isSuffixOf(suffix, string) {\n    if (isStream(suffix)) {\n      suffix = Nodash.consume(suffix);\n    }\n    if (isStream(string)) {\n      string = Nodash.consume(string);\n    }\n    for (var i = 0; i < suffix.length; i++) {\n      if (string[string.length - suffix.length + i] !== suffix[i]) {\n        return false;\n      }\n    }\n    return true;\n  });\n\n  register('isInfixOf', function _isInfixOf(infix, string) {\n      return indexOf(infix, string) >= 0;\n  });\n\n  register('indexOf', indexOf);\n\n  register('find', function _find(p, xs) {\n    for (var i = 0; i < xs.length; i++) {\n      if (p(xs[i])) {\n        return xs[i];\n      }\n    }\n    return null;\n  });\n\n  register('partition', function _partition(p, xs) {\n    var as = [];\n    var bs = [];\n    for (var i = 0; i < xs.length; i++) {\n      (p(xs[i]) ? as : bs).push(xs[i]);\n    }\n    if (isString(xs)) {\n      return Nodash.map(listToString, [ as, bs ]);\n    }\n    return [ as, bs ];\n  });\n\n  register('findIndex', function _elemIndex(p, xs) {\n    for (var i = 0; i < xs.length; i++) {\n      if (p(xs[i])) {\n        return i;\n      }\n    }\n    return null;\n  });\n\n  register('findIndices', function _elemIndex(p, xs) {\n    var zs = [];\n    for (var i = 0; i < xs.length; i++) {\n      if (p(xs[i])) {\n        zs.push(i);\n      }\n    }\n    return zs;\n  });\n  \n  register('elemIndex', function _elemIndex(x, xs) {\n    return Nodash.findIndex(Nodash.eq(x), xs);\n  });\n\n  register('elemIndices', function _elemIndex(x, xs) {\n    return Nodash.findIndices(Nodash.eq(x), xs);\n  });\n\n  register('nub', function _nub(xs) {\n    var set = new Set();\n    var zs = [];\n    for (var i = 0; i < xs.length; i++) {\n      if (!set.has(xs[i])) {\n        zs.push(xs[i]);\n        set.add(xs[i]);\n      }\n    }\n    return zs;\n  });\n\n  register('\\\\\\\\', 'difference', function _difference(xs, ys) {\n    var set = new Set();\n    var i;\n    for (i = 0; i < ys.length; i++) {\n      set.add(ys[i]);\n    }\n    var zs = [];\n    for (i = 0; i < xs.length; i++) {\n      if (!set.has(xs[i])) {\n        zs.push(xs[i]);\n      }\n    }\n    return isString(xs) ? listToString(zs) : zs;\n  });\n\n  register('union', function _union(xs, ys) {\n    var set = new Set();\n    var zs = [];\n    var i;\n    for (i = 0; i < xs.length; i++) {\n      zs.push(xs[i]);\n      set.add(xs[i]);\n    }\n    for (i = 0; i < ys.length; i++) {\n      if (!set.has(ys[i])) {\n        zs.push(ys[i]);\n      }\n    }\n    return zs;\n  });\n\n  register('intersect', function _intersect(xs, ys) {\n    var set = new Set();\n    var zs = [];\n    var i;\n    for (i = 0; i < ys.length; i++) {\n      set.add(ys[i]);\n    }\n    for (i = 0; i < xs.length; i++) {\n      if (set.has(xs[i])) {\n        zs.push(xs[i]);\n      }\n    }\n    return zs;\n  });\n\n  register('sort', function _sort(xs) {\n    checkFinite(xs);\n    if (xs.length <= 1) {\n      return xs;\n    }\n    var zs = isString(xs) ? \"\".split.call(xs, '') : [].slice.call(xs);\n    if (isNumber(zs[0])) {\n      zs.sort(function (a, b) { return a - b; });\n    } else if (isString(zs[0])) {\n      zs.sort(function (a, b) { return a.localeCompare(b); });\n    } else {\n      zs.sort(Nodash.compare);\n    }\n    return isString(xs) ? zs.join('') : zs;\n  });\n\n  register('deleteBy', function _deleteBy(p, x, xs) {\n    for (var i = 0; i < xs.length; i++) {\n      if (p(x, xs[i])) {\n        return Nodash.append(xs.slice(0,i), xs.slice(i+1));\n      }\n    }\n    return xs;\n  });\n\n  register('delete_', 'delete', function _delete(x, xs) {\n    var i = xs.indexOf(x);\n    if (i >= 0) {\n      return Nodash.append(xs.slice(0,i), xs.slice(i+1));\n    }\n    return xs;\n  });\n\n  register('insertBy', function _insertBy(f, x, xs) {\n    for (var i = 0; i < xs.length; i++) {\n      if (f(x, xs[i]) <= 0) {\n        return Nodash.concat([xs.slice(0,i), x, xs.slice(i)]);\n      }\n    }\n    return Nodash.append(xs, x);\n  });\n\n  register('insert', composed(function (){return Nodash.insertBy(Nodash.compare);}));\n\n  register('groupBy', function _groupBy(p, xs) {\n    if (xs.length === 0) {\n      return [];\n    }\n    var zs = [];\n    var current = [xs[0]];\n    var last = xs[0];\n    for (var i = 1; i < xs.length; i++) {\n      if (p(xs[i], last)) {\n        current.push(xs[i]);\n      } else {\n        zs.push(current);\n        current = [xs[i]];\n      }\n      last = xs[i];\n    }\n    zs.push(current);\n    return isString(xs) ? Nodash.map(listToString, zs) : zs;\n  });\n\n  register('group', composed(function (){return Nodash.groupBy(Nodash.eq);}));\n\n  register('sortBy', function _sortBy(fn, xs) {\n    if (isStream(xs)) {\n      checkFinite(xs);\n      xs = Nodash.consume(xs);\n    }\n    if (xs.length <= 1) {\n      return xs;\n    }\n    var yesItsAString = isString(xs);\n    var zs = yesItsAString ? \"\".split.call(xs, '') : [].slice.call(xs);\n    zs.sort(fn);\n    return yesItsAString ? zs.join('') : zs;\n  });\n\n  register('maximumBy', function _maximumBy(f, xs) {\n    return Nodash.foldl1(function (a, b) {\n      if (f(a, b) > 0) {\n        return a;\n      }\n      return b;\n    }, xs);\n  });\n\n  register('minimumBy', function _minimumBy(f, xs) {\n    return Nodash.foldl1(function (a, b) {\n      if (f(a, b) < 0) {\n        return a;\n      }\n      return b;\n    }, xs);\n  });\n\n\n  // ## Maybe\n\n  group('Maybe');\n\n  register('maybe', function _maybe(def, fun, maybe) {\n    if (maybe === undefined || maybe === null) {\n      return def;\n    }\n    return fun(maybe);\n  });\n\n  register('isJust', function _isJust(value) {\n    return value !== undefined && value !== null;\n  });\n\n  register('isNothing', function _isNothing(value) {\n    return value === undefined || value === null;\n  });\n\n  register('fromMaybe', function _fromMaybe(def, maybe) {\n    if (maybe === undefined || maybe === null) {\n      return def;\n    }\n    return maybe;\n  });\n\n  register('listToMaybe', function _listToMaybe(xs) {\n    if (isStream(xs)) {\n      var r = xs();\n      return r === eos ? null : r;\n    }\n    return xs[0];\n  });\n\n  register('maybeToList', function _maybeToList(maybe) {\n    if (maybe === undefined || maybe === null) {\n      return [];\n    }\n    return [maybe];\n  });\n\n  register('catMaybes', composed(function (){return Nodash.filter(Nodash.isJust);}));\n\n  register('mapMaybe', composed(function (){return Nodash.compose2(Nodash.filter(Nodash.isJust), Nodash.map);}));\n\n\n  // ## Either\n\n  group('Either');\n\n  register('either', function _either(afun, bfun, either) {\n    var left = either.left || either[0];\n    if (left) {\n      return afun(left);\n    }\n    var right = either.right || either[1];\n    if (right) {\n      return bfun(right);\n    }\n    return null;\n  });\n\n  register('Left', function _Left(value) {\n    return { left: value };\n  });\n\n  register('Right', function _Right(value) {\n    return { right: value };\n  });\n\n  register('isLeft', function _isLeft(val) {\n    return val.left !== undefined ||\n      (val[0] !== undefined && val[0] !== null);\n  });\n\n  register('isRight', function _isRight(val) {\n    return (val.right !== undefined || val[1] !== undefined) &&\n      !Nodash.isLeft(val);\n  });\n\n  register('fromLeft', function _fromLeft(val) {\n    if (val.left !== undefined) {\n      return val.left;\n    }\n    return val[0];\n  });\n\n  register('fromRight', function _fromRight(val) {\n    if (val.right !== undefined) {\n      return val.right;\n    }\n    return val[1];\n  });\n\n  register('lefts', Nodash.compose(\n              Nodash.map(Nodash.fromLeft),\n              Nodash.filter(Nodash.isLeft)\n  ));\n\n  register('rights', Nodash.compose(\n              Nodash.map(Nodash.fromRight),\n              Nodash.filter(Nodash.isRight)\n  ));\n\n  register('partitionEithers', function _partitionEithers(xs) {\n    return [ Nodash.lefts(xs), Nodash.rights(xs) ];\n  });\n\n\n  // ## Objects\n  \n  group('Objects');\n\n  register('keys', keys);\n\n  register('values', function _values(object) {\n    var values = [];\n    each(function (value) {\n      values.push(value);\n    }, object);\n    return values;\n  });\n\n  register('clone', function _clone(thing) {\n    if (typeof thing === 'object') {\n      if (thing === null) {\n        return null;\n      }\n      return Nodash.map(Nodash.clone, thing);\n    }\n    return thing;\n  });\n\n\n  // ## Control\n\n  group('Control');\n\n  register('async', function _async(f) {\n    return function () {\n      try {\n        var callback = Nodash.last(arguments);\n        var result = f.apply(null, Nodash.init(arguments));\n        trampoline(function () { callback(result); });\n      } catch (e) {\n        trampoline(function () { callback(null, e); });\n      }\n    };\n  });\n\n  register('run', function _run(specification) {\n    // this function does its own currying.\n    if (arguments.length == 2) {\n      Nodash.run(specification)(arguments[1]);\n      return;\n    }\n\n    // if spec is an array, translate to object spec\n    if (isArray(specification)) {\n      var prev = null;\n      var newSpec = {};\n      Nodash.each(function (func, taskName) {\n        newSpec[taskName] = prev === null ? func : [ prev, func ];\n        prev = taskName;\n      }, specification);\n      specification = newSpec;\n    }\n\n    var tasks = {},\n        initial = [];\n\n    // prepare tasks specification.\n    Nodash.each(function (spec, name) {\n      var dependencies = [];\n      var func = null;\n      if (isArray(spec)) {\n        dependencies = Nodash.init(spec);\n        func = Nodash.last(spec);\n      } else {\n        if (isArray(spec.depends)) {\n          dependencies = spec.depends;\n        }\n        func = spec;\n      }\n\n      var task = {\n        func: func,\n        args: dependencies,\n        depends: {},\n        enables: tasks[name] ? tasks[name].enables : {}\n      };\n      Nodash.each(function (dependency) {\n        task.depends[dependency] = true;\n        if (!tasks[dependency]) {\n            tasks[dependency] = { enables: {} };\n        }\n        tasks[dependency].enables[name] = true;\n      }, dependencies);\n      tasks[name] = task;\n    }, specification);\n\n    // check spec for unmet dependencies\n    var unmetDependencies = [];\n    Nodash.each(function (task, taskName) {\n      Nodash.each(function (_, dependency) {\n        if (!specification[dependency]) {\n          unmetDependencies.push([ taskName, dependency ]);\n        }\n      }, task.depends);\n    }, tasks);\n\n    function mkError(message) {\n      return function (callback) {\n        trampoline(function () {\n          callback(null, message);\n        });\n      };\n    }\n\n    if (!isEmpty(unmetDependencies)) {\n      return mkError({\n        message: \"unmet dependencies\",\n        details: Nodash.map(function (detail) {\n          return \"`\" +\n            detail[0] + \"` depends on `\" +\n            detail[1] + \"` which is not defined\";\n        }, unmetDependencies)\n      });\n    }\n\n    // build initial set\n    Nodash.each(function (task, taskName) {\n      if (Nodash.isEmpty(task.depends)) {\n        initial.push(taskName);\n      }\n    }, tasks);\n\n    if (Nodash.isEmpty(initial)) {\n      return mkError({\n        message: \"no initial task\",\n        details: \"There is no task without any dependencies.\"\n      });\n    }\n\n    // check spec for cycles\n    var cycles = [];\n    Nodash.each(function (taskName) {\n\n      var visited = {};\n      var path = [];\n\n      function visit(node) {\n        path.push(node);\n        if (visited[node]) {\n          cycles.push(Nodash.map(id, path));\n        } else {\n          visited[node] = true;\n          Nodash.each(visit, keys(tasks[node].enables));\n        }\n        delete visited[path.pop()];\n      }\n\n      visit(taskName);\n\n    }, initial);\n\n    if (!Nodash.isEmpty(cycles)) {\n      cycles = Nodash.map(function (cycle) {\n        cycle = Nodash.dropWhile(Nodash.NEQ(Nodash.last(cycle)), cycle);\n        return Nodash.reverse(cycle);\n      }, cycles);\n      return mkError({\n        message: \"cycle detected\",\n        details: Nodash.map(Nodash.intercalate(\" -> \"), cycles)\n      });\n    }\n\n    return function _runTasks(callback) {\n\n      var depends = {},\n          toGo = Nodash.length(tasks),\n          results = Nodash.map(function (task, taskName) {\n        return { toGo: Nodash.length(task.enables) };\n      }, tasks);\n\n      function callbackHandle(taskName) {\n        return function (result, error) {\n          if (!error) {\n            results[taskName].result = result;\n          } else {\n            results[taskName].error = error;\n          }\n\n          // clean up results if need be\n          Nodash.each(function (_, dependency) {\n            results[dependency].toGo -= 1;\n            if (results[dependency].toGo === 0) {\n              delete results[dependency];\n            }\n          }, tasks[taskName].depends);\n\n          toGo -= 1;\n          if (toGo === 0) {\n            // clean results object\n            Nodash.each(function (result) {\n              delete result.toGo;\n            }, results);\n            callback(results);\n          } else {\n            Nodash.each(function (_, next) {\n              delete depends[next][taskName];\n              if (isEmpty(depends[next])) {\n                execute(next);\n              }\n            }, tasks[taskName].enables);\n          }\n        };\n      }\n\n      function execute(taskName) {\n        var task = tasks[taskName],\n            callback = callbackHandle(taskName),\n            dependenciesFailed = false,\n            args = Nodash.map(function (dependency) {\n              if (results[dependency].error) {\n                dependenciesFailed = true;\n              }\n              return results[dependency].result;\n            }, task.args);\n\n        if (dependenciesFailed && isFunction(task.func.runOnError)) {\n          var tempResult = {};\n          Nodash.each(function (dependency) {\n            var result = results[dependency];\n            var stubResult = {};\n            if (result.error) {\n              stubResult.error = result.error;\n            } else {\n              stubResult.result = result.result;\n            }\n            tempResult[dependency] = stubResult;\n          }, task.args);\n          tempResult = task.func.runOnError(tempResult) || tempResult;\n          args = Nodash.map(function (dependency) {\n            return tempResult[dependency].result;\n          }, task.args);\n        }\n\n        args.push(callback);\n\n        trampoline(function _executeTask() {\n          if (dependenciesFailed && !task.func.runOnError) {\n            callback(null, { message: \"dependencies failed\" });\n          } else {\n            var f = task.func;\n            if (isObject(f)) {\n              f = f.func;\n            }\n            try {\n              f.apply(null, args);\n            } catch (e) {\n              callback(null, e);\n            }\n          }\n        });\n      }\n\n      Nodash.each(function (task, taskName) {\n        depends[taskName] = Nodash.clone(task.depends);\n      }, tasks);\n\n      Nodash.each(execute, initial);\n    };\n  });\n\n  register('until', function _until(p, f, v) {\n    while (!p(v)) {\n      v = f(v);\n    }\n    return v;\n  });\n\n  register('pipe', function _pipe() {\n    var functions, intermediateResult, callback;\n    var error = null;\n    if (isArray(arguments[0])) {\n      functions = arguments[0];\n      callback = arguments[1];\n    } else {\n      functions = arguments;\n    }\n    if (functions.length > 0) {\n      if (isFunction(functions[0])) {\n        intermediateResult = functions[0]();\n      } else {\n        intermediateResult = functions[0];\n      }\n      for (var i = 1; i < functions.length; i += 1) {\n        try {\n          intermediateResult = functions[i](intermediateResult);\n        } catch (err) {\n          error = err;\n        }\n      }\n    }\n    if (isFunction(callback)) {\n      callback(error, intermediateResult);\n    } else if (error) {\n      throw error;\n    }\n    return intermediateResult;\n  });\n\n\n  group('Nodash');\n\n  register('isNodash', isNodash);\n\n  register('install', function _install(mountpoint) {\n    var options = arguments[1];\n    var nodashObject = Nodash;\n    var prefix = '';\n    var postfix = '';\n    if (options) {\n      nodashObject = makeNodash(options);\n    }\n    if (isArray(mountpoint)) {\n      if (isString(mountpoint[0])) {\n        prefix = NativeArray.prototype.shift.call(mountpoint);\n      }\n      if (isString(mountpoint[1])) {\n        postfix = mountpoint[1];\n      }\n      mountpoint = mountpoint[0] || {};\n    }\n    Nodash.each(function (func, name) {\n      if (!isNodash(func)) {\n        return;\n      }\n      mountpoint[prefix + name + postfix] = func;\n    }, nodashObject);\n    return mountpoint;\n  });\n\n  return Nodash;\n}\n\nvar Nodash = makeNodash();\n\nif (typeof module !== 'undefined' && module.exports) {\n  module.exports = Nodash;\n} else if (typeof define === 'function' && define.amd) {\n  define(Nodash.idf(Nodash));\n} else {\n  window.Nodash = Nodash;\n}\n\n}());\n"],"sourceRoot":"/source/"}