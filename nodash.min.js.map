{"version":3,"sources":["nodash.js"],"names":["install","Nodash","Math","Array","Object","dontUseNativeSet","refObj","undefined","showEndOfStream","mkStream","f","__stream__","stream","mkInfinite","__infinite__","isInfinite","checkFinite","xs","Error","isFunction","x","isString","isNumber","isStream","id","listToString","join","indexOf","word","string","m","i","table","pos","cnd","length","register","arg","name","aliases","arguments","push","curried","shift","NativeMath","NativeArray","NativeObject","eos","toString","inspect","endOfStream","isArray","arr","prototype","call","keys","hasOwnProperty","hasDontEnumBug","propertyIsEnumerable","dontEnums","dontEnumsLength","obj","prop","result","Set","NativeSet","this","add","value","has","funcs",1,2,"fn","a","b",3,"c",4,"d",5,"e",6,7,"g",8,"h","pipe","functions","intermediateResult","callback","error","err","y","yes","no","bool","ta","tb","k","union","eq","localeCompare","compareTo","min","r","compare","signum","gt","lt","match","abs","floor","ceil","quot","rem","div","mod","exp","sqrt","log","pow","sin","tan","cos","asin","atan","acos","sinh","tanh","Infinity","cosh","asinh","atanh","acosh","num","truncate","trunc","fraction","properFraction","n","gcd","p","v","z","zs","ks","j","consumed","consumedFirst","apply","ys","atSecondStream","slice","ix","consume","split","reverse","exhausted","cons","streaming","foldl","max","scanl","unshift","compose2","concat","map","as","bs","cs","minimum","ds","es","fs","gs","zipWith","zipWith3","zipWith4","zipWith5","zipWith6","zipWith7","lines","words","intersperse","xss","zss","current","head","lasts","inits","tails","prefix","suffix","infix","findIndex","findIndices","set","sort","append","insertBy","last","groupBy","foldl1","def","fun","maybe","filter","isJust","afun","bfun","either","left","right","val","isLeft","compose","fromLeft","fromRight","isRight","lefts","rights","P","module","exports","define","amd","idf","window","Prelude"],"mappings":"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","file":"nodash.min.js","sourcesContent":["/* vim: set et sw=2 ts=2: */\n(function () {\n\n// Save a reference to `Set` (if defined). Otherwise this variable will\n// be `undefined`. References to some native types (`Math`, `Array`,\n// `Object`) are kept here so that native objects can be distinguished\n// from local polyfills.\nvar NativeSet    = typeof Set !== 'undefined' && Set;\nvar NativeMath   = Math;\nvar NativeArray  = Array;\nvar NativeObject = Object;\n\nfunction install(Nodash, Math, Array, Object, dontUseNativeSet, refObj, undefined) {\n  \"use strict\";\n\n  // Use either the supplied objects from the arguments,\n  // or the references saved above.\n  Math   = Math   || NativeMath;\n  Array  = Array  || NativeArray;\n  Object = Object || NativeObject;\n\n  // This is the object the nodash functions will be attached to.\n  // If none is given, just use a new empty object (this is the\n  // object which will be returned eventually).\n  Nodash = Nodash || {};\n\n  function showEndOfStream() {\n    return \"end of stream\";\n  }\n\n  // This is a special object used to mark the end of a stream.\n  // It is used as a kind of unique symbol. The eos variable itself\n  // is not exported and can not be written to from the outside.\n  // \n  // The reference on the other hand is exported as `endOfStream`.\n  // While it is technically possible to overwrite `endOfStream` from\n  // the outside this will not affect the `eos` variable within this\n  // closure.\n  var eos = {\n    toString: showEndOfStream,\n    inspect: showEndOfStream\n  };\n\n  Nodash.endOfStream = eos;\n\n  // This is a plain object which is only available within this\n  // clojure. It is used as a kind of unique symbol to be identified\n  // by comparing references via `===`.\n  var stream = {};\n\n  // Creates a (finite) stream from a function f. This function\n  // is meant to be used internally (within this closure) only.\n  // A function is marked as stream by simply attaching the `stream`\n  // object as `__stream__`.\n  function mkStream(f) {\n    f.__stream__ = stream;\n    return f;\n  }\n\n  // Creates an infinite stream from a function f. This function\n  // is meant to be used internally only.\n  function mkInfinite(f) {\n    // It creates a strean by invoking `mkStream` and then marks it\n    // as infinite by attaching `true` as `__infinite__`.\n    f = mkStream(f);\n    f.__infinite__ = true;\n    return f;\n  }\n\n  // Check whether a stream is infinite by checking for the\n  // `__infinite__` property.\n  function isInfinite(f) {\n    return !!f.__infinite__;\n  }\n\n  // Check whether a stream is finite and raise an error if it is not.\n  // This function is meant to be used internally only to have functions\n  // accepting finite streams only check their arguments.\n  function checkFinite(xs) {\n    if (isInfinite(xs)) {\n      throw new Error('this function can not consume infinite streams');\n    }\n  }\n\n  // `isArray` checks whether a thing is actually an array object.\n  // If `Array.isArray` is not available in this environment it will\n  // fall back to comparing the toString representation. The `toString`\n  // method used is the one from the `NativeObject` to make sure that\n  // client code can not temper with an object and make it look like an\n  // array. The fallback is necessary to cope with legacy browser\n  // environments.\n  var isArray = Array.isArray || function _isArray(arr) {\n    return NativeObject.prototype.toString.call(arr) === '[object Array]';\n  };\n\n  // Utility functions for checking basic JavaScript types.\n  function isFunction(x) { return typeof x === 'function'; }\n  function isString(x)   { return typeof x === 'string'; }\n  function isNumber(x)   { return typeof x === 'number'; }\n\n  // Check whether a thing is actually a stream.\n  function isStream(x)   { return isFunction(x) && x.__stream__ === stream; }\n\n  // Enumerates the keys of an object. If `Object.keys` is not availabe,\n  // fall back to a polyfill. The polyfill is so hilariously big to cope\n  // with oddities in IE 8 (the \"don't enum bug\").\n  var keys = Object.keys || (function() {\n    var hasOwnProperty = NativeObject.prototype.hasOwnProperty,\n        hasDontEnumBug = !(refObj || { toString: null }).propertyIsEnumerable('toString'),\n        dontEnums = [\n          'toString',\n          'toLocaleString',\n          'valueOf',\n          'hasOwnProperty',\n          'isPrototypeOf',\n          'propertyIsEnumerable',\n          'constructor'\n        ],\n        dontEnumsLength = dontEnums.length;\n\n    return function _Object_keys(obj) {\n      var result = [], prop, i;\n\n      for (prop in obj) {\n        if (hasOwnProperty.call(obj, prop)) {\n          result.push(prop);\n        }\n      }\n      if (hasDontEnumBug) {\n        for (i = 0; i < dontEnumsLength; i++) {\n          if (hasOwnProperty.call(obj, dontEnums[i])) {\n            result.push(dontEnums[i]);\n          }\n        }\n      }\n      return result;\n    };\n  }());\n\n  // Either use the native set or (if `dontUseNativeSet` is `true` or\n  // there is no native set implementation) a drop-in replacement.\n  // It reproduces only the actually used functionality, which is\n  // `add` and `has`. It uses the keys of an object to simulate the Set.\n  var Set = (!dontUseNativeSet && NativeSet) || (function () {\n    \n    var Set = function () {\n      this.xs = {};\n    };\n\n    Set.prototype.add = function _Set_add(value) {\n      this.xs[value] = true;\n      return this;\n    };\n\n    Set.prototype.has = function _Set_has(value) {\n      return this.xs[value] === true;\n    };\n\n    return Set;\n  }());\n\n  // The identity function that returns what was passed in unaltered.\n  function id(x) { return x; }\n\n  // A handy shorthand to reduce a list to a string.\n  function listToString(x) { return x.join(''); }\n\n  // `indexOf` uses an implementation of the Knuth-Morrison-Pratt\n  // Algorithm for finding the index of a given subsequence\n  // (identified as `word` here) within a sequence (identified as\n  // `string` here). Thanks to JavaScript's dynamic nature it\n  // works equally well with strings and arrays.\n  function indexOf(word, string) {\n    var m = 0;\n    var i = 0;\n    var table = [];\n\n    var pos = 2;\n    var cnd = 0;\n\n    table[0] = -1;\n    table[1] = 0;\n\n    // build the table for KMP. This takes `O(word.length)` steps.\n    while (pos < word.length) {\n      if (word[pos - 1] == word[cnd]) {\n        cnd = cnd + 1;\n        table[pos] = cnd;\n        pos = pos + 1;\n      } else if (cnd > 0) {\n        cnd = table[cnd];\n      } else {\n        table[pos] = 0;\n        pos = pos + 1;\n      }\n    }\n    \n    // scan the string. This takes `O(string.length)` steps.\n    while (m + i < string.length) {\n      if (word[i] == string[m + i]) {\n        if (i == word.length - 1) {\n          return m;\n        }\n        i = i + 1;\n      } else {\n        if (table[i] > -1) {\n          m = m + i - table[i];\n          i = table[i];\n        } else {\n          i = 0;\n          m = m + 1;\n        }\n      }\n    }\n    // Returns -1 if the subsequence was not found in the sequence.\n    return -1;\n  }\n\n  // ## Partial application\n  //\n  // While partial application of functions can be implemented easily\n  // using JavaScript's `bind` or `apply` functions, it is more\n  // efficient to use closures as JavaScript's native functions\n  // additionally do some heavy error checking and deal with `this`.\n  //\n  // Partial application of functions relies on the `length` reported\n  // by a function. A correct partial application returns a function\n  // with a length\n  // `length of function which is applied MINUS number of arguments consumed`.\n  // Unfortunately this means we need to have some biolerplate code for\n  // every arity of functions and results, thus the big blob of code below.\n  var funcs = {\n\n    0: id,\n    1: id,\n    2: function (fn) {\n      return function (a, b) {\n        switch (arguments.length) {\n        case 1:\n          return function (b) {\n            return fn(a, b);\n          };\n        }\n        return fn(a, b);\n      };\n    },\n    3: function (fn) {\n      return function (a, b, c) {\n        switch (arguments.length) {\n        case 1:\n          return funcs[2](function (b, c) {\n            return fn(a, b, c);\n          });\n        case 2:\n          return function (c) {\n            return fn(a, b, c);\n          };\n        }\n        return fn(a, b, c);\n      };\n    },\n    4: function (fn) {\n      return function (a, b, c, d) {\n        switch (arguments.length) {\n        case 1:\n          return funcs[3](function (b, c, d) {\n            return fn(a, b, c, d);\n          });\n        case 2:\n          return funcs[2](function (c, d) {\n            return fn(a, b, c, d);\n          });\n        case 3:\n          return function (d) {\n            return fn(a, b, c, d);\n          };\n        }\n        return fn(a, b, c, d);\n      };\n    },\n    5: function (fn) {\n      return function (a, b, c, d, e) {\n        switch (arguments.length) {\n        case 1:\n          return funcs[4](function (b, c, d, e) {\n            return fn(a, b, c, d, e);\n          });\n        case 2:\n          return funcs[3](function (c, d, e) {\n            return fn(a, b, c, d, e);\n          });\n        case 3:\n          return funcs[2](function (d, e) {\n            return fn(a, b, c, d, e);\n          });\n        case 4:\n          return function (e) {\n            return fn(a, b, c, d, e);\n          };\n        }\n        return fn(a, b, c, d, e);\n      };\n    },\n    6: function (fn) {\n      return function (a, b, c, d, e, f) {\n        switch (arguments.length) {\n        case 1:\n          return funcs[5](function (b, c, d, e, f) {\n            return fn(a, b, c, d, e, f);\n          });\n        case 2:\n          return funcs[4](function (c, d, e, f) {\n            return fn(a, b, c, d, e, f);\n          });\n        case 3:\n          return funcs[3](function (d, e, f) {\n            return fn(a, b, c, d, e, f);\n          });\n        case 4:\n          return funcs[2](function (e, f) {\n            return fn(a, b, c, d, e, f);\n          });\n        case 5:\n          return function (f) {\n            return fn(a, b, c, d, e, f);\n          };\n        }\n        return fn(a, b, c, d, e, f);\n      };\n    },\n    7: function (fn) {\n      return function (a, b, c, d, e, f, g) {\n        switch (arguments.length) {\n        case 1:\n          return funcs[6](function (b, c, d, e, f, g) {\n            return fn(a, b, c, d, e, f, g);\n          });\n        case 2:\n          return funcs[5](function (c, d, e, f, g) {\n            return fn(a, b, c, d, e, f, g);\n          });\n        case 3:\n          return funcs[4](function (d, e, f, g) {\n            return fn(a, b, c, d, e, f, g);\n          });\n        case 4:\n          return funcs[3](function (e, f, g) {\n            return fn(a, b, c, d, e, f, g);\n          });\n        case 5:\n          return funcs[2](function (f, g) {\n            return fn(a, b, c, d, e, f, g);\n          });\n        case 6:\n          return function (g) {\n            return fn(a, b, c, d, e, f, g);\n          };\n        }\n        return fn(a, b, c, d, e, f, g);\n      };\n    },\n    8: function (fn) {\n      return function (a, b, c, d, e, f, g, h) {\n        switch (arguments.length) {\n        case 1:\n          return funcs[7](function (b, c, d, e, f, g, h) {\n            return fn(a, b, c, d, e, f, g, h);\n          });\n        case 2:\n          return funcs[6](function (c, d, e, f, g, h) {\n            return fn(a, b, c, d, e, f, g, h);\n          });\n        case 3:\n          return funcs[5](function (d, e, f, g, h) {\n            return fn(a, b, c, d, e, f, g, h);\n          });\n        case 4:\n          return funcs[4](function (e, f, g, h) {\n            return fn(a, b, c, d, e, f, g, h);\n          });\n        case 5:\n          return funcs[3](function (f, g, h) {\n            return fn(a, b, c, d, e, f, g, h);\n          });\n        case 6:\n          return funcs[2](function (g, h) {\n            return fn(a, b, c, d, e, f, g, h);\n          });\n        case 7:\n          return function (h) {\n            return fn(a, b, c, d, e, f, g, h);\n          };\n        }\n        return fn(a, b, c, d, e, f, g, h);\n      };\n    }\n  };\n\n  // Turns an ordinary function into a function which can be partially applied.\n  // The maximum arity that this can deal with is 8 (see above).\n  Nodash.curried = function (fn) { return funcs[fn.length](fn); };\n\n  Nodash.pipe = function () {\n    var functions, intermediateResult, callback;\n    var error = null;\n    if (isArray(arguments[0])) {\n      functions = arguments[0];\n      callback = arguments[1];\n    } else {\n      functions = arguments;\n    }\n    if (functions.length > 0) {\n      if (isFunction(functions[0])) {\n        intermediateResult = functions[0]();\n      } else {\n        intermediateResult = functions[0];\n      }\n      for (var i = 1; i < functions.length; i += 1) {\n        try {\n          intermediateResult = functions[i](intermediateResult);\n        } catch (err) {\n          error = err;\n        }\n      }\n    }\n    if (isFunction(callback)) {\n      callback(error, intermediateResult);\n    } else if (error) {\n      throw error;\n    }\n    return intermediateResult;\n  };\n\n  /* @ifdef WITH_ONLINE_HELP */\n  Nodash.functions = {};\n  /* @endif */\n\n  function register() {\n    var f, i, arg, aliases = [], name;\n    for (i = 0; i < arguments.length; i++) {\n      arg = arguments[i];\n      switch (typeof arg) {\n      case 'string':\n        name = name || arg;\n        aliases.push(arg);\n        break;\n      case 'function':\n        f = Nodash.curried(arg);\n        break;\n      }\n    }\n    for (i = 0; i < aliases.length; i++) {\n      Nodash[aliases[i]] = f;\n    }\n    aliases.shift();\n    /* @ifdef WITH_ONLINE_HELP */\n    Nodash.functions[name] = {\n      aliases: aliases,\n      arity: f.length\n    };\n    /* @endif */\n    return f;\n  }\n\n  // # The actual functions\n  //\n  // The stuff so far was utility and boilerplate, needed to lay the\n  // groundwork. The following are the actual functions provided\n  // by this library.\n\n  // ## Utility function exports\n  \n  register('isFunction', isFunction);\n  register('isStream', isStream);\n  register('isArray', isArray);\n  register('isNumber', isNumber);\n  register('isInfinite', isInfinite);\n\n  \n  // ## Functions dealing with functions\n\n  // **id**\n  // \n  // The identify function just returns what was passed in immediately.\n  // It is not actually defined here\n  register('id', id);\n\n  // **idf**\n  // \n  // Since JavaScript is a strict language `idf` is provided. It wrapes\n  // the argument given to it in a function which will always return\n  // that value. A handy application is to define infinite streams,\n  // for example `stream(idf(7))`.\n  register('idf', function _idf(x) {\n    return function () {\n      return x;\n    };\n  });\n\n  // **const**\n  //\n  // The const function accepts a first and a second argument and\n  // discards the latter one. It is mostly used as a section\n  // (partial application) to discard some input in a pipe and\n  // return a fixed value.\n  register('const', 'const_', 'constant', function _const(a, b) {\n    return a;\n  });\n\n  // **apply**\n  //\n  // Applies the function given as first argument to the argument given\n  // as second argument. This seemingly useless function is handy\n  // to make function application explicit, e.g. when building using\n  // `fold` or `zipWith`.\n  register('$', 'apply', function _apply(f, x) {\n    return f(x);\n  });\n\n  // **compose**\n  register('.', 'compose', function _compose(f, g, x) {\n    return f(g(x));\n  });\n\n  // **compose2**\n  register('compose2', function _compose2(f, g, x, y) {\n    return f(g(x, y));\n  });\n\n  // **flip**\n  register('flip', function _flip(f) {\n    return funcs[2](function (b, a) {\n      return f(a, b);\n    });\n  });\n\n  // **on**\n  register('on', function _on(g, f, a, b) {\n    return g(f(a), f(b));\n  });\n\n\n  // ## Functions for working with boolean functions\n\n  // **AND**\n  register('&&', 'AND', function _AND(a, b) { return a && b; });\n\n  // **OR**\n  register('||', 'OR', function _OR(a, b) { return a || b; });\n\n  // **not**\n  register('not', function _not(value) { return !value; });\n\n  // **bool**\n  register('bool', function _bool(yes, no, bool) {\n    return bool ? yes : no;\n  });\n\n\n  // ## Tuple\n\n  // **fst**\n  register('fst', function _fst(arr) { return arr[0]; });\n\n  // **snd**\n  register('snd', function _snd(arr) { return arr[1]; });\n\n  register(',', function (a, b) { return [ a, b ]; });\n\n  register(',,', function (a, b, c) { return [ a, b, c ]; });\n\n  register(',,,', function (a, b, c, d) { return [ a, b, c, d ]; });\n\n  register(',,,,', function (a, b, c, d, e) {\n    return [ a, b, c, d, e ];\n  });\n\n  register(',,,,,', function (a, b, c, d, e, f) {\n    return [ a, b, c, d, e, f ];\n  });\n\n  register(',,,,,,', function (a, b, c, d, e, f, g) {\n    return [ a, b, c, d, e, f, g ];\n  });\n\n\n  // Eq\n\n  register('==', 'eq',  'EQ', function _eq(a, b) {\n    if (a === b) {\n      return true;\n    }\n    var ta = typeof a;\n    var tb = typeof b;\n    if (ta !== tb) {\n      return false;\n    }\n    if (ta === 'object') {\n      var k = Nodash.union(keys(a), keys(b));\n      for (var i = 0; i < k.length; i++) {\n        if (!Nodash.eq(a[k[i]], b[k[i]])) {\n          return false;\n        }\n      }\n      return true;\n    }\n    return false;\n  });\n\n  register('/=', 'neq', 'NEQ', function _neq(a, b) {\n    return !Nodash.eq(a, b);\n  });\n\n\n  // Ord\n\n  register('compare', function _compare(a, b) {\n    switch (typeof a) {\n    case 'string':\n      return a.localeCompare(b);\n    case 'object':\n      if (isFunction(a.compareTo)) {\n        return a.compareTo(b);\n      } else if (isArray(a)) {\n        for (var i = 0; i < Math.min(a.length, b.length); i++) {\n          var r = Nodash.compare(a[i], b[i]);\n          if (r !== 0) {\n              return r;\n          }\n        }\n        return 0;\n      }\n      return a.toString().localeCompare(b.toString());\n    case 'number':\n      return Nodash.signum(a - b);\n    }\n    return undefined;\n  });\n\n  register('<', 'lt', 'LT', function _lt(a, b) {\n    return Nodash.compare(a, b) < 0;\n  });\n\n  register('>', 'gt', 'GT', function _gt(a, b) {\n    return Nodash.compare(a, b) > 0;\n  });\n\n  register('<=', 'lte', 'LTE', function _lte(a, b) {\n    return Nodash.compare(a, b) <= 0;\n  });\n\n  register('>=', 'gte', 'GTE', function _gte(a, b) {\n    return Nodash.compare(a, b) >= 0;\n  });\n\n  register('max', function _max(a, b) {\n    if (Nodash.gt(a, b)) {\n      return a;\n    }\n    return b;\n  });\n\n  register('min', function _min(a, b) {\n    if (Nodash.lt(a, b)) {\n      return a;\n    }\n    return b;\n  });\n\n  register('comparing', function _comparing(f, a, b) {\n    return Nodash.compare(f(a), f(b));\n  });\n\n\n  // Data.Char\n  \n  register('isDigit', function (x) {\n    return !!x.match(/[0-9]/);\n  });\n\n  register('isAsciiLetter', function (x) {\n    return !!x.match(/[a-zA-Z]/);\n  });\n\n\n  // Num\n\n  register('+', 'add', 'ADD', 'plus', 'PLUS', function _add(a, b) {\n    return a + b;\n  });\n\n  register('-', 'sub', 'SUB', 'minus', 'MINUS', 'subtract', function _sub(a, b) {\n    return a - b;\n  });\n\n  register('*', 'mul', 'MUL', 'times', 'TIMES', function _mul(a, b) {\n    return a * b;\n  });\n\n  register('abs', Math.abs);\n\n  register('negate', function _negate(a) { return -a; });\n\n  register('signum', function _signum(x) {\n    if (x > 0) {\n      return 1;\n    } else if (x === 0) {\n      return 0;\n    }\n    return -1;\n  });\n\n\n  // Integral\n\n  register('div', function _div(a, b) { return Math.floor(a / b); });\n\n  register('quot', function _quot(a, b) {\n    var r = a / b;\n    return r >= 0 ? Math.floor(r) : Math.ceil(r);\n  });\n\n  register('rem', function _rem(a, b) { return a % b; });\n\n  register('mod', function _mod(a, b) {\n    var q = Nodash.quot(a, b);\n    var r = Nodash.rem(a, b);\n    return Nodash.signum(r) == -Nodash.signum(b) ? r + b : r;\n  });\n\n  register('divMod',  function _divMod(a, b)  {\n    return [Nodash.div(a, b), Nodash.mod(a, b)];\n  });\n\n  register('quotRem', function _quotRem(a, b) {\n    return [Nodash.quot(a, b), Nodash.rem(a, b)];\n  });\n\n\n  // Fractional\n\n  register('/', 'frac', function _frac(a, b) { return a / b; });\n\n  register('recip', function _recip(a) { return 1 / a; });\n\n\n  // Floating\n\n  register('exp',  Math.exp);\n\n  register('sqrt', Math.sqrt);\n\n  register('log',  Math.log);\n\n  register('logBase', function _logBase(a, b) {\n    return Math.log(a) / Math.log(b);\n  });\n\n  register('**', 'pow', '^', '^^', Math.pow);\n\n  register('sin', Math.sin);\n\n  register('tan', Math.tan);\n\n  register('cos', Math.cos);\n\n  register('asin', Math.asin);\n\n  register('atan', Math.atan);\n\n  register('acos', Math.acos);\n\n  register('sinh', Math.sinh || function _sinh(x) {\n    return (Math.exp(x) - Math.exp(-x)) / 2;\n  });\n\n  register('tanh', Math.tanh || function(x) {\n    if (x === Infinity) {\n      return 1;\n    } else if (x === -Infinity) {\n      return -1;\n    } else {\n      return (Math.exp(x) - Math.exp(-x)) / (Math.exp(x) + Math.exp(-x));\n    }\n  });\n\n  register('cosh', Math.cosh || function(x) {\n    return (Math.exp(x) + Math.exp(-x)) / 2;\n  });\n\n  register('asinh', Math.asinh || function _asinh(x) {\n    if (x === -Infinity) {\n      return x;\n    } else {\n      return Math.log(x + Math.sqrt(x * x + 1));\n    }\n  });\n\n  register('atanh', Math.atanh || function _atanh(x) {\n    return Math.log((1 + x) / (1 - x)) / 2;\n  });\n\n  register('acosh', Math.acosh || function _acosh(x) {\n    return Math.log(x + Math.sqrt(x * x - 1));\n  });\n\n\n  // RealFrac\n\n  register('properFraction', function _properFraction(x) {\n    var num = Nodash.truncate(x);\n    return [ num, -(num - x) ];\n  });\n\n  register('truncate', Math.trunc || function _truncate(x) {\n    switch (Nodash.signum(x)) {\n    case -1:\n      return Math.ceil(x);\n    case 1:\n      return Math.floor(x);\n    }\n    return 0;\n  });\n\n  register('round', function _round(x) {\n    // Haskell's round and JavaScripts Math.round are different\n    var fraction = Nodash.properFraction(x);\n    var n = fraction[0];\n    var m = fraction[1] < 0 ? n - 1 : n + 1;\n    switch (Nodash.signum(Math.abs(fraction[1]) - 0.5)) {\n      case -1:\n        return n;\n      case 0:\n        return n % 2 === 0 ? n : m;\n      case 1:\n        return m;\n    }\n  });\n\n  register('ceiling', Math.ceil);\n\n  register('floor', Math.floor);\n\n\n  // RealFloat\n\n  /* ... */\n\n\n  // Numeric\n\n  register('gcd', function _gcd(a, b) {\n    var c;\n    while (b !== 0) {\n      c = Nodash.rem(a, b);\n      a = b;\n      b = c;\n    }\n    return a;\n  });\n\n  register('lcm', function _lcm(a, b) {\n    if (a === 0 || b === 0) {\n      return 0;\n    }\n    return Math.abs(Nodash.quot(a, Nodash.gcd(a, b)) * b);\n  });\n\n  register('even', function _even(x) { return (x % 2) === 0; });\n\n  register('odd', function _odd(x) { return (x % 2) !== 0; });\n\n\n  // Control\n\n  register('until', function _until(p, f, v) {\n    while (!p(v)) {\n      v = f(v);\n    }\n    return v;\n  });\n\n\n  // Stream\n\n  register('stream', 'lazy', function _stream(xs) {\n    if (isStream(xs)) {\n      return xs;\n    }\n    if (isFunction(xs)) {\n      return mkInfinite(function () {\n        return xs();\n      });\n    }\n    var i = 0;\n    return mkStream(function () {\n      if (i < xs.length) {\n        return xs[i++];\n      }\n      return eos;\n    });\n  });\n\n  register('consume', function _consume(xs) {\n    if (!isStream(xs)) {\n      return xs;\n    }\n    checkFinite(xs);\n    var z, zs = [];\n    while ((z = xs()) !== eos) {\n      zs.push(z);\n    }\n    return zs;\n  });\n\n  register('consumeString', function _consumeString(xs) {\n    if (!isStream(xs)) {\n      return \"\" + xs;\n    }\n    var z, zs = \"\";\n    while ((z = xs()) !== eos) {\n      zs += z;\n    }\n    return zs;\n  });\n\n  register('each', function _each(f, xs) {\n    if (isStream(xs)) {\n      var x;\n      while ((x = xs()) !== eos) {\n        f(x);\n      }\n    } else if (isArray(xs) || isString(xs)) {\n      for (var i = 0; i < xs.length; i++) {\n        f(xs[i]);\n      }\n    } else {\n      var ks = keys(xs);\n      for (var j = 0; j < ks.length; j += 1) {\n        f(xs[ks[j]], ks[j]);\n      }\n    }\n  });\n\n  register('cycle', function _cycle(xs) {\n    if (isStream(xs)) {\n      if (isInfinite(xs)) {\n        return xs;\n      }\n      var arr = [];\n      var consumed = false;\n      var h = 0;\n      return mkInfinite(function () {\n        var z;\n        if (!consumed) {\n          if ((z = xs()) !== eos) {\n            arr.push(z);\n            return z;\n          }\n          consumed = true;\n        }\n        if (h >= arr.length) {\n          h = 0;\n        }\n        return arr[h++];\n      });\n    } else if (isArray(xs) || isString(xs)) {\n      var i = 0;\n      return mkInfinite(function () {\n        if (i >= xs.length) {\n          i = 0;\n        }\n        return xs[i++];\n      });\n    } else {\n      var ks = keys(xs);\n      var j = 0;\n      return mkInfinite(function () {\n        if (j >= ks.length) {\n          j = 0;\n        }\n        return xs[ks[j++]];\n      });\n    }\n  });\n\n  register('repeat', function _repeat(x) {\n    return mkInfinite(function () {\n      return x;\n    });\n  });\n\n  register('iterate', function _iterate(f, x) {\n    return mkInfinite(function () {\n      var r = x;\n      x = f(x);\n      return r;\n    });\n  });\n\n\n  // List\n\n  register(':', 'cons', function _cons(x, xs) {\n    if (isStream(xs)) {\n      var consumedFirst = false;\n      return (isInfinite(xs) ? mkInfinite : mkStream)(function () {\n        if (!consumedFirst) {\n          consumedFirst = true;\n          return x;\n        }\n        return xs();\n      });\n    }\n    var zs = [x];\n    [].push.apply(zs, xs);\n    return zs;\n  });\n\n  register('++', 'append', function _append(xs, ys) {\n    if (isStream(xs) || isStream(ys)) {\n      xs = Nodash.stream(xs);\n      if (isInfinite(xs)) {\n        return xs;\n      }\n      ys = Nodash.stream(ys);\n      var atSecondStream = false;\n      return mkStream(function () {\n        if (atSecondStream) {\n          return ys();\n        }\n        var r = xs();\n        if (r == eos) {\n          atSecondStream = true;\n          return ys();\n        }\n        return r;\n      });\n    }\n    if (isString(xs)) {\n      return xs + ys;\n    }\n    var zs = [];\n    [].push.apply(zs, xs);\n    [].push.apply(zs, ys);\n    return zs;\n  });\n\n  register('map', function _map(f, xs) {\n    if (isStream(xs)) {\n      return (isInfinite(xs) ? mkInfinite : mkStream)(function () {\n        var x = xs();\n        if (x === eos) {\n          return eos;\n        }\n        return f(x);\n      });\n    }\n    var ys;\n    if (isArray(xs) || isString(xs)) {\n      ys = [];\n      for (var i = 0; i < xs.length; i++) {\n        ys.push(f(xs[i]));\n      }\n      return isString(xs) ? listToString(ys) : ys;\n    }\n    ys = {};\n    var ks = keys(xs);\n    for (var j = 0; j < ks.length; j++) {\n      ys[ks[j]] = f(xs[ks[j]], ks[j]);\n    }\n    return ys;\n  });\n\n  register('filter', function _filter(p, xs) {\n    if (isStream(xs)) {\n      return (isInfinite(xs) ? mkInfinite : mkStream)(function () {\n        var x;\n        while ((x = xs()) !== eos) {\n          if (p(x)) {\n            return x;\n          }\n        }\n        return eos;\n      });\n    }\n    var ys;\n    if (isArray(xs) || isString(xs)) {\n      ys = [];\n      for (var i = 0; i < xs.length; i++) {\n        if (p(xs[i])) {\n          ys.push(xs[i]);\n        }\n      }\n      return isString(xs) ? listToString(ys) : ys;\n    }\n    ys = {};\n    var ks = keys(xs);\n    for (var j = 0; j < ks.length; j++) {\n      if (p(xs[ks[j]])) {\n        ys[ks[j]] = xs[ks[j]];\n      }\n    }\n    return ys;\n  });\n\n  register('head', function _head(xs) {\n    if (isStream(xs)) {\n      var x = xs();\n      return x === eos ? undefined : x;\n    }\n    return xs[0];\n  });\n\n  register('last', function _last(xs) {\n    if (isStream(xs)) {\n      checkFinite(xs);\n      var x, z;\n      while ((x = xs()) !== eos) {\n        z = x;\n      }\n      return z;\n    }\n    return xs[xs.length - 1];\n  });\n\n  register('tail', function _tail(xs) {\n    if (isStream(xs)) {\n      xs();\n      return xs;\n    }\n    return xs.slice(1);\n  });\n\n  register('init', function _init(xs) {\n    if (isStream(xs)) {\n      checkFinite(xs);\n      var a = xs(), b;\n      return mkStream(function () {\n        b = xs();\n        if (b === eos) {\n          return eos;\n        }\n        var r = a;\n        a = b;\n        return r;\n      });\n    }\n    return xs.slice(0, xs.length - 1);\n  });\n\n  register('isNull', 'null_', function _null(xs) {\n    if (isStream(xs)) {\n      return xs() === eos;\n    }\n    return xs.length === 0;\n  });\n\n  register('length', function _length(xs) {\n    if (isStream(xs)) {\n      if (isInfinite(xs)) {\n        return Infinity;\n      }\n      var n = 0;\n      while (xs() !== eos) {\n        n += 1;\n      }\n      return n;\n    }\n    return xs.length;\n  });\n\n  register('!!', 'at', 'AT', function _at(xs, ix) {\n    if (isStream(xs)) {\n      var x;\n      for (var i = 0; i < ix; i++) {\n        if (xs() === eos) {\n          return x;\n        }\n      }\n      x = xs();\n      return x === eos ? undefined : x;\n    }\n    return xs[ix];\n  });\n\n  register('reverse', function _reverse(xs) {\n    if (isStream(xs)) {\n      checkFinite(xs);\n      xs = Nodash.consume(xs);\n      var i = xs.length - 1;\n      return mkStream(function () {\n        if (i < 0) {\n          return eos;\n        }\n        return xs[i--];\n      });\n    }\n    var zs = isString(xs) ? \"\".split.call(xs, '') : [].slice.call(xs);\n    zs.reverse();\n    return isString(xs) ? zs.join('') : zs;\n  });\n\n  register('take', function _take(n, xs) {\n    if (isStream(xs)) {\n      var i = 0;\n      return mkStream(function () {\n        if (i++ < n) {\n          return xs();\n        }\n        return eos;\n      });\n    }\n    return xs.slice(0, n);\n  });\n\n  register('drop', function _drop(n, xs) {\n    if (isStream(xs)) {\n      for (var i = 0; i < n; i++) {\n        xs();\n      }\n      return xs;\n    }\n    return xs.slice(n);\n  });\n\n  register('splitAt', function _splitAt(n, xs) {\n    return [ xs.slice(0, n), xs.slice(n) ];\n  });\n\n  register('takeWhile', function _takeWhile(p, xs) {\n    if (isStream(xs)) {\n      var exhausted = false;\n      return mkStream(function () {\n        var x = xs();\n        if (exhausted || x == eos || !p(x)) {\n          exhausted = true;\n          return eos;\n        }\n        return x;\n      });\n    }\n    var i = 0;\n    while (i < xs.length && p(xs[i])) {\n      i++;\n    }\n    return xs.slice(0, i);\n  });\n\n  register('dropWhile', function _dropWhile(p, xs) {\n    if (isStream(xs)) {\n      var x;\n      while ((x = xs()) !== eos && p(x)) {\n      }\n      return Nodash.cons(x, xs);\n    }\n    var i = 0;\n    while (i < xs.length && p(xs[i])) {\n      i++;\n    }\n    return xs.slice(i);\n  });\n\n  register('span', function _span(p, xs) {\n    var i = 0;\n    while (i < xs.length && p(xs[i])) {\n        i++;\n    }\n    return [ xs.slice(0, i), xs.slice(i) ];\n  });\n\n  register('break', function _break(p, xs) {\n    var i = 0;\n    while (i < xs.length && !p(xs[i])) {\n      i++;\n    }\n    return [ xs.slice(0, i), xs.slice(i) ];\n  });\n\n  register('elem', function _elem(x, xs) {\n    if (isStream(xs)) {\n      var z;\n      while ((z = xs()) !== eos) {\n        if (Nodash.eq(z, x)) {\n          return true;\n        }\n      }\n      return false;\n    }\n    for (var i = 0; i < xs.length; i++) {\n      if (Nodash.eq(xs[i], x)) {\n        return true;\n      }\n    }\n    return false;\n  });\n\n  register('notElem', function _notElem(x, xs) {\n    if (isStream(xs)) {\n      var z;\n      while ((z = xs()) !== eos) {\n        if (Nodash.eq(z, x)) {\n          return false;\n        }\n      }\n      return true;\n    }\n    for (var i = 0; i < xs.length; i++) {\n      if (Nodash.eq(xs[i], x)) {\n        return false;\n      }\n    }\n    return true;\n  });\n\n  register('lookup', function _lookup(x, xs) {\n    if (isArray(xs)) {\n      for (var i = 0; i < xs.length; i++) {\n        if (xs[i] && Nodash.eq(xs[i][0], x)) {\n          return xs[i][1];\n        }\n      }\n    }\n    return xs[x];\n  });\n\n  register('foldl', 'foldl\\'', function _foldl(f, x, xs) {\n    var streaming = isStream(xs);\n    if (streaming) {\n      xs = Nodash.consume(xs);\n    }\n    for (var i = 0; i < xs.length; i++) {\n      x = f(x, xs[i]);\n    }\n    if (isArray(x) && streaming) {\n      return Nodash.stream(x);\n    }\n    return x;\n  });\n\n  register('foldl1', 'foldl1\\'', function _foldl1(f, xs) {\n    var streaming = isStream(xs);\n    if (streaming) {\n      xs = Nodash.consume(xs);\n    }\n    var x = xs[0];\n    for (var i = 1; i < xs.length; i++) {\n      x = f(x, xs[i]);\n    }\n    if (isArray(x) && streaming) {\n      return Nodash.stream(x);\n    }\n    return x;\n  });\n\n  register('foldr', function _foldr(f, x, xs) {\n    for (var i = xs.length - 1; i >= 0; i--) {\n      x = f(xs[i], x);\n    }\n    return x;\n  });\n\n  register('foldr1', function _foldr1(f, xs) {\n    var x = xs[xs.length - 1];\n    for (var i = xs.length - 2; i >= 0; i--) {\n      x = f(xs[i], x);\n    }\n    return x;\n  });\n\n  register('and', Nodash.foldl(Nodash['&&'], true));\n\n  register('or', Nodash.foldl(Nodash['||'], false));\n\n  register('sum', Nodash.foldl(Nodash['+'], 0));\n\n  register('product', Nodash.foldl(Nodash['*'], 1));\n\n  register('maximum', Nodash.foldl(Nodash.max, -Infinity));\n\n  register('minimum', Nodash.foldl(Nodash.min, +Infinity));\n\n  register('any', function _any(p, xs) {\n    for (var i = 0; i < xs.length; i++) {\n      if (p(xs[i])) {\n        return true;\n      }\n    }\n    return false;\n  });\n\n  register('all', function _all(p, xs) {\n    for (var i = 0; i < xs.length; i++) {\n      if (!p(xs[i])) {\n        return false;\n      }\n    }\n    return true;\n  });\n\n  register('scanl', function _scanl(f, x, xs) {\n    if (isStream(xs)) {\n      return Nodash.cons(x, (isInfinite(xs) ? mkInfinite : mkStream)(function () {\n        var r = xs();\n        if (r === eos) {\n          return eos;\n        }\n        x = f(x, r);\n        return x;\n      }));\n    }\n    var zs = [x];\n    for (var i = 0; i < xs.length; i++) {\n      x = f(x, xs[i]);\n      zs.push(x);\n    }\n    return zs;\n  });\n\n  register('scanl1', function _scanl1(f, xs) {\n    if (isStream(xs)) {\n      return Nodash.scanl(f, xs(), xs);\n    }\n    var x = xs[0];\n    var zs = [x];\n    for (var i = 1; i < xs.length; i++) {\n      x = f(x, xs[i]);\n      zs.push(x);\n    }\n    return zs;\n  });\n\n  register('scanr', function _scanr(f, x, xs) {\n    var zs = [x];\n    for (var i = xs.length - 1; i >= 0; i--) {\n      x = f(xs[i], x);\n      zs.unshift(x);\n    }\n    return zs;\n  });\n\n  register('scanr1', function _scanr1(f, xs) {\n    var x = xs[xs.length - 1];\n    var zs = [x];\n    for (var i = xs.length - 2; i >= 0; i--) {\n      x = f(xs[i], x);\n      zs.unshift(x);\n    }\n    return zs;\n  });\n\n  register('concat', function _concat(xs) {\n    if (isString(xs[0])) {\n      return xs.join('');\n    }\n    var zs = [];\n    var ks = keys(xs);\n    for (var i = 0; i < ks.length; i++) {\n      [].push.apply(zs, xs[ks[i]]);\n    }\n    return zs;\n  });\n\n  register('concatMap', Nodash.compose2(Nodash.concat, Nodash.map));\n\n  register('replicate', function _replicate(n, x) {\n    var xs = [];\n    for (var i = 0; i < n; i++) {\n      xs.push(x);\n    }\n    return xs;\n  });\n\n  register('zipWith', function _zipWith(f, as, bs) {\n    if (isStream(as) || isStream(bs)) {\n      as = Nodash.stream(as);\n      bs = Nodash.stream(bs);\n      return mkStream(function () {\n        var a = as();\n        var b = bs();\n        if (a === eos || b === eos) {\n          return eos;\n        }\n        return f(a, b);\n      });\n    }\n    var length = Math.min(as.length, bs.length);\n    var zs = [];\n    for (var i = 0; i < length; i++) {\n      zs[i] = f(as[i], bs[i]);\n    }\n    return zs;\n  });\n\n  register('zipWith3', function _zipWith3(f, as, bs, cs) {\n    if (isStream(as) || isStream(bs) || isStream(cs)) {\n      as = Nodash.stream(as);\n      bs = Nodash.stream(bs);\n      cs = Nodash.stream(cs);\n      return mkStream(function () {\n        var a = as();\n        var b = bs();\n        var c = cs();\n        if (a === eos || b === eos || c === eos) {\n          return eos;\n        }\n        return f(a, b, c);\n      });\n    }\n    var length = Nodash.minimum([as.length, bs.length, cs.length]);\n    var zs = [];\n    for (var i = 0; i < length; i++) {\n      zs[i] = f(as[i], bs[i], cs[i]);\n    }\n    return zs;\n  });\n\n  register('zipWith4', function _zipWith4(f, as, bs, cs, ds) {\n    if (isStream(as) || isStream(bs) || isStream(cs) || isStream(ds)) {\n      as = Nodash.stream(as);\n      bs = Nodash.stream(bs);\n      cs = Nodash.stream(cs);\n      ds = Nodash.stream(ds);\n      return mkStream(function () {\n        var a = as();\n        var b = bs();\n        var c = cs();\n        var d = ds();\n        if (a === eos || b === eos || c === eos || d === eos) {\n          return eos;\n        }\n        return f(a, b, c, d);\n      });\n    }\n    var length = Nodash.minimum([as.length, bs.length, cs.length, ds.length]);\n    var zs = [];\n    for (var i = 0; i < length; i++) {\n      zs[i] = f(as[i], bs[i], cs[i], ds[i]);\n    }\n    return zs;\n  });\n\n  register('zipWith5', function _zipWith5(f, as, bs, cs, ds, es) {\n    var length = Nodash.minimum([\n            as.length, bs.length, cs.length, ds.length, es.length]);\n    var zs = [];\n    for (var i = 0; i < length; i++) {\n      zs[i] = f(as[i], bs[i], cs[i], ds[i], es[i]);\n    }\n    return zs;\n  });\n\n  register('zipWith6', function _zipWith6(f, as, bs, cs, ds, es, fs) {\n    var length = Nodash.minimum([\n            as.length, bs.length, cs.length, ds.length, es.length, fs.length]);\n    var zs = [];\n    for (var i = 0; i < length; i++) {\n      zs[i] = f(as[i], bs[i], cs[i], ds[i], es[i], fs[i]);\n    }\n    return zs;\n  });\n\n  register('zipWith7', function _zipWith7(f, as, bs, cs, ds, es, fs, gs) {\n    var length = Nodash.minimum([\n            as.length, bs.length, cs.length, ds.length,\n            es.length, fs.length, gs.length]);\n    var zs = [];\n    for (var i = 0; i < length; i++) {\n      zs[i] = f(as[i], bs[i], cs[i], ds[i], es[i], fs[i], gs[i]);\n    }\n    return zs;\n  });\n\n  register('zip',  Nodash.zipWith(Nodash[',']));\n\n  register('zip3', Nodash.zipWith3(Nodash[',,']));\n\n  register('zip4', Nodash.zipWith4(Nodash[',,,']));\n\n  register('zip5', Nodash.zipWith5(Nodash[',,,,']));\n\n  register('zip6', Nodash.zipWith6(Nodash[',,,,,']));\n\n  register('zip7', Nodash.zipWith7(Nodash[',,,,,,']));\n\n\n  // Strings\n\n  register('lines', function _lines(string) {\n    var result = string.split(/\\n/);\n    if (result[result.length - 1].length === 0) {\n      delete result[result.length - 1];\n    }\n    return result;\n  });\n\n  register('unlines', function _unlines(lines) {\n    return lines.join('\\n');\n  });\n\n  register('words', function _words(string) {\n    return string.split(/[\\n\\r\\v\\t ]/);\n  });\n\n  register('unwords', function _unwords(words) {\n    return words.join(' ');\n  });\n\n\n  // Data.List\n\n  register('intersperse', function _intersperse(x, xs) {\n    if (xs.length === 0) {\n      return [];\n    }\n    var z = [xs[0]];\n    for (var i = 1; i < xs.length; i++) {\n      z.push(x);\n      z.push(xs[i]);\n    }\n    return z;\n  });\n\n  register('intercalate', function _intercalate(x, xs) {\n    return Nodash.concat(Nodash.intersperse(x, xs));\n  });\n\n  register('transpose', function _transpose(xss) {\n    if (!isArray(xss)) {\n      var zss = {};\n      var ks = keys(xss);\n      for (var k = 0; k < ks.length; k++) {\n        zss[xss[ks[k]]] = ks[k];\n      }\n      return zss;\n    }\n    var j = 0;\n    var zs = [];\n    var current;\n    do {\n      current = [];\n      for (var i = 0; i < xss.length; i++) {\n        if (xss[i][j] !== undefined) {\n          current.push(xss[i][j]);\n        }\n      }\n      j += 1;\n    } while (current.length > 0 && zs.push(current));\n    if (isString(xss[0])) {\n      zs = Nodash.map(listToString, zs);\n    }\n    return zs;\n  });\n\n//    register('subsequences', function _subsequences() {\n//    });\n\n//    register('permutations', function _permutations() {\n//    });\n\n//    register('mapAccumL', function _mapAccumL() {\n//    });\n\n//    register('mapAccumR', function _mapAccumR() {\n//    });\n\n//    register('unfoldr', function _unfoldr() {\n//    });\n\n//    register('stripPrefix', function _stripPrefix() {\n//    });\n\n//    register('nubBy', function () {\n//    });\n\n//    register('unionBy', function () {\n//    });\n\n//    register('intersectBy', function () {\n//    });\n\n  register('heads', Nodash.map(Nodash.head));\n\n  register('lasts', Nodash.map(Nodash.lasts));\n\n  register('inits', Nodash.map(Nodash.inits));\n\n  register('tails', Nodash.map(Nodash.tails));\n\n  register('isPrefixOf', function _isPrefixOf(prefix, string) {\n    if (isStream(prefix)) {\n      prefix = Nodash.consume(prefix);\n    }\n    if (isStream(string)) {\n      for (var i = 0; i < prefix.length; i++) {\n        if (prefix[i] !== string()) {\n          return false;\n        }\n      }\n      return true;\n    }\n    for (var j = 0; j < prefix.length; j++) {\n      if (string[j] !== prefix[j]) {\n        return false;\n      }\n    }\n    return true;\n  });\n\n  register('isSuffixOf', function _isSuffixOf(suffix, string) {\n    if (isStream(suffix)) {\n      suffix = Nodash.consume(suffix);\n    }\n    if (isStream(string)) {\n      string = Nodash.consume(string);\n    }\n    for (var i = 0; i < suffix.length; i++) {\n      if (string[string.length - suffix.length + i] !== suffix[i]) {\n        return false;\n      }\n    }\n    return true;\n  });\n\n  register('isInfixOf', function _isInfixOf(infix, string) {\n      return indexOf(infix, string) >= 0;\n  });\n\n  register('indexOf', indexOf);\n\n  register('find', function _find(p, xs) {\n    for (var i = 0; i < xs.length; i++) {\n      if (p(xs[i])) {\n        return xs[i];\n      }\n    }\n    return null;\n  });\n\n  register('partition', function _partition(p, xs) {\n    var as = [];\n    var bs = [];\n    for (var i = 0; i < xs.length; i++) {\n      (p(xs[i]) ? as : bs).push(xs[i]);\n    }\n    if (isString(xs)) {\n      return Nodash.map(listToString, [ as, bs ]);\n    }\n    return [ as, bs ];\n  });\n\n  register('findIndex', function _elemIndex(p, xs) {\n    for (var i = 0; i < xs.length; i++) {\n      if (p(xs[i])) {\n        return i;\n      }\n    }\n    return null;\n  });\n\n  register('findIndices', function _elemIndex(p, xs) {\n    var zs = [];\n    for (var i = 0; i < xs.length; i++) {\n      if (p(xs[i])) {\n        zs.push(i);\n      }\n    }\n    return zs;\n  });\n  \n  register('elemIndex', function _elemIndex(x, xs) {\n    return Nodash.findIndex(Nodash.eq(x), xs);\n  });\n\n  register('elemIndices', function _elemIndex(x, xs) {\n    return Nodash.findIndices(Nodash.eq(x), xs);\n  });\n\n  register('nub', function _nub(xs) {\n    var set = new Set();\n    var zs = [];\n    for (var i = 0; i < xs.length; i++) {\n      if (!set.has(xs[i])) {\n        zs.push(xs[i]);\n        set.add(xs[i]);\n      }\n    }\n    return zs;\n  });\n\n  register('\\\\\\\\', 'difference', function (xs, ys) {\n    var set = new Set();\n    var i;\n    for (i = 0; i < ys.length; i++) {\n      set.add(ys[i]);\n    }\n    var zs = [];\n    for (i = 0; i < xs.length; i++) {\n      if (!set.has(xs[i])) {\n        zs.push(xs[i]);\n      }\n    }\n    return isString(xs) ? listToString(zs) : zs;\n  });\n\n  register('union', function (xs, ys) {\n    var set = new Set();\n    var zs = [];\n    var i;\n    for (i = 0; i < xs.length; i++) {\n      zs.push(xs[i]);\n      set.add(xs[i]);\n    }\n    for (i = 0; i < ys.length; i++) {\n      if (!set.has(ys[i])) {\n        zs.push(ys[i]);\n      }\n    }\n    return zs;\n  });\n\n  register('intersect', function (xs, ys) {\n    var set = new Set();\n    var zs = [];\n    var i;\n    for (i = 0; i < ys.length; i++) {\n      set.add(ys[i]);\n    }\n    for (i = 0; i < xs.length; i++) {\n      if (set.has(xs[i])) {\n        zs.push(xs[i]);\n      }\n    }\n    return zs;\n  });\n\n  register('sort', function (xs) {\n    checkFinite(xs);\n    if (xs.length <= 1) {\n      return xs;\n    }\n    var zs = isString(xs) ? \"\".split.call(xs, '') : [].slice.call(xs);\n    if (isNumber(zs[0])) {\n      zs.sort(function (a, b) { return a - b; });\n    } else if (isString(zs[0])) {\n      zs.sort(function (a, b) { return a.localeCompare(b); });\n    } else {\n      zs.sort(Nodash.compare);\n    }\n    return isString(xs) ? zs.join('') : zs;\n  });\n\n  register('deleteBy', function (p, x, xs) {\n    for (var i = 0; i < xs.length; i++) {\n      if (p(x, xs[i])) {\n        return Nodash.append(xs.slice(0,i), xs.slice(i+1));\n      }\n    }\n    return xs;\n  });\n\n  register('delete', 'delete_', function _delete(x, xs) {\n    var i = xs.indexOf(x);\n    if (i >= 0) {\n      return Nodash.append(xs.slice(0,i), xs.slice(i+1));\n    }\n    return xs;\n  });\n\n  register('insertBy', function (f, x, xs) {\n    for (var i = 0; i < xs.length; i++) {\n      if (f(x, xs[i]) <= 0) {\n        return Nodash.concat([xs.slice(0,i), x, xs.slice(i)]);\n      }\n    }\n    return Nodash.append(xs, x);\n  });\n\n  register('insert', Nodash.insertBy(Nodash.compare));\n\n  register('groupBy', function (p, xs) {\n    if (xs.length === 0) {\n      return [];\n    }\n    var zs = [];\n    var current = [xs[0]];\n    var last = xs[0];\n    for (var i = 1; i < xs.length; i++) {\n      if (p(xs[i], last)) {\n        current.push(last);\n      } else {\n        zs.push(current);\n        current = [last = xs[i]];\n      }\n    }\n    zs.push(current);\n    return isString(xs) ? Nodash.map(listToString, zs) : zs;\n  });\n\n  register('group', Nodash.groupBy(Nodash.eq));\n\n  register('sortBy', function (fn, xs) {\n    if (xs.length <= 1) {\n      return xs;\n    }\n    var zs = isString(xs) ? \"\".split.call(xs, '') : [].slice.call(xs);\n    zs.sort(fn);\n    return isString(xs) ? zs.join('') : zs;\n  });\n\n  register('maximumBy', function (f, xs) {\n    return Nodash.foldl1(function (a, b) {\n      if (f(a, b) > 0) {\n        return a;\n      }\n      return b;\n    }, xs);\n  });\n\n  register('minimumBy', function (f, xs) {\n    return Nodash.foldl1(function (a, b) {\n      if (f(a, b) < 0) {\n        return a;\n      }\n      return b;\n    }, xs);\n  });\n\n\n  // Maybe\n\n  register('maybe', function _maybe(def, fun, maybe) {\n    if (maybe === undefined || maybe === null) {\n      return def;\n    }\n    return fun(maybe);\n  });\n\n  register('isJust', function _isJust(value) {\n    return value !== undefined && value !== null;\n  });\n\n  register('isNothing', function _isNothing(value) {\n    return value === undefined || value === null;\n  });\n\n  register('fromMaybe', function _fromMaybe(def, maybe) {\n    if (maybe === undefined || maybe === null) {\n      return def;\n    }\n    return maybe;\n  });\n\n  register('listToMaybe', function _listToMaybe(xs) {\n    if (isStream(xs)) {\n      var r = xs();\n      return r === eos ? null : r;\n    }\n    return xs[0];\n  });\n\n  register('maybeToList', function _maybeToList(maybe) {\n    if (maybe === undefined || maybe === null) {\n      return [];\n    }\n    return [maybe];\n  });\n\n  register('catMaybes', Nodash.filter(Nodash.isJust));\n\n  register('mapMaybe', Nodash.compose2(Nodash.filter(Nodash.isJust), Nodash.map));\n\n\n  // Either\n\n  register('either', function _either(afun, bfun, either) {\n    var left = either.left || either[0];\n    if (left) {\n      return afun(left);\n    }\n    var right = either.right || either[1];\n    if (right) {\n      return bfun(right);\n    }\n    return null;\n  });\n\n  register('Left', function _Left(value) { return { left: value }; });\n\n  register('Right', function _Right(value) { return { right: value }; });\n\n  register('isLeft', function _isLeft(val) {\n    return val.left !== undefined || (val[0] !== undefined && val[0] !== null);\n  });\n\n  register('isRight', function _isRight(val) {\n    return (val.right !== undefined || val[1] !== undefined) && !Nodash.isLeft(val);\n  });\n\n  register('fromLeft', function _fromLeft(val) {\n    if (val.left !== undefined) {\n      return val.left;\n    }\n    return val[0];\n  });\n\n  register('fromRight', function _fromRight(val) {\n    if (val.right !== undefined) {\n      return val.right;\n    }\n    return val[1];\n  });\n\n  register('lefts', Nodash.compose(\n              Nodash.map(Nodash.fromLeft),\n              Nodash.filter(Nodash.isLeft)\n  ));\n\n  register('rights', Nodash.compose(\n              Nodash.map(Nodash.fromRight),\n              Nodash.filter(Nodash.isRight)\n  ));\n\n  register('partitionEithers', function _partitionEithers(xs) {\n    return [ Nodash.lefts(xs), Nodash.rights(xs) ];\n  });\n\n\n  // Objects\n  \n  register('keys', keys);\n\n  return Nodash;\n}\n\nvar P = install({\n  install: install\n});\n\nif (typeof module !== 'undefined' && module.exports) {\n  module.exports = P;\n} else if (typeof define === 'function' && define.amd) {\n  define(P.idf(P));\n} else {\n  window.Prelude = P;\n  window.Nodash = P;\n}\n\n}());\n"],"sourceRoot":"/source/"}