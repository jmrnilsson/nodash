{"version":3,"sources":["nodash.js"],"names":["install","Nodash","Math","Array","Object","dontUseNatives","refObj","undefined","showEndOfStream","mkStream","f","__stream__","stream","isStream","x","isFunction","mkInfinite","__infinite__","isInfinite","checkFinite","xs","Error","isString","isNumber","id","listToString","join","indexOf","word","string","m","i","table","pos","cnd","length","register","fCurried","arg","aliases","arguments","push","curried","composed","NativeMath","NativeArray","NativeObject","eos","toString","inspect","endOfStream","isArray","arr","prototype","call","isObject","obj","keys","hasOwnProperty","hasDontEnumBug","propertyIsEnumerable","dontEnums","dontEnumsLength","prop","result","Set","NativeSet","this","add","value","has","trampoline","setImmediate","setTimeout","funcs",1,2,"fn","a","b",3,"c",4,"d",5,"e",6,"group","description","g","y","yes","no","bool","ta","tb","k","union","eq","localeCompare","compareTo","min","r","compare","signum","gt","lt","match","abs","floor","ceil","quot","rem","div","mod","exp","sqrt","log","pow","sin","tan","cos","asin","atan","acos","sinh","tanh","Infinity","cosh","asinh","atanh","acosh","num","truncate","trunc","fraction","properFraction","n","gcd","p","v","functions","intermediateResult","callback","error","err","z","zs","ks","j","consumed","h","split","lines","words","consumedFirst","apply","ys","atSecondStream","slice","_","path","object","foldl","at","ix","consume","reverse","exhausted","cons","streaming","AND","OR","ADD","MUL","max","scanl","unshift","compose2","concat","map","as","bs","cs","minimum","ds","zipWith","tuple","zipWith3","tuple3","zipWith4","tuple4","intersperse","xss","zss","current","head","lasts","inits","tails","prefix","suffix","infix","findIndex","findIndices","set","sort","append","insertBy","last","groupBy","yesItsAString","foldl1","def","fun","maybe","filter","isJust","afun","bfun","either","left","right","val","isLeft","compose","fromLeft","fromRight","isRight","lefts","rights","thing","each","key","clone","init","specification","mkError","message","run","prev","newSpec","func","taskName","tasks","initial","spec","name","dependencies","depends","task","args","enables","dependency","unmetDependencies","isEmpty","details","detail","cycles","visit","node","visited","pop","callbackHandle","results","toGo","next","execute","dependenciesFailed","runOnError","tempResult","stubResult","cycle","dropWhile","NEQ","intercalate","P","module","exports","define","amd","idf","window","Prelude"],"mappings":"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","file":"nodash.min.js","sourcesContent":["/* vim: set et sw=2 ts=2: */\n(function () {\n\n// Save a reference to `Set` (if defined). Otherwise this variable will\n// be `undefined`. References to some native types (`Math`, `Array`,\n// `Object`) are kept here so that native objects can be distinguished\n// from local polyfills.\nvar NativeSet    = typeof Set !== 'undefined' && Set;\nvar NativeMath   = Math;\nvar NativeArray  = Array;\nvar NativeObject = Object;\n\nfunction install(Nodash, Math, Array, Object, dontUseNatives, refObj, undefined) {\n  \"use strict\";\n\n  // Use either the supplied objects from the arguments,\n  // or the references saved above.\n  Math   = Math   || NativeMath;\n  Array  = Array  || NativeArray;\n  Object = Object || NativeObject;\n\n  // This is the object the nodash functions will be attached to.\n  // If none is given, just use a new empty object (this is the\n  // object which will be returned eventually).\n  Nodash = Nodash || {};\n\n  function showEndOfStream() {\n    return \"end of stream\";\n  }\n\n  var eos = {\n    toString: showEndOfStream,\n    inspect: showEndOfStream\n  };\n\n  Nodash.endOfStream = eos;\n\n  var stream = {};\n\n  function mkStream(f) {\n    f.__stream__ = stream;\n    return f;\n  }\n\n  function isStream(x)   { return isFunction(x) && x.__stream__ === stream; }\n\n\n  function mkInfinite(f) {\n    f = mkStream(f);\n    f.__infinite__ = true;\n    return f;\n  }\n  function isInfinite(f) {\n    return !!f.__infinite__;\n  }\n\n  function checkFinite(xs) {\n    if (isInfinite(xs)) {\n      throw new Error('this function can not consume infinite streams');\n    }\n  }\n\n  // `isArray` checks whether a thing is actually an array object.\n  // If `Array.isArray` is not available in this environment it will\n  // fall back to comparing the toString representation. The `toString`\n  // method used is the one from the `NativeObject` to make sure that\n  // client code can not temper with an object and make it look like an\n  // array. The fallback is necessary to cope with legacy browser\n  // environments.\n  var isArray = Array.isArray || function _isArray(arr) {\n    return NativeObject.prototype.toString.call(arr) === '[object Array]';\n  };\n\n  // `isObject` checks whether a thing is an object and neither an\n  // array nor null.\n  var isObject = function _isObject(obj) {\n    if (typeof obj === 'object') {\n      return obj !== null && !isArray(obj);\n    }\n    return false;\n  };\n\n  // Utility functions for checking basic JavaScript types.\n  function isFunction(x) { return typeof x === 'function'; }\n  function isString(x)   { return typeof x === 'string'; }\n  function isNumber(x)   { return typeof x === 'number'; }\n\n  // Enumerates the keys of an object. If `Object.keys` is not availabe,\n  // fall back to a polyfill. The polyfill is so hilariously big to cope\n  // with oddities in IE 8 (the \"don't enum bug\").\n  var keys = Object.keys || (function() {\n    var hasOwnProperty = NativeObject.prototype.hasOwnProperty,\n        hasDontEnumBug = !(refObj || { toString: null }).propertyIsEnumerable('toString'),\n        dontEnums = [\n          'toString',\n          'toLocaleString',\n          'valueOf',\n          'hasOwnProperty',\n          'isPrototypeOf',\n          'propertyIsEnumerable',\n          'constructor'\n        ],\n        dontEnumsLength = dontEnums.length;\n\n    return function _Object_keys(obj) {\n      var result = [], prop, i;\n\n      for (prop in obj) {\n        if (hasOwnProperty.call(obj, prop)) {\n          result.push(prop);\n        }\n      }\n      if (hasDontEnumBug) {\n        for (i = 0; i < dontEnumsLength; i++) {\n          if (hasOwnProperty.call(obj, dontEnums[i])) {\n            result.push(dontEnums[i]);\n          }\n        }\n      }\n      return result;\n    };\n  }());\n\n  // Either use the native set or (if `dontUseNatives` is `true` or\n  // there is no native set implementation) a drop-in replacement.\n  // It reproduces only the actually used functionality, which is\n  // `add` and `has`. It uses the keys of an object to simulate the Set.\n  var Set = (!dontUseNatives && NativeSet) || (function () {\n    \n    var Set = function () {\n      this.xs = {};\n    };\n\n    Set.prototype.add = function _Set_add(value) {\n      this.xs[value] = true;\n      return this;\n    };\n\n    Set.prototype.has = function _Set_has(value) {\n      return this.xs[value] === true;\n    };\n\n    return Set;\n  }());\n\n  var trampoline = (!dontUseNatives && setImmediate) || function (f) {\n    setTimeout(f, 0);\n  };\n\n\n  // The identity function that returns what was passed in unaltered.\n  function id(x) { return x; }\n\n  // A handy shorthand to reduce a list to a string.\n  function listToString(x) { return x.join(''); }\n\n  // `indexOf` uses an implementation of the Knuth-Morrison-Pratt\n  // Algorithm for finding the index of a given subsequence\n  // (identified as `word` here) within a sequence (identified as\n  // `string` here). Thanks to JavaScript's dynamic nature it\n  // works equally well with strings and arrays.\n  function indexOf(word, string) {\n    var m = 0;\n    var i = 0;\n    var table = [];\n\n    var pos = 2;\n    var cnd = 0;\n\n    table[0] = -1;\n    table[1] = 0;\n\n    // build the table for KMP. This takes `O(word.length)` steps.\n    while (pos < word.length) {\n      if (word[pos - 1] == word[cnd]) {\n        cnd = cnd + 1;\n        table[pos] = cnd;\n        pos = pos + 1;\n      } else if (cnd > 0) {\n        cnd = table[cnd];\n      } else {\n        table[pos] = 0;\n        pos = pos + 1;\n      }\n    }\n    \n    // scan the string. This takes `O(string.length)` steps.\n    while (m + i < string.length) {\n      if (word[i] == string[m + i]) {\n        if (i == word.length - 1) {\n          return m;\n        }\n        i = i + 1;\n      } else {\n        if (table[i] > -1) {\n          m = m + i - table[i];\n          i = table[i];\n        } else {\n          i = 0;\n          m = m + 1;\n        }\n      }\n    }\n    // Returns -1 if the subsequence was not found in the sequence.\n    return -1;\n  }\n\n  // ## Partial application\n  //\n  // While partial application of functions can be implemented easily\n  // using JavaScript's `bind` or `apply` functions, it is more\n  // efficient to use closures as JavaScript's native functions\n  // additionally do some heavy error checking and deal with `this`.\n  //\n  // Partial application of functions relies on the `length` reported\n  // by a function. A correct partial application returns a function\n  // with a length\n  // `length of function which is applied MINUS number of arguments consumed`.\n  // Unfortunately this means we need to have some biolerplate code for\n  // every arity of functions and results, thus the big blob of code\n  // below.\n  var funcs = {\n\n    0: id,\n    1: id,\n    2: function (fn) {\n      return function (a, b) {\n        switch (arguments.length) {\n        case 1:\n          return function (b) {\n            return fn(a, b);\n          };\n        }\n        return fn(a, b);\n      };\n    },\n    3: function (fn) {\n      return function (a, b, c) {\n        switch (arguments.length) {\n        case 1:\n          return funcs[2](function (b, c) {\n            return fn(a, b, c);\n          });\n        case 2:\n          return function (c) {\n            return fn(a, b, c);\n          };\n        }\n        return fn(a, b, c);\n      };\n    },\n    4: function (fn) {\n      return function (a, b, c, d) {\n        switch (arguments.length) {\n        case 1:\n          return funcs[3](function (b, c, d) {\n            return fn(a, b, c, d);\n          });\n        case 2:\n          return funcs[2](function (c, d) {\n            return fn(a, b, c, d);\n          });\n        case 3:\n          return function (d) {\n            return fn(a, b, c, d);\n          };\n        }\n        return fn(a, b, c, d);\n      };\n    },\n    5: function (fn) {\n      return function (a, b, c, d, e) {\n        switch (arguments.length) {\n        case 1:\n          return funcs[4](function (b, c, d, e) {\n            return fn(a, b, c, d, e);\n          });\n        case 2:\n          return funcs[3](function (c, d, e) {\n            return fn(a, b, c, d, e);\n          });\n        case 3:\n          return funcs[2](function (d, e) {\n            return fn(a, b, c, d, e);\n          });\n        case 4:\n          return function (e) {\n            return fn(a, b, c, d, e);\n          };\n        }\n        return fn(a, b, c, d, e);\n      };\n    },\n    6: function (fn) {\n      return function (a, b, c, d, e, f) {\n        switch (arguments.length) {\n        case 1:\n          return funcs[5](function (b, c, d, e, f) {\n            return fn(a, b, c, d, e, f);\n          });\n        case 2:\n          return funcs[4](function (c, d, e, f) {\n            return fn(a, b, c, d, e, f);\n          });\n        case 3:\n          return funcs[3](function (d, e, f) {\n            return fn(a, b, c, d, e, f);\n          });\n        case 4:\n          return funcs[2](function (e, f) {\n            return fn(a, b, c, d, e, f);\n          });\n        case 5:\n          return function (f) {\n            return fn(a, b, c, d, e, f);\n          };\n        }\n        return fn(a, b, c, d, e, f);\n      };\n    }\n  };\n\n  // Turns an ordinary function into a function which can be partially applied.\n  // The maximum arity that this can deal with is 8 (see above).\n  Nodash.curried = function (fn) { return funcs[fn.length](fn); };\n\n  /* @ifdef WITH_ONLINE_HELP */\n  Nodash.metadata = [];\n  function description(f) {\n    var text = \"\";\n    if (isFunction(f)) {\n      f();\n      text = f.toString()\n              .replace(/^ *function *\\(\\) *\\{/, '')\n              .replace(/\\} *$/, '')\n              .replace(/^ *\\/\\/ ?/gm, '');\n    }\n    return { description: text };\n  }\n  /* @endif */\n\n  var currentGroup = \"\";\n\n  /* @ifdef WITH_ONLINE_HELP */\n  function group(name, desc) {\n    currentGroup = { name: name, description: description(desc).description };\n  }\n\n  function callsites() {\n    var _ = Error.prepareStackTrace;\n    Error.prepareStackTrace = function (_, stack) { return stack; };\n    var stack = new Error().stack.slice(1);\n    Error.prepareStackTrace = _;\n    return stack;\n  }\n  \n  function composed(f) {\n    f.composed = f;\n    return f;\n  }\n  /* @endif */\n\n  // I would love to name this function `export` but that is a reserved keyword\n  // since ECMA Script 5.\n  function register() {\n    var f, fCurried, i, arg, aliases = [];\n    /* @ifdef WITH_ONLINE_HELP */\n    var metadata = {};\n    /* @endif */\n    for (i = 0; i < arguments.length; i++) {\n      arg = arguments[i];\n      switch (typeof arg) {\n      case 'string':\n        aliases.push(arg);\n        break;\n      case 'function':\n        f = arg;\n        break;\n      /* @ifdef WITH_ONLINE_HELP */\n      case 'object':\n        metadata.description = arg.description;\n        break;\n      /* @endif */\n      }\n    }\n    fCurried = Nodash.curried(f.composed ? f() : f);\n    for (i = 0; i < aliases.length; i++) {\n      Nodash[aliases[i]] = fCurried;\n    }\n    /* @ifdef WITH_ONLINE_HELP */\n    metadata.function = f;\n    metadata.group = currentGroup;\n    metadata.aliases = aliases;\n    metadata.definedAt = callsites()[1].getPosition();\n    Nodash.metadata.push(metadata);\n    /* @endif */\n    return fCurried;\n  }\n\n  // # The actual functions\n  //\n  // Every function is exported by attaching it to the `Nodash` object\n  // via `register`. If the function is defined immediately it is given\n  // a name prefixed with an underscore, i.e.\n  //\n  //     register('<function-name>', function _functionName() { ... }\n  //\n  // to make stack traces more readable.\n\n  \n  group('Types', function () {\n  // \n  });\n\n  register('isFunction', description(function () {\n  // `Any → Bool`\n  }), isFunction);\n  register('isStream', description(function () {\n  // `Any → Bool`\n  }), isStream);\n  register('isArray', description(function () {\n  // `Any → Bool`\n  }), isArray);\n  register('isNumber', description(function () {\n  // `Any → Bool`\n  }), isNumber);\n  register('isInfinite', description(function () {\n  // `Any → Bool`\n  }), isInfinite);\n  register('isObject', description(function () {\n  // `Any → Bool`\n  }), isObject);\n\n  // ## Functions dealing with functions\n\n  group('Functions');\n\n  register('id', description(function () {\n  // `a → a`\n  }), id);\n\n  register('idf', description(function () {\n  // `a → () → a`\n  }), function _idf(x) {\n    return function () {\n      return x;\n    };\n  });\n\n  register('const', 'const_', 'constant', description(function () {\n  // `a → b → a`\n  // Accepts two arguments and returns the first one, thereby discarding\n  // the second one. This function is primarily useful for composing other\n  // functions.\n  }), function _const(a, b) {\n    return a;\n  });\n\n  register('$', 'apply', description(function () {\n  // `(a → b) → a → b`\n  }), function _apply(f, x) {\n    return f(x);\n  });\n\n  register('.', 'compose', description(function () {\n  // `(b → c) → (a → b) → (a → c)`\n  }), function _compose(f, g, x) {\n    return f(g(x));\n  });\n\n  register('compose2', description(function () {\n  // `(c → d) → (a → b → c) → (a → b → d)`\n  }), function _compose2(f, g, x, y) {\n    return f(g(x, y));\n  });\n\n  register('flip', description(function () {\n  // `Any → Bool`\n  }), function _flip(f) {\n    return funcs[2](function (b, a) {\n      return f(a, b);\n    });\n  });\n\n  // **on**\n  register('on', description(function () {\n  // `(b → b → c) → (a → b) → (a → a → c)`\n  }), function _on(g, f, a, b) {\n    return g(f(a), f(b));\n  });\n\n\n  // ## Functions for working with boolean functions\n\n  group('Boolean');\n\n  register('&&', 'AND', description(function () {\n  // `Bool → Bool → Bool`\n  }), function _AND(a, b) { return a && b; });\n\n  register('||', 'OR', description(function () {\n  // `Bool → Bool → Bool`\n  }), function _OR(a, b) { return a || b; });\n\n  register('not', description(function () {\n  // `Bool → Bool`\n  }), function _not(value) { return !value; });\n\n  register('bool', description(function () {\n  // `a → a → Bool → a`\n  }), function _bool(yes, no, bool) {\n    return bool ? yes : no;\n  });\n\n\n  // ## Tuple\n  \n  group('Tuples');\n\n  register('fst', description(function () {\n  // `(a, b) → a`\n  }), function _fst(arr) { return arr[0]; });\n\n  register('snd', description(function () {\n  // `(a, b) → b`\n  }), function _snd(arr) { return arr[1]; });\n\n  register(',', 'tuple', description(function () {\n  // `a → b → (a, b)`\n  }), function _tuple(a, b) { return [ a, b ]; });\n\n  register(',,', 'tuple3', description(function () {\n  // `a → b → c → (a, b, c)`\n  }), function _tuple3(a, b, c) { return [ a, b, c ]; });\n\n  register(',,,', 'tuple4', description(function () {\n  // `a → b → c → d → (a, b, c, d)`\n  }), function _tuple4(a, b, c, d) { return [ a, b, c, d ]; });\n\n  \n  // Eq\n  \n  group(\"Comparisons\");\n\n  register('==', 'eq', 'EQ', description(function () {\n  // `Any → Any → Bool`\n  }), function _eq(a, b) {\n    if (a === b) {\n      return true;\n    }\n    var ta = typeof a;\n    var tb = typeof b;\n    if (ta !== tb) {\n      return false;\n    }\n    if (ta === 'object') {\n      var k = Nodash.union(keys(a), keys(b));\n      for (var i = 0; i < k.length; i++) {\n        if (!Nodash.eq(a[k[i]], b[k[i]])) {\n          return false;\n        }\n      }\n      return true;\n    }\n    return false;\n  });\n\n  register('/=', 'neq', 'NEQ', description(function () {\n  // `Any → Any → Bool`\n  }), function _neq(a, b) {\n    return !Nodash.eq(a, b);\n  });\n\n\n  // Ord\n\n  register('compare', description(function () {\n  // `a → a → Number`\n  }), function _compare(a, b) {\n    switch (typeof a) {\n    case 'string':\n      return a.localeCompare(b);\n    case 'object':\n      if (isFunction(a.compareTo)) {\n        return a.compareTo(b);\n      } else if (isArray(a)) {\n        for (var i = 0; i < Math.min(a.length, b.length); i++) {\n          var r = Nodash.compare(a[i], b[i]);\n          if (r !== 0) {\n              return r;\n          }\n        }\n        return 0;\n      }\n      return a.toString().localeCompare(b.toString());\n    case 'number':\n      return Nodash.signum(a - b);\n    }\n    return undefined;\n  });\n\n  register('<', 'lt', 'LT', description(function () {\n  // `a → a → Bool`\n  }), function _lt(a, b) {\n    return Nodash.compare(a, b) < 0;\n  });\n\n  register('>', 'gt', 'GT', description(function () {\n  // `a → a → Bool`\n  }), function _gt(a, b) {\n    return Nodash.compare(a, b) > 0;\n  });\n\n  register('<=', 'lte', 'LTE', description(function () {\n  // `a → a → Bool`\n  }), function _lte(a, b) {\n    return Nodash.compare(a, b) <= 0;\n  });\n\n  register('>=', 'gte', 'GTE', description(function () {\n  // `a → a → Bool`\n  }), function _gte(a, b) {\n    return Nodash.compare(a, b) >= 0;\n  });\n\n  register('max', description(function () {\n  // `Number → Number → Number`\n  }), function _max(a, b) {\n    if (Nodash.gt(a, b)) {\n      return a;\n    }\n    return b;\n  });\n\n  register('min', description(function () {\n  // `Number → Number → Number`\n  }), function _min(a, b) {\n    if (Nodash.lt(a, b)) {\n      return a;\n    }\n    return b;\n  });\n\n  register('comparing', description(function () {\n  // `(a → b) → a → a → Number`\n  }), function _comparing(f, a, b) {\n    return Nodash.compare(f(a), f(b));\n  });\n\n\n  // Data.Char\n\n  group('Characters');\n  \n  register('isDigit', description(function () {\n  // `Char → Bool`\n  }), function _isDigit(x) {\n    return !!x.match(/[0-9]/);\n  });\n\n  register('isAsciiLetter', description(function () {\n  // `Char → Bool`\n  }), function _isAsciiLetter(x) {\n    return !!x.match(/[a-zA-Z]/);\n  });\n\n\n  // Num\n\n  group('Numbers');\n\n  register('+', 'add', 'ADD', 'plus', 'PLUS', description(function () {\n  // `Number → Number → Number`\n  }), function _add(a, b) {\n    return a + b;\n  });\n\n  register('-', 'sub', 'minus', 'MINUS', 'subtract', description(function () {\n  // `Number → Number → Number`\n  }), function _sub(a, b) {\n    return a - b;\n  });\n\n  register('*', 'mul', 'MUL', 'times', 'TIMES', description(function () {\n  // `Number → Number → Number`\n  }), function _mul(a, b) {\n    return a * b;\n  });\n\n  register('abs', description(function () {\n  // `Number → Number`\n  }), Math.abs);\n\n  register('negate', description(function () {\n  // `Number → Number`\n  }), function _negate(a) { return -a; });\n\n  register('signum', description(function () {\n  // `Number → Number`\n  }), function _signum(x) {\n    if (x > 0) {\n      return 1;\n    } else if (x === 0) {\n      return 0;\n    }\n    return -1;\n  });\n\n\n  // Integral\n\n  register('div', description(function () {\n  // `Number → Number → Number`\n  }), function _div(a, b) { return Math.floor(a / b); });\n\n  register('quot', description(function () {\n  // `Number → Number → Number`\n  }), function _quot(a, b) {\n    var r = a / b;\n    return r >= 0 ? Math.floor(r) : Math.ceil(r);\n  });\n\n  register('rem', description(function () {\n  // `Number → Number → Number`\n  }), function _rem(a, b) { return a % b; });\n\n  register('mod', description(function () {\n  // `Number → Number → Number`\n  }), function _mod(a, b) {\n    var q = Nodash.quot(a, b);\n    var r = Nodash.rem(a, b);\n    return Nodash.signum(r) == -Nodash.signum(b) ? r + b : r;\n  });\n\n  register('divMod', description(function () {\n  // `Number → Number → (Number, Number)`\n  }), function _divMod(a, b)  {\n    return [Nodash.div(a, b), Nodash.mod(a, b)];\n  });\n\n  register('quotRem', description(function () {\n  // `Number → Number → (Number, Number)`\n  }), function _quotRem(a, b) {\n    return [Nodash.quot(a, b), Nodash.rem(a, b)];\n  });\n\n\n  // Fractional\n\n  register('/', 'frac', description(function () {\n  // `Number → Number → Number`\n  }), function _frac(a, b) { return a / b; });\n\n  register('recip', description(function () {\n  // `Number → Number`\n  }), function _recip(a) { return 1 / a; });\n\n\n  // Floating\n\n  register('exp', description(function () {\n  // `Number → Number`\n  }), Math.exp);\n\n  register('sqrt', description(function () {\n  // `Number → Number`\n  }), Math.sqrt);\n\n  register('log', description(function () {\n  // `Number → Number`\n  }), Math.log);\n\n  register('logBase', description(function () {\n  // `Number → Number → Number`\n  }), function _logBase(a, b) {\n    return Math.log(a) / Math.log(b);\n  });\n\n  register('**', 'pow', '^', '^^', description(function () {\n  // `Number → Number → Number`\n  }), Math.pow);\n\n  register('sin', description(function () {\n  // `Number → Number`\n  }), Math.sin);\n\n  register('tan', description(function () {\n  // `Number → Number`\n  }), Math.tan);\n\n  register('cos', description(function () {\n  // `Number → Number`\n  }), Math.cos);\n\n  register('asin', description(function () {\n  // `Number → Number`\n  }), Math.asin);\n\n  register('atan', description(function () {\n  // `Number → Number`\n  }), Math.atan);\n\n  register('acos', description(function () {\n  // `Number → Number`\n  }), Math.acos);\n\n  register('sinh', description(function () {\n  // `Number → Number`\n  }), Math.sinh || function _sinh(x) {\n    return (Math.exp(x) - Math.exp(-x)) / 2;\n  });\n\n  register('tanh', description(function () {\n  // `Number → Number`\n  }), Math.tanh || function _tanh(x) {\n    if (x === Infinity) {\n      return 1;\n    } else if (x === -Infinity) {\n      return -1;\n    } else {\n      return (Math.exp(x) - Math.exp(-x)) / (Math.exp(x) + Math.exp(-x));\n    }\n  });\n\n  register('cosh', description(function () {\n  // `Number → Number`\n  }), Math.cosh || function _cosh(x) {\n    return (Math.exp(x) + Math.exp(-x)) / 2;\n  });\n\n  register('asinh', description(function () {\n  // `Number → Number`\n  }), Math.asinh || function _asinh(x) {\n    if (x === -Infinity) {\n      return x;\n    } else {\n      return Math.log(x + Math.sqrt(x * x + 1));\n    }\n  });\n\n  register('atanh', description(function () {\n  // `Number → Number`\n  }), Math.atanh || function _atanh(x) {\n    return Math.log((1 + x) / (1 - x)) / 2;\n  });\n\n  register('acosh', description(function () {\n  // `Number → Number`\n  }), Math.acosh || function _acosh(x) {\n    return Math.log(x + Math.sqrt(x * x - 1));\n  });\n\n\n  // RealFrac\n\n  register('properFraction', description(function () {\n  // `Number → (Number, Number)`\n  }), function _properFraction(x) {\n    var num = Nodash.truncate(x);\n    return [ num, -(num - x) ];\n  });\n\n  register('truncate', description(function () {\n  // `Number → Number`\n  }), Math.trunc || function _truncate(x) {\n    switch (Nodash.signum(x)) {\n    case -1:\n      return Math.ceil(x);\n    case 1:\n      return Math.floor(x);\n    }\n    return 0;\n  });\n\n  register('round', description(function () {\n  // `Number → Number → Number`\n  // Haskell's round and JavaScripts Math.round are different\n  }), function _round(x) {\n    var fraction = Nodash.properFraction(x);\n    var n = fraction[0];\n    var m = fraction[1] < 0 ? n - 1 : n + 1;\n    switch (Nodash.signum(Math.abs(fraction[1]) - 0.5)) {\n      case -1:\n        return n;\n      case 0:\n        return n % 2 === 0 ? n : m;\n      case 1:\n        return m;\n    }\n  });\n\n  register('ceiling', description(function () {\n  // `Number → Number`\n  }), Math.ceil);\n\n  register('floor', description(function () {\n  // `Number → Number`\n  }), Math.floor);\n\n\n  // RealFloat\n\n  /* ... */\n\n\n  // Numeric\n\n  register('gcd', description(function () {\n  // `Number → Number → Number`\n  // Greatest common divisor.\n  }), function _gcd(a, b) {\n    var c;\n    while (b !== 0) {\n      c = Nodash.rem(a, b);\n      a = b;\n      b = c;\n    }\n    return a;\n  });\n\n  register('lcm', description(function () {\n  // `Number → Number → Number`\n  // Lowest common denominator.\n  }), function _lcm(a, b) {\n    if (a === 0 || b === 0) {\n      return 0;\n    }\n    return Math.abs(Nodash.quot(a, Nodash.gcd(a, b)) * b);\n  });\n\n  register('even', description(function () {\n  // `Number → Bool`\n  }), function _even(x) { return (x % 2) === 0; });\n\n  register('odd', description(function () {\n  // `Number → Bool`\n  }), function _odd(x) { return (x % 2) !== 0; });\n\n\n  group('Control flow');\n\n  register('until', description(function () {\n  // `(a → Bool) → (a → a) → a → a`\n  }), function _until(p, f, v) {\n    while (!p(v)) {\n      v = f(v);\n    }\n    return v;\n  });\n\n  register('pipe', description(function () {\n  // Pipes.\n  }), function _pipe() {\n    var functions, intermediateResult, callback;\n    var error = null;\n    if (isArray(arguments[0])) {\n      functions = arguments[0];\n      callback = arguments[1];\n    } else {\n      functions = arguments;\n    }\n    if (functions.length > 0) {\n      if (isFunction(functions[0])) {\n        intermediateResult = functions[0]();\n      } else {\n        intermediateResult = functions[0];\n      }\n      for (var i = 1; i < functions.length; i += 1) {\n        try {\n          intermediateResult = functions[i](intermediateResult);\n        } catch (err) {\n          error = err;\n        }\n      }\n    }\n    if (isFunction(callback)) {\n      callback(error, intermediateResult);\n    } else if (error) {\n      throw error;\n    }\n    return intermediateResult;\n  });\n\n\n  group('Streams');\n\n  register('stream', 'lazy', description(function () {\n  // `[a] → [a]`\n  }), function _stream(xs) {\n    if (isStream(xs)) {\n      return xs;\n    }\n    if (isFunction(xs)) {\n      return mkInfinite(function () {\n        return xs();\n      });\n    }\n    var i = 0;\n    return mkStream(function () {\n      if (i < xs.length) {\n        return xs[i++];\n      }\n      return eos;\n    });\n  });\n\n  register('consume', description(function () {\n  // `[a] → [a]`\n  }), function _consume(xs) {\n    if (!isStream(xs)) {\n      return xs;\n    }\n    checkFinite(xs);\n    var z, zs = [];\n    while ((z = xs()) !== eos) {\n      zs.push(z);\n    }\n    return zs;\n  });\n\n  register('consumeString', description(function () {\n  // `[a] → String`\n  }), function _consumeString(xs) {\n    if (!isStream(xs)) {\n      return \"\" + xs;\n    }\n    var z, zs = \"\";\n    while ((z = xs()) !== eos) {\n      zs += z;\n    }\n    return zs;\n  });\n\n  register('each', description(function () {\n  // `(a → ()) → [a] → ()`\n  }), function _each(f, xs) {\n    if (isStream(xs)) {\n      var x;\n      while ((x = xs()) !== eos) {\n        f(x);\n      }\n    } else if (isArray(xs) || isString(xs)) {\n      for (var i = 0; i < xs.length; i++) {\n        f(xs[i], i);\n      }\n    } else if (isObject(xs)) {\n      var ks = keys(xs);\n      for (var j = 0; j < ks.length; j += 1) {\n        f(xs[ks[j]], ks[j]);\n      }\n    }\n  });\n\n  register('cycle', description(function () {\n  // `[a] → [a]`\n  }), function _cycle(xs) {\n    if (isStream(xs)) {\n      if (isInfinite(xs)) {\n        return xs;\n      }\n      var arr = [];\n      var consumed = false;\n      var h = 0;\n      return mkInfinite(function () {\n        var z;\n        if (!consumed) {\n          if ((z = xs()) !== eos) {\n            arr.push(z);\n            return z;\n          }\n          consumed = true;\n        }\n        if (h >= arr.length) {\n          h = 0;\n        }\n        return arr[h++];\n      });\n    } else if (isArray(xs) || isString(xs)) {\n      var i = 0;\n      return mkInfinite(function () {\n        if (i >= xs.length) {\n          i = 0;\n        }\n        return xs[i++];\n      });\n    } else {\n      var ks = keys(xs);\n      var j = 0;\n      return mkInfinite(function () {\n        if (j >= ks.length) {\n          j = 0;\n        }\n        return xs[ks[j++]];\n      });\n    }\n  });\n\n  register('repeat', description(function () {\n  // `a → [a]`\n  }), function _repeat(x) {\n    return mkInfinite(function () {\n      return x;\n    });\n  });\n\n  register('iterate', description(function () {\n  // `(a → a) → a → [a]`\n  }), function _iterate(f, x) {\n    return mkInfinite(function () {\n      var r = x;\n      x = f(x);\n      return r;\n    });\n  });\n\n\n  group('Strings');\n\n  register('lines', description(function () {\n  // `String → [String]`\n  }), function _lines(string) {\n    var result = string.split(/\\n/);\n    if (result[result.length - 1].length === 0) {\n      delete result[result.length - 1];\n    }\n    return result;\n  });\n\n  register('unlines', description(function () {\n  // `[String] → String`\n  }), function _unlines(lines) {\n    return lines.join('\\n');\n  });\n\n  register('words', description(function () {\n  // `String → [String]`\n  }), function _words(string) {\n    return string.split(/[\\n\\r\\v\\t ]/);\n  });\n\n  register('unwords', description(function () {\n  // `[String] → String`\n  }), function _unwords(words) {\n    return words.join(' ');\n  });\n\n\n  group('Arrays / Lists');\n\n  register(':', 'cons', description(function () {\n  // `a → [a] → [a]`\n  }), function _cons(x, xs) {\n    if (isStream(xs)) {\n      var consumedFirst = false;\n      return (isInfinite(xs) ? mkInfinite : mkStream)(function () {\n        if (!consumedFirst) {\n          consumedFirst = true;\n          return x;\n        }\n        return xs();\n      });\n    }\n    var zs = [x];\n    [].push.apply(zs, xs);\n    return zs;\n  });\n\n  register('++', 'append', description(function () {\n  // `[a] → [a] → [a]`\n  }), function _append(xs, ys) {\n    if (isStream(xs) || isStream(ys)) {\n      xs = Nodash.stream(xs);\n      if (isInfinite(xs)) {\n        return xs;\n      }\n      ys = Nodash.stream(ys);\n      var atSecondStream = false;\n      return mkStream(function () {\n        if (atSecondStream) {\n          return ys();\n        }\n        var r = xs();\n        if (r == eos) {\n          atSecondStream = true;\n          return ys();\n        }\n        return r;\n      });\n    }\n    if (isString(xs)) {\n      return xs + ys;\n    }\n    var zs = [];\n    [].push.apply(zs, xs);\n    [].push.apply(zs, ys);\n    return zs;\n  });\n\n  register('map', description(function () {\n  // `(a → b) → [a] → [b]`\n  }), function _map(f, xs) {\n    if (isStream(xs)) {\n      return (isInfinite(xs) ? mkInfinite : mkStream)(function () {\n        var x = xs();\n        if (x === eos) {\n          return eos;\n        }\n        return f(x);\n      });\n    }\n    var ys;\n    if (isArray(xs) || isString(xs)) {\n      ys = [];\n      for (var i = 0; i < xs.length; i++) {\n        ys.push(f(xs[i]));\n      }\n      return isString(xs) ? listToString(ys) : ys;\n    }\n    ys = {};\n    var ks = keys(xs);\n    for (var j = 0; j < ks.length; j++) {\n      ys[ks[j]] = f(xs[ks[j]], ks[j]);\n    }\n    return ys;\n  });\n\n  register('filter', description(function () {\n  // `(a → Bool) → [a] → [a]`\n  }), function _filter(p, xs) {\n    if (isStream(xs)) {\n      return (isInfinite(xs) ? mkInfinite : mkStream)(function () {\n        var x;\n        while ((x = xs()) !== eos) {\n          if (p(x)) {\n            return x;\n          }\n        }\n        return eos;\n      });\n    }\n    var ys;\n    if (isArray(xs) || isString(xs)) {\n      ys = [];\n      for (var i = 0; i < xs.length; i++) {\n        if (p(xs[i])) {\n          ys.push(xs[i]);\n        }\n      }\n      return isString(xs) ? listToString(ys) : ys;\n    }\n    ys = {};\n    var ks = keys(xs);\n    for (var j = 0; j < ks.length; j++) {\n      if (p(xs[ks[j]])) {\n        ys[ks[j]] = xs[ks[j]];\n      }\n    }\n    return ys;\n  });\n\n  register('head', description(function () {\n  // `[a] → a`\n  }), function _head(xs) {\n    if (isStream(xs)) {\n      var x = xs();\n      return x === eos ? undefined : x;\n    }\n    return xs[0];\n  });\n\n  register('last', description(function () {\n  // `a → [a]`\n  }), function _last(xs) {\n    if (isStream(xs)) {\n      checkFinite(xs);\n      var x, z;\n      while ((x = xs()) !== eos) {\n        z = x;\n      }\n      return z;\n    }\n    return xs[xs.length - 1];\n  });\n\n  register('tail', description(function () {\n  // `[a] → [a]`\n  }), function _tail(xs) {\n    if (isStream(xs)) {\n      xs();\n      return xs;\n    }\n    if (isString(xs)) {\n      return xs.slice(1);\n    }\n    return [].slice.call(xs, 1);\n  });\n\n  register('init', description(function () {\n  // `[a] → [a]`\n  }), function _init(xs) {\n    if (isStream(xs)) {\n      checkFinite(xs);\n      var a = xs(), b;\n      return mkStream(function () {\n        b = xs();\n        if (b === eos) {\n          return eos;\n        }\n        var r = a;\n        a = b;\n        return r;\n      });\n    }\n    if (isString(xs)) {\n      return xs.slice(0, xs.length - 1);\n    }\n    return [].slice.call(xs, 0, xs.length - 1);\n  });\n\n  register('isEmpty', 'null_', description(function () {\n  // `[a] → Bool`\n  }), function _null(xs) {\n    if (isStream(xs)) {\n      return xs() === eos;\n    }\n    if (isArray(xs) || isString(xs)) {\n      return xs.length === 0;\n    }\n    for (var _ in xs) {\n      return false;\n    }\n    return true;\n  });\n\n  register('length', description(function () {\n  // `[a] → Number`\n  }), function _length(xs) {\n    if (isStream(xs)) {\n      if (isInfinite(xs)) {\n        return Infinity;\n      }\n      var n = 0;\n      while (xs() !== eos) {\n        n += 1;\n      }\n      return n;\n    }\n    if (isObject(xs)) {\n      return keys(xs).length;\n    }\n    return xs.length;\n  });\n\n  register('select', description(function () {\n  // `String → Object → Unknown`\n  }), function _select(path, object) {\n    return Nodash.foldl(Nodash.at, object, path.split(/\\./));\n  });\n\n  register('!!', 'at', 'AT', description(function () {\n  // `[a] → Number → a`\n  }), function _at(xs, ix) {\n    if (isStream(xs)) {\n      var x;\n      for (var i = 0; i < ix; i++) {\n        if (xs() === eos) {\n          return x;\n        }\n      }\n      x = xs();\n      return x === eos ? undefined : x;\n    }\n    return xs[ix];\n  });\n\n  register('reverse', description(function () {\n  // `[a] → [a]`\n  }), function _reverse(xs) {\n    if (isStream(xs)) {\n      checkFinite(xs);\n      xs = Nodash.consume(xs);\n      var i = xs.length - 1;\n      return mkStream(function () {\n        if (i < 0) {\n          return eos;\n        }\n        return xs[i--];\n      });\n    }\n    var zs = isString(xs) ? \"\".split.call(xs, '') : [].slice.call(xs);\n    zs.reverse();\n    return isString(xs) ? zs.join('') : zs;\n  });\n\n  register('take', description(function () {\n  // `Number → [a] → [a]`\n  }), function _take(n, xs) {\n    if (isStream(xs)) {\n      var i = 0;\n      return mkStream(function () {\n        if (i++ < n) {\n          return xs();\n        }\n        return eos;\n      });\n    }\n    return xs.slice(0, n);\n  });\n\n  register('drop', description(function () {\n  // `Number → [a] → [a]`\n  }), function _drop(n, xs) {\n    if (isStream(xs)) {\n      for (var i = 0; i < n; i++) {\n        xs();\n      }\n      return xs;\n    }\n    return xs.slice(n);\n  });\n\n  register('splitAt', description(function () {\n  // `→`\n  }), function _splitAt(n, xs) {\n    return [ xs.slice(0, n), xs.slice(n) ];\n  });\n\n  register('takeWhile', description(function () {\n  // `→`\n  }), function _takeWhile(p, xs) {\n    if (isStream(xs)) {\n      var exhausted = false;\n      return mkStream(function () {\n        var x = xs();\n        if (exhausted || x == eos || !p(x)) {\n          exhausted = true;\n          return eos;\n        }\n        return x;\n      });\n    }\n    var i = 0;\n    while (i < xs.length && p(xs[i])) {\n      i++;\n    }\n    return xs.slice(0, i);\n  });\n\n  register('dropWhile', description(function () {\n  // `→`\n  }), function _dropWhile(p, xs) {\n    if (isStream(xs)) {\n      var x;\n      while ((x = xs()) !== eos && p(x)) {\n      }\n      return Nodash.cons(x, xs);\n    }\n    var i = 0;\n    while (i < xs.length && p(xs[i])) {\n      i++;\n    }\n    return xs.slice(i);\n  });\n\n  register('span', description(function () {\n  // `→`\n  }), function _span(p, xs) {\n    var i = 0;\n    while (i < xs.length && p(xs[i])) {\n        i++;\n    }\n    return [ xs.slice(0, i), xs.slice(i) ];\n  });\n\n  register('break_', 'break', description(function () {\n  // `→`\n  }), function _break(p, xs) {\n    var i = 0;\n    while (i < xs.length && !p(xs[i])) {\n      i++;\n    }\n    return [ xs.slice(0, i), xs.slice(i) ];\n  });\n\n  register('elem', description(function () {\n  // `→`\n  }), function _elem(x, xs) {\n    if (isStream(xs)) {\n      var z;\n      while ((z = xs()) !== eos) {\n        if (Nodash.eq(z, x)) {\n          return true;\n        }\n      }\n      return false;\n    }\n    for (var i = 0; i < xs.length; i++) {\n      if (Nodash.eq(xs[i], x)) {\n        return true;\n      }\n    }\n    return false;\n  });\n\n  register('notElem', description(function () {\n  // `→`\n  }), function _notElem(x, xs) {\n    if (isStream(xs)) {\n      var z;\n      while ((z = xs()) !== eos) {\n        if (Nodash.eq(z, x)) {\n          return false;\n        }\n      }\n      return true;\n    }\n    for (var i = 0; i < xs.length; i++) {\n      if (Nodash.eq(xs[i], x)) {\n        return false;\n      }\n    }\n    return true;\n  });\n\n  register('lookup', description(function () {\n  // `→`\n  }), function _lookup(x, xs) {\n    if (isArray(xs)) {\n      for (var i = 0; i < xs.length; i++) {\n        if (xs[i] && Nodash.eq(xs[i][0], x)) {\n          return xs[i][1];\n        }\n      }\n    }\n    return xs[x];\n  });\n\n  register('foldl', 'foldl\\'', description(function () {\n  // `→`\n  }), function _foldl(f, x, xs) {\n    var streaming = isStream(xs);\n    if (streaming) {\n      xs = Nodash.consume(xs);\n    }\n    for (var i = 0; i < xs.length; i++) {\n      x = f(x, xs[i]);\n    }\n    if (isArray(x) && streaming) {\n      return Nodash.stream(x);\n    }\n    return x;\n  });\n\n  register('foldl1', 'foldl1\\'', description(function () {\n  // `→`\n  }), function _foldl1(f, xs) {\n    var streaming = isStream(xs);\n    if (streaming) {\n      xs = Nodash.consume(xs);\n    }\n    var x = xs[0];\n    for (var i = 1; i < xs.length; i++) {\n      x = f(x, xs[i]);\n    }\n    if (isArray(x) && streaming) {\n      return Nodash.stream(x);\n    }\n    return x;\n  });\n\n  register('foldr', description(function () {\n  // `→`\n  }), function _foldr(f, x, xs) {\n    for (var i = xs.length - 1; i >= 0; i--) {\n      x = f(xs[i], x);\n    }\n    return x;\n  });\n\n  register('foldr1', description(function () {\n  // `→`\n  }), function _foldr1(f, xs) {\n    var x = xs[xs.length - 1];\n    for (var i = xs.length - 2; i >= 0; i--) {\n      x = f(xs[i], x);\n    }\n    return x;\n  });\n\n  register('and', description(function () {\n  // `→`\n  }), composed(function (){return Nodash.foldl(Nodash.AND, true);}));\n\n  register('or', description(function () {\n  // `→`\n  }), composed(function (){return Nodash.foldl(Nodash.OR, false);}));\n\n  register('sum', description(function () {\n  // `→`\n  }), composed(function (){return Nodash.foldl(Nodash.ADD, 0);}));\n\n  register('product', description(function () {\n  // `→`\n  }), composed(function (){return Nodash.foldl(Nodash.MUL, 1);}));\n\n  register('maximum', description(function () {\n  // `→`\n  }), composed(function (){return Nodash.foldl(Nodash.max, -Infinity);}));\n\n  register('minimum', description(function () {\n  // `→`\n  }), composed(function (){return Nodash.foldl(Nodash.min, +Infinity);}));\n\n  register('any', description(function () {\n  // `→`\n  }), function _any(p, xs) {\n    for (var i = 0; i < xs.length; i++) {\n      if (p(xs[i])) {\n        return true;\n      }\n    }\n    return false;\n  });\n\n  register('all', description(function () {\n  // `→`\n  }), function _all(p, xs) {\n    for (var i = 0; i < xs.length; i++) {\n      if (!p(xs[i])) {\n        return false;\n      }\n    }\n    return true;\n  });\n\n  register('scanl', description(function () {\n  // `→`\n  }), function _scanl(f, x, xs) {\n    if (isStream(xs)) {\n      return Nodash.cons(x, (isInfinite(xs) ? mkInfinite : mkStream)(function () {\n        var r = xs();\n        if (r === eos) {\n          return eos;\n        }\n        x = f(x, r);\n        return x;\n      }));\n    }\n    var zs = [x];\n    for (var i = 0; i < xs.length; i++) {\n      x = f(x, xs[i]);\n      zs.push(x);\n    }\n    return zs;\n  });\n\n  register('scanl1', description(function () {\n  // `→`\n  }), function _scanl1(f, xs) {\n    if (isStream(xs)) {\n      return Nodash.scanl(f, xs(), xs);\n    }\n    var x = xs[0];\n    var zs = [x];\n    for (var i = 1; i < xs.length; i++) {\n      x = f(x, xs[i]);\n      zs.push(x);\n    }\n    return zs;\n  });\n\n  register('scanr', description(function () {\n  // `→`\n  }), function _scanr(f, x, xs) {\n    var zs = [x];\n    for (var i = xs.length - 1; i >= 0; i--) {\n      x = f(xs[i], x);\n      zs.unshift(x);\n    }\n    return zs;\n  });\n\n  register('scanr1', description(function () {\n  // `→`\n  }), function _scanr1(f, xs) {\n    var x = xs[xs.length - 1];\n    var zs = [x];\n    for (var i = xs.length - 2; i >= 0; i--) {\n      x = f(xs[i], x);\n      zs.unshift(x);\n    }\n    return zs;\n  });\n\n  register('concat', description(function () {\n  // `→`\n  }), function _concat(xs) {\n    if (isString(xs[0])) {\n      return xs.join('');\n    }\n    var zs = [];\n    var ks = keys(xs);\n    for (var i = 0; i < ks.length; i++) {\n      [].push.apply(zs, xs[ks[i]]);\n    }\n    return zs;\n  });\n\n  register('concatMap', description(function () {\n  // `→`\n  }), composed(function (){return Nodash.compose2(Nodash.concat, Nodash.map);}));\n\n  register('replicate', description(function () {\n  // `→`\n  }), function _replicate(n, x) {\n    var xs = [];\n    for (var i = 0; i < n; i++) {\n      xs.push(x);\n    }\n    return xs;\n  });\n\n  register('zipWith', description(function () {\n  // `→`\n  }), function _zipWith(f, as, bs) {\n    if (isStream(as) || isStream(bs)) {\n      as = Nodash.stream(as);\n      bs = Nodash.stream(bs);\n      return mkStream(function () {\n        var a = as();\n        var b = bs();\n        if (a === eos || b === eos) {\n          return eos;\n        }\n        return f(a, b);\n      });\n    }\n    var length = Math.min(as.length, bs.length);\n    var zs = [];\n    for (var i = 0; i < length; i++) {\n      zs[i] = f(as[i], bs[i]);\n    }\n    return zs;\n  });\n\n  register('zipWith3', description(function () {\n  // `→`\n  }), function _zipWith3(f, as, bs, cs) {\n    if (isStream(as) || isStream(bs) || isStream(cs)) {\n      as = Nodash.stream(as);\n      bs = Nodash.stream(bs);\n      cs = Nodash.stream(cs);\n      return mkStream(function () {\n        var a = as();\n        var b = bs();\n        var c = cs();\n        if (a === eos || b === eos || c === eos) {\n          return eos;\n        }\n        return f(a, b, c);\n      });\n    }\n    var length = Nodash.minimum([as.length, bs.length, cs.length]);\n    var zs = [];\n    for (var i = 0; i < length; i++) {\n      zs[i] = f(as[i], bs[i], cs[i]);\n    }\n    return zs;\n  });\n\n  register('zipWith4', description(function () {\n  // `→`\n  }), function _zipWith4(f, as, bs, cs, ds) {\n    if (isStream(as) || isStream(bs) || isStream(cs) || isStream(ds)) {\n      as = Nodash.stream(as);\n      bs = Nodash.stream(bs);\n      cs = Nodash.stream(cs);\n      ds = Nodash.stream(ds);\n      return mkStream(function () {\n        var a = as();\n        var b = bs();\n        var c = cs();\n        var d = ds();\n        if (a === eos || b === eos || c === eos || d === eos) {\n          return eos;\n        }\n        return f(a, b, c, d);\n      });\n    }\n    var length = Nodash.minimum([as.length, bs.length, cs.length, ds.length]);\n    var zs = [];\n    for (var i = 0; i < length; i++) {\n      zs[i] = f(as[i], bs[i], cs[i], ds[i]);\n    }\n    return zs;\n  });\n\n  register('zip', description(function () {\n  // `[a] → [b] → ([a], [b])`\n  }), composed(function (){return Nodash.zipWith(Nodash.tuple);}));\n\n  register('zip3', description(function () {\n  // `[a] → [b] → [c] → ([a], [b], [c])`\n  }), composed(function (){return Nodash.zipWith3(Nodash.tuple3);}));\n\n  register('zip4', description(function () {\n  // `[a] → [b] → [c] → [d] → ([a], [b], [c], [d])`\n  }), composed(function (){return Nodash.zipWith4(Nodash.tuple4);}));\n\n  \n  // further from Data.List\n\n  register('intersperse', description(function () {\n  // `a → [a] → [a]`\n  }), function _intersperse(x, xs) {\n    if (xs.length === 0) {\n      return [];\n    }\n    var z = [xs[0]];\n    for (var i = 1; i < xs.length; i++) {\n      z.push(x);\n      z.push(xs[i]);\n    }\n    return z;\n  });\n\n  register('intercalate', description(function () {\n  // `[a] → [a] → [a]`\n  }), function _intercalate(x, xs) {\n    return Nodash.concat(Nodash.intersperse(x, xs));\n  });\n\n  register('transpose', description(function () {\n  // `[[a]] → [[a]]`\n  }), function _transpose(xss) {\n    if (!isArray(xss)) {\n      var zss = {};\n      var ks = keys(xss);\n      for (var k = 0; k < ks.length; k++) {\n        zss[xss[ks[k]]] = ks[k];\n      }\n      return zss;\n    }\n    var j = 0;\n    var zs = [];\n    var current;\n    do {\n      current = [];\n      for (var i = 0; i < xss.length; i++) {\n        if (xss[i][j] !== undefined) {\n          current.push(xss[i][j]);\n        }\n      }\n      j += 1;\n    } while (current.length > 0 && zs.push(current));\n    if (isString(xss[0])) {\n      zs = Nodash.map(listToString, zs);\n    }\n    return zs;\n  });\n\n//    register('subsequences', function _subsequences() {\n//    });\n\n//    register('permutations', function _permutations() {\n//    });\n\n//    register('mapAccumL', function _mapAccumL() {\n//    });\n\n//    register('mapAccumR', function _mapAccumR() {\n//    });\n\n//    register('unfoldr', function _unfoldr() {\n//    });\n\n//    register('stripPrefix', function _stripPrefix() {\n//    });\n\n//    register('nubBy', function () {\n//    });\n\n//    register('unionBy', function () {\n//    });\n\n//    register('intersectBy', function () {\n//    });\n\n  register('heads', description(function () {\n  // `[[a]] → [a]`\n  }), composed(function (){return Nodash.map(Nodash.head);}));\n\n  register('lasts', description(function () {\n  // `[[a]] → [a]`\n  }), composed(function (){return Nodash.map(Nodash.lasts);}));\n\n  register('inits', description(function () {\n  // `[[a]] → [[a]]`\n  }), composed(function (){return Nodash.map(Nodash.inits);}));\n\n  register('tails', description(function () {\n  // `[[a]] → [[a]]`\n  }), composed(function (){return Nodash.map(Nodash.tails);}));\n\n  register('isPrefixOf', description(function () {\n  // `[a] → [a] → Bool`\n  }), function _isPrefixOf(prefix, string) {\n    if (isStream(prefix)) {\n      prefix = Nodash.consume(prefix);\n    }\n    if (isStream(string)) {\n      for (var i = 0; i < prefix.length; i++) {\n        if (prefix[i] !== string()) {\n          return false;\n        }\n      }\n      return true;\n    }\n    for (var j = 0; j < prefix.length; j++) {\n      if (string[j] !== prefix[j]) {\n        return false;\n      }\n    }\n    return true;\n  });\n\n  register('isSuffixOf', description(function () {\n  // `[a] → [a] → Bool`\n  }), function _isSuffixOf(suffix, string) {\n    if (isStream(suffix)) {\n      suffix = Nodash.consume(suffix);\n    }\n    if (isStream(string)) {\n      string = Nodash.consume(string);\n    }\n    for (var i = 0; i < suffix.length; i++) {\n      if (string[string.length - suffix.length + i] !== suffix[i]) {\n        return false;\n      }\n    }\n    return true;\n  });\n\n  register('isInfixOf', description(function () {\n  // `[a] → [a] → Bool`\n  }), function _isInfixOf(infix, string) {\n      return indexOf(infix, string) >= 0;\n  });\n\n  register('indexOf', indexOf);\n\n  register('find', description(function () {\n  // `→`\n  }), function _find(p, xs) {\n    for (var i = 0; i < xs.length; i++) {\n      if (p(xs[i])) {\n        return xs[i];\n      }\n    }\n    return null;\n  });\n\n  register('partition', description(function () {\n  // `→`\n  }), function _partition(p, xs) {\n    var as = [];\n    var bs = [];\n    for (var i = 0; i < xs.length; i++) {\n      (p(xs[i]) ? as : bs).push(xs[i]);\n    }\n    if (isString(xs)) {\n      return Nodash.map(listToString, [ as, bs ]);\n    }\n    return [ as, bs ];\n  });\n\n  register('findIndex', description(function () {\n  // `→`\n  }), function _elemIndex(p, xs) {\n    for (var i = 0; i < xs.length; i++) {\n      if (p(xs[i])) {\n        return i;\n      }\n    }\n    return null;\n  });\n\n  register('findIndices', description(function () {\n  // `→`\n  }), function _elemIndex(p, xs) {\n    var zs = [];\n    for (var i = 0; i < xs.length; i++) {\n      if (p(xs[i])) {\n        zs.push(i);\n      }\n    }\n    return zs;\n  });\n  \n  register('elemIndex', description(function () {\n  // `→`\n  }), function _elemIndex(x, xs) {\n    return Nodash.findIndex(Nodash.eq(x), xs);\n  });\n\n  register('elemIndices', description(function () {\n  // `→`\n  }), function _elemIndex(x, xs) {\n    return Nodash.findIndices(Nodash.eq(x), xs);\n  });\n\n  register('nub', description(function () {\n  // `[a] → [a]`\n  }), function _nub(xs) {\n    var set = new Set();\n    var zs = [];\n    for (var i = 0; i < xs.length; i++) {\n      if (!set.has(xs[i])) {\n        zs.push(xs[i]);\n        set.add(xs[i]);\n      }\n    }\n    return zs;\n  });\n\n  register('\\\\\\\\', 'difference', description(function () {\n  // `[a] → [a] → [a]`\n  }), function _difference(xs, ys) {\n    var set = new Set();\n    var i;\n    for (i = 0; i < ys.length; i++) {\n      set.add(ys[i]);\n    }\n    var zs = [];\n    for (i = 0; i < xs.length; i++) {\n      if (!set.has(xs[i])) {\n        zs.push(xs[i]);\n      }\n    }\n    return isString(xs) ? listToString(zs) : zs;\n  });\n\n  register('union', description(function () {\n  // `[a] → [a] → [a]`\n  }), function _union(xs, ys) {\n    var set = new Set();\n    var zs = [];\n    var i;\n    for (i = 0; i < xs.length; i++) {\n      zs.push(xs[i]);\n      set.add(xs[i]);\n    }\n    for (i = 0; i < ys.length; i++) {\n      if (!set.has(ys[i])) {\n        zs.push(ys[i]);\n      }\n    }\n    return zs;\n  });\n\n  register('intersect', description(function () {\n  // `[a] → [a] → [a]`\n  }), function _intersect(xs, ys) {\n    var set = new Set();\n    var zs = [];\n    var i;\n    for (i = 0; i < ys.length; i++) {\n      set.add(ys[i]);\n    }\n    for (i = 0; i < xs.length; i++) {\n      if (set.has(xs[i])) {\n        zs.push(xs[i]);\n      }\n    }\n    return zs;\n  });\n\n  register('sort', description(function () {\n  // `[a] → [a]`\n  }), function _sort(xs) {\n    checkFinite(xs);\n    if (xs.length <= 1) {\n      return xs;\n    }\n    var zs = isString(xs) ? \"\".split.call(xs, '') : [].slice.call(xs);\n    if (isNumber(zs[0])) {\n      zs.sort(function (a, b) { return a - b; });\n    } else if (isString(zs[0])) {\n      zs.sort(function (a, b) { return a.localeCompare(b); });\n    } else {\n      zs.sort(Nodash.compare);\n    }\n    return isString(xs) ? zs.join('') : zs;\n  });\n\n  register('deleteBy', description(function () {\n  // `→`\n  }), function _deleteBy(p, x, xs) {\n    for (var i = 0; i < xs.length; i++) {\n      if (p(x, xs[i])) {\n        return Nodash.append(xs.slice(0,i), xs.slice(i+1));\n      }\n    }\n    return xs;\n  });\n\n  register('delete_', 'delete', description(function () {\n  // `→`\n  }), function _delete(x, xs) {\n    var i = xs.indexOf(x);\n    if (i >= 0) {\n      return Nodash.append(xs.slice(0,i), xs.slice(i+1));\n    }\n    return xs;\n  });\n\n  register('insertBy', description(function () {\n  // `→`\n  }), function _insertBy(f, x, xs) {\n    for (var i = 0; i < xs.length; i++) {\n      if (f(x, xs[i]) <= 0) {\n        return Nodash.concat([xs.slice(0,i), x, xs.slice(i)]);\n      }\n    }\n    return Nodash.append(xs, x);\n  });\n\n  register('insert', description(function () {\n  // `→`\n  }), composed(function (){return Nodash.insertBy(Nodash.compare);}));\n\n  register('groupBy', description(function () {\n  // `→`\n  }), function _groupBy(p, xs) {\n    if (xs.length === 0) {\n      return [];\n    }\n    var zs = [];\n    var current = [xs[0]];\n    var last = xs[0];\n    for (var i = 1; i < xs.length; i++) {\n      if (p(xs[i], last)) {\n        current.push(xs[i]);\n      } else {\n        zs.push(current);\n        current = [xs[i]];\n      }\n      last = xs[i];\n    }\n    zs.push(current);\n    return isString(xs) ? Nodash.map(listToString, zs) : zs;\n  });\n\n  register('group', description(function () {\n  // `→`\n  }), composed(function (){return Nodash.groupBy(Nodash.eq);}));\n\n  register('sortBy', description(function () {\n  // `→`\n  }), function _sortBy(fn, xs) {\n    if (isStream(xs)) {\n      checkFinite(xs);\n      xs = Nodash.consume(xs);\n    }\n    if (xs.length <= 1) {\n      return xs;\n    }\n    var yesItsAString = isString(xs);\n    var zs = yesItsAString ? \"\".split.call(xs, '') : [].slice.call(xs);\n    zs.sort(fn);\n    return yesItsAString ? zs.join('') : zs;\n  });\n\n  register('maximumBy', description(function () {\n  // `→`\n  }), function _maximumBy(f, xs) {\n    return Nodash.foldl1(function (a, b) {\n      if (f(a, b) > 0) {\n        return a;\n      }\n      return b;\n    }, xs);\n  });\n\n  register('minimumBy', description(function () {\n  // `→`\n  }), function _minimumBy(f, xs) {\n    return Nodash.foldl1(function (a, b) {\n      if (f(a, b) < 0) {\n        return a;\n      }\n      return b;\n    }, xs);\n  });\n\n\n  // ## Maybe\n\n  group('Maybe');\n\n  register('maybe', description(function () {\n  // `b → (a → b) Maybe a → b`\n  }), function _maybe(def, fun, maybe) {\n    if (maybe === undefined || maybe === null) {\n      return def;\n    }\n    return fun(maybe);\n  });\n\n  register('isJust', description(function () {\n  // `Maybe a → Bool`\n  }), function _isJust(value) {\n    return value !== undefined && value !== null;\n  });\n\n  register('isNothing', description(function () {\n  // `Maybe a → Bool`\n  }), function _isNothing(value) {\n    return value === undefined || value === null;\n  });\n\n  register('fromMaybe', description(function () {\n  // `a → Maybe a → a`\n  }), function _fromMaybe(def, maybe) {\n    if (maybe === undefined || maybe === null) {\n      return def;\n    }\n    return maybe;\n  });\n\n  register('listToMaybe', description(function () {\n  // `→`\n  }), function _listToMaybe(xs) {\n    if (isStream(xs)) {\n      var r = xs();\n      return r === eos ? null : r;\n    }\n    return xs[0];\n  });\n\n  register('maybeToList', description(function () {\n  // `→`\n  }), function _maybeToList(maybe) {\n    if (maybe === undefined || maybe === null) {\n      return [];\n    }\n    return [maybe];\n  });\n\n  register('catMaybes', description(function () {\n  // `→`\n  }), composed(function (){return Nodash.filter(Nodash.isJust);}));\n\n  register('mapMaybe', description(function () {\n  // `→`\n  }), composed(function (){return Nodash.compose2(Nodash.filter(Nodash.isJust), Nodash.map);}));\n\n\n  // ## Either\n\n  group('Either');\n\n  register('either', description(function () {\n  // `(a → c) → (b → c) → Either a b → c`\n  }), function _either(afun, bfun, either) {\n    var left = either.left || either[0];\n    if (left) {\n      return afun(left);\n    }\n    var right = either.right || either[1];\n    if (right) {\n      return bfun(right);\n    }\n    return null;\n  });\n\n  register('Left', description(function () {\n  // `a → Either a b`\n  }), function _Left(value) {\n    return { left: value };\n  });\n\n  register('Right', description(function () {\n  // `b → Either a b`\n  }), function _Right(value) {\n    return { right: value };\n  });\n\n  register('isLeft', description(function () {\n  // `Either a b → Bool`\n  }), function _isLeft(val) {\n    return val.left !== undefined ||\n      (val[0] !== undefined && val[0] !== null);\n  });\n\n  register('isRight', description(function () {\n  // `Either a b → Bool`\n  }), function _isRight(val) {\n    return (val.right !== undefined || val[1] !== undefined) &&\n      !Nodash.isLeft(val);\n  });\n\n  register('fromLeft', description(function () {\n  // `Either a b → a`\n  }), function _fromLeft(val) {\n    if (val.left !== undefined) {\n      return val.left;\n    }\n    return val[0];\n  });\n\n  register('fromRight', description(function () {\n  // `Either a b → b`\n  }), function _fromRight(val) {\n    if (val.right !== undefined) {\n      return val.right;\n    }\n    return val[1];\n  });\n\n  register('lefts', description(function () {\n  // `[Either a b] → [a]`\n  }), Nodash.compose(\n              Nodash.map(Nodash.fromLeft),\n              Nodash.filter(Nodash.isLeft)\n  ));\n\n  register('rights', description(function () {\n  // `[Either a b] → [b]`\n  }), Nodash.compose(\n              Nodash.map(Nodash.fromRight),\n              Nodash.filter(Nodash.isRight)\n  ));\n\n  register('partitionEithers', description(function () {\n  // `[Either a b] → ([a], [b])`\n  }), function _partitionEithers(xs) {\n    return [ Nodash.lefts(xs), Nodash.rights(xs) ];\n  });\n\n\n  // ## Objects\n  \n  group('Objects');\n\n  register('keys', description(function () {\n  // `Object → [String]`\n  }), keys);\n\n  register('clone', description(function () {\n  // `Any → Any`\n  }), function _clone(thing) {\n    if (typeof thing === 'object') {\n      if (thing === null) {\n        return null;\n      }\n      var result = isArray(thing) ? [] : {};\n      Nodash.each(function (value, key) {\n        result[key] = Nodash.clone(value);\n      }, thing);\n      return result;\n    }\n    return thing;\n  });\n\n\n  // ## Tasks\n\n  group('Tasks');\n\n  register('async', description(function () {\n  // \n  }), function _async(f) {\n    return function () {\n      try {\n        var callback = Nodash.last(arguments);\n        var result = f.apply(null, Nodash.init(arguments));\n        trampoline(function () { callback(result); });\n      } catch (e) {\n        trampoline(function () { callback(null, e); });\n      }\n    };\n  });\n\n  register('run', description(function () {\n  // `TaskSpec → (Result → ()) → ()`\n  }), function _run(specification) {\n    // this function does its own currying.\n    if (arguments.length == 2) {\n      Nodash.run(specification)(arguments[1]);\n      return;\n    }\n\n    // if spec is an array, translate to object spec\n    if (isArray(specification)) {\n      var prev = null;\n      var newSpec = {};\n      Nodash.each(function (func, taskName) {\n        newSpec[taskName] = prev === null ? func : [ prev, func ];\n        prev = taskName;\n      }, specification);\n      specification = newSpec;\n    }\n\n    var tasks = {},\n        initial = [];\n\n    // prepare tasks specification.\n    Nodash.each(function (spec, name) {\n      var dependencies = [];\n      var func = null;\n      if (isArray(spec)) {\n        dependencies = Nodash.init(spec);\n        func = Nodash.last(spec);\n      } else {\n        if (isArray(spec.depends)) {\n          dependencies = spec.depends;\n        }\n        func = spec;\n      }\n\n      var task = {\n        func: func,\n        args: dependencies,\n        depends: {},\n        enables: tasks[name] ? tasks[name].enables : {}\n      };\n      Nodash.each(function (dependency) {\n        task.depends[dependency] = true;\n        if (!tasks[dependency]) {\n            tasks[dependency] = { enables: {} };\n        }\n        tasks[dependency].enables[name] = true;\n      }, dependencies);\n      tasks[name] = task;\n    }, specification);\n\n    // check spec for unmet dependencies\n    var unmetDependencies = [];\n    Nodash.each(function (task, taskName) {\n      Nodash.each(function (_, dependency) {\n        if (!specification[dependency]) {\n          unmetDependencies.push([ taskName, dependency ]);\n        }\n      }, task.depends);\n    }, tasks);\n\n    function mkError(message) {\n      return function (callback) {\n        trampoline(function () {\n          callback(null, message);\n        });\n      };\n    }\n\n    if (!isEmpty(unmetDependencies)) {\n      return mkError({\n        message: \"unmet dependencies\",\n        details: Nodash.map(function (detail) {\n          return \"`\" +\n            detail[0] + \"` depends on `\" +\n            detail[1] + \"` which is not defined\";\n        }, unmetDependencies)\n      });\n    }\n\n    // build initial set\n    Nodash.each(function (task, taskName) {\n      if (Nodash.isEmpty(task.depends)) {\n        initial.push(taskName);\n      }\n    }, tasks);\n\n    if (Nodash.isEmpty(initial)) {\n      return mkError({\n        message: \"no initial task\",\n        details: \"There is no task without any dependencies.\"\n      });\n    }\n\n    // check spec for cycles\n    var cycles = [];\n    Nodash.each(function (taskName) {\n\n      var visited = {};\n      var path = [];\n\n      function visit(node) {\n        path.push(node);\n        if (visited[node]) {\n          cycles.push(Nodash.map(id, path));\n        } else {\n          visited[node] = true;\n          Nodash.each(visit, keys(tasks[node].enables));\n        }\n        delete visited[path.pop()];\n      }\n\n      visit(taskName);\n\n    }, initial);\n\n    if (!Nodash.isEmpty(cycles)) {\n      cycles = Nodash.map(function (cycle) {\n        cycle = Nodash.dropWhile(Nodash.NEQ(Nodash.last(cycle)), cycle);\n        return Nodash.reverse(cycle);\n      }, cycles);\n      return mkError({\n        message: \"cycle detected\",\n        details: Nodash.map(Nodash.intercalate(\" -> \"), cycles)\n      });\n    }\n\n    return function _runTasks(callback) {\n\n      var depends = {},\n          toGo = Nodash.length(tasks),\n          results = Nodash.map(function (task, taskName) {\n        return { toGo: Nodash.length(task.enables) };\n      }, tasks);\n\n      function callbackHandle(taskName) {\n        return function (result, error) {\n          if (!error) {\n            results[taskName].result = result;\n          } else {\n            results[taskName].error = error;\n          }\n\n          // clean up results if need be\n          Nodash.each(function (_, dependency) {\n            results[dependency].toGo -= 1;\n            if (results[dependency].toGo === 0) {\n              delete results[dependency];\n            }\n          }, tasks[taskName].depends);\n\n          toGo -= 1;\n          if (toGo === 0) {\n            // clean results object\n            Nodash.each(function (result) {\n              delete result.toGo;\n            }, results);\n            callback(results);\n          } else {\n            Nodash.each(function (_, next) {\n              delete depends[next][taskName];\n              if (isEmpty(depends[next])) {\n                execute(next);\n              }\n            }, tasks[taskName].enables);\n          }\n        };\n      }\n\n      function execute(taskName) {\n        var task = tasks[taskName],\n            callback = callbackHandle(taskName),\n            dependenciesFailed = false,\n            args = Nodash.map(function (dependency) {\n              if (results[dependency].error) {\n                dependenciesFailed = true;\n              }\n              return results[dependency].result;\n            }, task.args);\n\n        if (dependenciesFailed && isFunction(task.func.runOnError)) {\n          var tempResult = {};\n          Nodash.each(function (dependency) {\n            var result = results[dependency];\n            var stubResult = {};\n            if (result.error) {\n              stubResult.error = result.error;\n            } else {\n              stubResult.result = result.result;\n            }\n            tempResult[dependency] = stubResult;\n          }, task.args);\n          tempResult = task.func.runOnError(tempResult) || tempResult;\n          args = Nodash.map(function (dependency) {\n            return tempResult[dependency].result;\n          }, task.args);\n        }\n\n        args.push(callback);\n\n        trampoline(function _executeTask() {\n          if (dependenciesFailed && !task.func.runOnError) {\n            callback(null, { message: \"dependencies failed\" });\n          } else {\n            var f = task.func;\n            if (isObject(f)) {\n              f = f.func;\n            }\n            try {\n              f.apply(null, args);\n            } catch (e) {\n              callback(null, e);\n            }\n          }\n        });\n      }\n\n      Nodash.each(function (task, taskName) {\n        depends[taskName] = Nodash.clone(task.depends);\n      }, tasks);\n\n      Nodash.each(execute, initial);\n    };\n  });\n\n\n  return Nodash;\n}\n\nvar P = install({\n  install: install\n});\n\nif (typeof module !== 'undefined' && module.exports) {\n  module.exports = P;\n} else if (typeof define === 'function' && define.amd) {\n  define(P.idf(P));\n} else {\n  window.Prelude = P;\n  window.Nodash = P;\n}\n\n}());\n"],"sourceRoot":"/source/"}